"use strict";(self.webpackChunk_amzn_dvwebnode=self.webpackChunk_amzn_dvwebnode||[]).push([[6903],{"./node_modules/@amzn/kirup/dist/src/@types/configuration.js":(e,t)=>{var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.Transports=t.Environment=void 0,function(e){e[e.DOM=1]="DOM",e[e.NODE=2]="NODE",e[e.WEBWORKER=3]="WEBWORKER",e[e.SERVICEWORKER=4]="SERVICEWORKER"}(n||(t.Environment=n={})),function(e){e[e.MINERVA=1]="MINERVA",e[e.METRICAGENT=2]="METRICAGENT",e[e.INSIGHTS=3]="INSIGHTS",e[e.CONSOLE=4]="CONSOLE",e[e.RTLA=5]="RTLA"}(r||(t.Transports=r={}))},"./node_modules/@amzn/kirup/dist/src/@types/kirup.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LogTypes=void 0,t.LogTypes=["debug","info","warn","error","fatal","count"]},"./node_modules/@amzn/kirup/dist/src/browser.js":function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.RTLA_RECOMMENDED=t.INSIGHTS_RECOMMENDED=t.MINERVA_RECOMMENDED=t.CONSOLE_RECOMMENDED=t.KirupLogger=void 0;var i=n("./node_modules/@amzn/kirup/dist/src/kirup.browser.js");Object.defineProperty(t,"KirupLogger",{enumerable:!0,get:function(){return i.KirupLogger}});var a=n("./node_modules/@amzn/kirup/dist/src/configuration/console.js");Object.defineProperty(t,"CONSOLE_RECOMMENDED",{enumerable:!0,get:function(){return a.CONSOLE_RECOMMENDED}});var s=n("./node_modules/@amzn/kirup/dist/src/configuration/minerva.js");Object.defineProperty(t,"MINERVA_RECOMMENDED",{enumerable:!0,get:function(){return s.MINERVA_RECOMMENDED}});var l=n("./node_modules/@amzn/kirup/dist/src/configuration/insights.js");Object.defineProperty(t,"INSIGHTS_RECOMMENDED",{enumerable:!0,get:function(){return l.INSIGHTS_RECOMMENDED}});var c=n("./node_modules/@amzn/kirup/dist/src/configuration/rtla.js");Object.defineProperty(t,"RTLA_RECOMMENDED",{enumerable:!0,get:function(){return c.RTLA_RECOMMENDED}}),o(n("./node_modules/@amzn/kirup/dist/src/@types/configuration.js"),t)},"./node_modules/@amzn/kirup/dist/src/configuration/console.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CONSOLE_RECOMMENDED=void 0;const r=n("./node_modules/@amzn/kirup/dist/src/@types/configuration.js");t.CONSOLE_RECOMMENDED={name:r.Transports.CONSOLE,support:[r.Environment.DOM,r.Environment.NODE],persistence:!1,canHandleErrorObject:!0,retries:0,maxDataAge:3e5,maxRateLimit:1e4,maxBatchSize:0}},"./node_modules/@amzn/kirup/dist/src/configuration/insights.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INSIGHTS_RECOMMENDED=void 0;const r=n("./node_modules/@amzn/kirup/dist/src/@types/configuration.js");t.INSIGHTS_RECOMMENDED={name:r.Transports.INSIGHTS,support:[r.Environment.DOM],persistence:!1,canHandleErrorObject:!1,retries:3,maxDataAge:3e5,maxRateLimit:1e4,maxBatchSize:20}},"./node_modules/@amzn/kirup/dist/src/configuration/minerva.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MINERVA_RECOMMENDED=void 0;const r=n("./node_modules/@amzn/kirup/dist/src/@types/configuration.js");t.MINERVA_RECOMMENDED={name:r.Transports.MINERVA,support:[r.Environment.DOM,r.Environment.SERVICEWORKER,r.Environment.WEBWORKER],persistence:!0,canHandleErrorObject:!0,retries:3,maxDataAge:3e5,maxRateLimit:1e4,maxBatchSize:100}},"./node_modules/@amzn/kirup/dist/src/configuration/rtla.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RTLA_RECOMMENDED=void 0;const r=n("./node_modules/@amzn/kirup/dist/src/@types/configuration.js");t.RTLA_RECOMMENDED={name:r.Transports.RTLA,support:[r.Environment.DOM],persistence:!1,canHandleErrorObject:!1,retries:3,maxDataAge:3e5,maxRateLimit:1e4,maxBatchSize:20}},"./node_modules/@amzn/kirup/dist/src/events.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KirupEvents=void 0;t.KirupEvents=class{constructor(e){this.action=e,this.onWindowLoad=this.onWindowLoad.bind(this),this.onDocumentVisibilityChange=this.onDocumentVisibilityChange.bind(this),this.onDocumentPageHide=this.onDocumentPageHide.bind(this),this.attach()}attach(){document.addEventListener("visibilitychange",this.onDocumentVisibilityChange),document.addEventListener("pagehide",this.onDocumentPageHide),window.addEventListener("load",this.onWindowLoad)}onDocumentVisibilityChange(){this.action()}onDocumentPageHide(){this.action()}onWindowLoad(){this.action()}}},"./node_modules/@amzn/kirup/dist/src/kirup.browser.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KirupLogger=void 0;const r=n("./node_modules/@amzn/kirup/dist/src/kirup.js"),o=n("./node_modules/@amzn/kirup/dist/src/transports/transport.js"),i=n("./node_modules/@amzn/kirup/dist/src/transports/transport.browser.js");class a extends r.KirupLoggerBase{constructor(e){super(e,o.KirupTransport,i.loadTransportFromConfig)}}t.KirupLogger=a},"./node_modules/@amzn/kirup/dist/src/kirup.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KirupLoggerBase=void 0;const r=n("./node_modules/@amzn/kirup/dist/src/@types/configuration.js"),o=n("./node_modules/@amzn/kirup/dist/src/events.js"),i=n("./node_modules/@amzn/kirup/dist/src/latency.js"),a=n("./node_modules/@amzn/kirup/dist/src/storage.js"),s=n("./node_modules/@amzn/kirup/dist/src/utils/environment.js"),l=n("./node_modules/@amzn/kirup/dist/src/utils/promises.js"),c=n("./node_modules/@amzn/kirup/dist/src/utils/store.js"),d=n("./node_modules/@amzn/kirup/dist/src/utils/variables.js"),u=[r.Environment.DOM],p=[r.Environment.DOM,r.Environment.WEBWORKER,r.Environment.SERVICEWORKER],g=[r.Environment.DOM,r.Environment.WEBWORKER,r.Environment.SERVICEWORKER],m={warn:"Warning",error:"Error",fatal:"Fatal"},h={domain:"Unknown",id:"Unknown"};t.KirupLoggerBase=class{constructor(e,t,n){if(this._env=(0,s.getCurrentEnvironment)(),this._config=this._applyConfiguration(e),this._transports=this._getTransports(t,n),this._processAllStoreEntries=this._processAllStoreEntries.bind(this),this._processStoreEntries=this._processStoreEntries.bind(this),u.includes(this._env)&&new o.KirupEvents(this._processAllStoreEntries),p.includes(this._env))this._storage=new a.KirupStorage;else if(this._transports.withPersistence.length>0)throw new Error(`Provided configuration includes persistence enabled transports. Environment ${this._env} does not support persistence.`);this.latency=new i.Latency(this._env,this._transports.all)}_applyConfiguration(e){return Object.assign(e,{transports:e.transports.filter((e=>e.support.includes(this._env)))})}_getTransports(e,t){const n=[],r=[];return this._config.transports.forEach((o=>{const i=new e(o,t);n.push(i),o.persistence&&r.push(i)})),{all:n,withPersistence:r}}async _processStoreEntries(e){var t,n,r;null===(n=(t=e.instance).clearSchedule)||void 0===n||n.call(t),await(null===(r=this._storage)||void 0===r?void 0:r.retrieveAndUpdate(e.config.name.toString(),e.config,(t=>{var n,r;return(null===(r=(n=e.instance).batch)||void 0===r?void 0:r.call(n,t))||{newStore:t}})))}async _processAllStoreEntries(){for(const e of this._transports.withPersistence)await this._processStoreEntries(e)}async _processStore(e,t){var n,r;(0,c.getStoreSize)(t)>=e.config.maxBatchSize?await this._processStoreEntries(e):null===(r=(n=e.instance).scheduleNextProcessing)||void 0===r||r.call(n,(()=>this._processStoreEntries(e)))}async _log(e,t,...n){var o,i;let a,s;const l=null===(i=(o=e.config).pageContext)||void 0===i?void 0:i.call(o);switch(t){case"count":{const r=[...n,l];a=()=>e.instance[t](...r),s=()=>{var n,o;return null===(o=(n=e.config).postLogAction)||void 0===o?void 0:o.call(n,t,r[0],r[1]||1,this)};break}case"debug":case"info":{const r=[...n,l];a=()=>e.instance[t](...r),s=()=>{var n,o;return null===(o=(n=e.config).postLogAction)||void 0===o?void 0:o.call(n,t,r[0])};break}case"warn":case"error":case"fatal":{const o=[...n,l],[i,c,u]=o;a=()=>e.instance[t](...o),s=()=>{var n,i,a;if(null===(i=(n=e.config).postLogAction)||void 0===i||i.call(n,t,o[0]),this._env===r.Environment.NODE){const n=null===(a=[c,u].find(d.isVariables))||void 0===a?void 0:a.logID,r=n||h;e.instance.count(["LogID",m[t],r.domain,r.id].join("_"),void 0,void 0,l),e.instance.count([m[t],r.id].join("_"),void 0,void 0,l)}};break}}if(void 0===e.config.allowLogType||e.config.allowLogType.includes(t))if(e.config.persistence&&this._storage){const r=await this._storage.add(e.config.name.toString(),t,[...n,l]);await this._processStore(e,r)}else null==a||a();null==s||s()}_reportLogFailure(e,t){g.includes(this._env)&&console.error(`Log failure for transport ${e.config.name.toString()};`,t)}count(e,t,n){this._transports.all.forEach((r=>(0,l.fireAndForgetPromise)((()=>this._log(r,"count",e,t,n)),(e=>this._reportLogFailure(r,e)))))}fatal(e,t,n){this._transports.all.forEach((r=>(0,l.fireAndForgetPromise)((()=>this._log(r,"fatal",e,t,n)),(e=>this._reportLogFailure(r,e)))))}error(e,t,n){this._transports.all.forEach((r=>(0,l.fireAndForgetPromise)((()=>this._log(r,"error",e,t,n)),(e=>this._reportLogFailure(r,e)))))}warn(e,t,n){this._transports.all.forEach((r=>(0,l.fireAndForgetPromise)((()=>this._log(r,"warn",e,t,n)),(e=>this._reportLogFailure(r,e)))))}info(e,t){this._transports.all.forEach((n=>(0,l.fireAndForgetPromise)((()=>this._log(n,"info",e,t)),(e=>this._reportLogFailure(n,e)))))}debug(e,t){this._transports.all.forEach((n=>(0,l.fireAndForgetPromise)((()=>this._log(n,"debug",e,t)),(e=>this._reportLogFailure(n,e)))))}}},"./node_modules/@amzn/kirup/dist/src/latency.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Latency=void 0;const r=n("./node_modules/@amzn/kirup/dist/src/@types/configuration.js"),o=n("./node_modules/@amzn/kirup/dist/src/utils/safePerformance.js"),i=["domInteractive","domComplete"];t.Latency=class{constructor(e,t){this._env=e,this._transports=t}navigate(e){void 0===e?o.default.mark(o.NAVIGATION_MARKER):o.default.mark(o.NAVIGATION_MARKER,{navigationType:e})}_hasSameDocumentNavigationOccurred(){var e;const t=o.default.getEntriesByName(o.NAVIGATION_MARKER,"mark"),n=null===(e=null==t?void 0:t[t.length-1])||void 0===e?void 0:e.startTime;return Boolean(n)}_getLastSameDocumentNavigationType(){var e;const t=o.default.getEntriesByName(o.NAVIGATION_MARKER,"mark"),n=null==t?void 0:t[t.length-1],r=n&&(null===(e=o.default.getEntryDetailIfPresent(n))||void 0===e?void 0:e.navigationType);return"string"==typeof r?r:"unknown"}_getCrossDocumentNavigationType(){const e=o.default.getEntriesByType("navigation"),t=null==e?void 0:e[0],n=t&&(null==t?void 0:t.type);return"string"==typeof n?n:"unknown"}_getPerformanceMarkName(e,t,n){if("measure"===n)return`${e}-measure`;return`${e}-${t&&Object.entries(t).map((([e,t])=>`${e}:${t}`)).join("|")||"no-dimensions"}-${n}`}start(e,t){return o.default.mark(this._getPerformanceMarkName(e,t,"start")),this}end(e,t){const n=this._getPerformanceMarkName(e,t,"start"),r=this._getPerformanceMarkName(e,t,"end");o.default.mark(r);const i=this._getPerformanceMarkName(e,t,"measure");if(o.default.getEntriesByName(n,"mark").length){o.default.measure(i,n,r);const a=o.default.getEntriesByName(i,"measure"),s=null==a?void 0:a[a.length-1],l=null==s?void 0:s.duration;l&&this._transports.forEach((n=>{var r,o;if(void 0===n.config.allowLogType||n.config.allowLogType.includes("count")){const i=null===(o=(r=n.config).pageContext)||void 0===o?void 0:o.call(r);n.instance.count(e,l,t,i)}}))}return this}clickToATF(){this.clickToX("atf")}clickToCF(){this.clickToX("cf")}clickToInteractive(){this.clickToX("ci")}clickToX(e){if(this._env!==r.Environment.DOM)throw new Error(`Your environment ${this._env} does not support clickTo* metrics.`);{o.default.mark(e);const t=o.default.legacyCalculateLatency(e);if(null===t)return;this._transports.forEach((n=>{var r,o;if(void 0===n.config.allowLogType||n.config.allowLogType.includes("count")){const i=null===(o=(r=n.config).pageContext)||void 0===o?void 0:o.call(r);n.instance.count(e,t,void 0,i)}}))}}timeToInteractive(e,t="2024-03-22"){this.timeToX("timeToInteractive",e,t)}timeToATF(e){this.timeToX("timeToATF",e)}timeToCF(e){this.timeToX("timeToCF",e)}timeToX(e,t,n){if(this._env!==r.Environment.DOM)throw new Error(`Your environment ${this._env} does not support timeTo* metrics.`);{const r=n?`${e}-${n}`:e;i.includes(e)||o.default.mark(r);const a=o.default.calculateLatency(r);if(null===a||a>6e4)return;const s=this._hasSameDocumentNavigationOccurred(),l=s?"same-document":"cross-document",c=s?this._getLastSameDocumentNavigationType():this._getCrossDocumentNavigationType(),d=t&&Object.entries(t).map((([e,t])=>`${e}=${t}`)).join("|");this._transports.forEach((t=>{var r,o;if(void 0===t.config.allowLogType||t.config.allowLogType.includes("count")){const i=t.config.deviceType||"Desktop",s=null===(o=(r=t.config).pageContext)||void 0===o?void 0:o.call(r);!n||n<="2024-03-22"?(t.instance.count(e,a,{DeviceType:i,NavigationType:c,NavigationMethod:l,Pivot:"NONE",...n?{Version:n}:{}},s),d&&t.instance.count(e,a,{DeviceType:i,NavigationType:c,NavigationMethod:l,Pivot:d,...n?{Version:n}:{}},s)):t.instance.count(e,a,{DeviceType:i,NavigationType:c,NavigationMethod:l,Pivot:d||"NONE",Version:n},s)}}))}}}},"./node_modules/@amzn/kirup/dist/src/storage.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KirupStorage=t.EMPTY_STORE=void 0;const r=n("./node_modules/idb-keyval/dist/index.js"),o=n("./node_modules/@amzn/kirup/dist/src/utils/errorObject.js");let i;t.EMPTY_STORE={debug:[],info:[],warn:[],error:[],fatal:[],count:[]};const a=()=>(i||(i=(0,r.createStore)("kirup","keyval")),i);t.KirupStorage=class{constructor(){this.queue=Promise.resolve(t.EMPTY_STORE)}enqueue(e){return this.queue=this.queue.then((()=>e()),(()=>e())),this.queue}add(e,t,n){return this.enqueue((()=>{let i;return(0,r.update)(e,(e=>{const r=e||{};return r[t]||(r[t]=[]),n[0]instanceof Error&&(n[0]=(0,o.errorToObject)(n[0])),r[t].push({time:Date.now(),args:n}),i=r,i}),a()).then((()=>i))}))}retrieveAndUpdate(e,n,o){return this.enqueue((()=>{let i;return(0,r.update)(e,(e=>{try{i=o(this.preprocess(e,n))}catch(t){i={newStore:e}}return i.newStore=i.newStore||t.EMPTY_STORE,i.newStore}),a()).then((()=>{var e;return null===(e=i.promiseSupplier)||void 0===e?void 0:e.call(i)})).then((()=>i.newStore))}))}preprocess(e,n){var r,i,a,s,l,c;if(!e)return t.EMPTY_STORE;const d=Date.now();return e.count=null===(r=e.count)||void 0===r?void 0:r.filter((e=>d-e.time<n.maxDataAge)),e.debug=null===(i=e.debug)||void 0===i?void 0:i.filter((e=>d-e.time<n.maxDataAge)),e.info=null===(a=e.info)||void 0===a?void 0:a.filter((e=>d-e.time<n.maxDataAge)),e.warn=null===(s=e.warn)||void 0===s?void 0:s.filter((e=>d-e.time<n.maxDataAge)).map((e=>(n.canHandleErrorObject&&e.args&&(0,o.isErrorObject)(e.args[0])&&(e.args[0]=(0,o.objectToError)(e.args[0])),e))),e.error=null===(l=e.error)||void 0===l?void 0:l.filter((e=>d-e.time<n.maxDataAge)).map((e=>(n.canHandleErrorObject&&e.args&&(0,o.isErrorObject)(e.args[0])&&(e.args[0]=(0,o.objectToError)(e.args[0])),e))),e.fatal=null===(c=e.fatal)||void 0===c?void 0:c.filter((e=>d-e.time<n.maxDataAge)).map((e=>(n.canHandleErrorObject&&e.args&&(0,o.isErrorObject)(e.args[0])&&(e.args[0]=(0,o.objectToError)(e.args[0])),e))),e}}},"./node_modules/@amzn/kirup/dist/src/transports/base.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TransportBase=void 0;const r=n("./node_modules/@amzn/kirup/dist/src/utils/promises.js");t.TransportBase=class{constructor(e){this.config=e}scheduleNextProcessing(e){void 0===this.timeout&&(this.timeout=setTimeout((()=>{(0,r.fireAndForgetPromise)((()=>e(this.config.name.toString())))}),this.config.maxRateLimit))}clearSchedule(){clearTimeout(this.timeout),this.timeout=void 0}}},"./node_modules/@amzn/kirup/dist/src/transports/console/console.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n("./node_modules/@amzn/kirup/dist/src/utils/errorOverload.js"),o=n("./node_modules/@amzn/kirup/dist/src/transports/base.js");class i extends o.TransportBase{batch(e){var t,n,r,o,i,a;return e.debug=null===(t=e.debug)||void 0===t?void 0:t.filter((e=>!this.debug(e.args[0],e.args[1]))),e.info=null===(n=e.info)||void 0===n?void 0:n.filter((e=>!this.info(e.args[0],e.args[1]))),e.warn=null===(r=e.warn)||void 0===r?void 0:r.filter((e=>!this.warn(e.args[0],e.args[1],e.args[2]))),e.error=null===(o=e.error)||void 0===o?void 0:o.filter((e=>!this.error(e.args[0],e.args[1],e.args[2]))),e.fatal=null===(i=e.fatal)||void 0===i?void 0:i.filter((e=>!this.fatal(e.args[0],e.args[1],e.args[2]))),e.count=null===(a=e.count)||void 0===a?void 0:a.filter((e=>!this.count(e.args[0],e.args[1],e.args[2]))),{newStore:e}}count(e,t,n){return"number"==typeof t&&n?this._countDimensionValue(e,t,n):"number"==typeof t?this._countValue(e,t):t&&!n?this._countDimension(e,t):this._countName(e),!0}_countName(e){console.log(`count: ${e}`)}_countValue(e,t){console.log(`count: ${e}, value: ${t}`)}_countDimension(e,t){console.log(`count: ${e}, dimensions: `,t)}_countDimensionValue(e,t,n){console.log(`count: ${e}, value: ${t}, dimensions: `,n)}fatal(e,t,n){return r.untangleOverload.call(this,"fatal",e,t,n),!0}_fatalMessage(e){console.error(`fatal: ${e}`)}_fatalWithError(e){console.error(e)}_fatalWithErrorAndMessage(e,t){console.error(`fatal: ${e}`,t)}_fatalWithVariables(e,t){console.error(`fatal: ${e}`,t)}_fatalWithErrorAndVariables(e,t,n){console.error(`fatal: ${e}`,t,n)}error(e,t,n){return r.untangleOverload.call(this,"error",e,t,n),!0}_errorMessage(e){console.error(`error: ${e}`)}_errorWithErrorAndMessage(e,t){console.error(`error: ${e}`,t)}_errorWithError(e){console.error(e)}_errorWithVariables(e,t){console.error(`error: ${e}`,t)}_errorWithErrorAndVariables(e,t,n){console.error(`error: ${e}`,t,n)}warn(e,t,n){return r.untangleOverload.call(this,"warn",e,t,n),!0}_warnMessage(e){console.warn(`warn: ${e}`)}_warnWithErrorAndMessage(e,t){console.warn(`warn: ${e}`,t)}_warnWithError(e){console.warn(e)}_warnWithVariables(e,t){console.warn(`warn: ${e}`,t)}_warnWithErrorAndVariables(e,t,n){console.warn(`warn: ${e}`,t,n)}info(e,t){return t?this._infoWithVariables(e,t):this._infoMessage(e),!0}_infoMessage(e){console.info(`info: ${e}`)}_infoWithVariables(e,t){console.info(`info: ${e}`,t)}debug(e,t){return t?this._debugWithVariables(e,t):this._debugMessage(e),!0}_debugMessage(e){console.debug(`debug: ${e}`)}_debugWithVariables(e,t){console.debug(`debug: ${e}`,t)}}t.default=i},"./node_modules/@amzn/kirup/dist/src/transports/insights/insights.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n("./node_modules/@amzn/kirup/dist/src/utils/errorOverload.js"),o=n("./node_modules/@amzn/kirup/dist/src/transports/base.js");class i extends o.TransportBase{constructor(e){super(e),this.config=e,this.instance=e.getInstance()}_getAttribution(e){return this.config.attribution&&this.config.attribution(e)||"Kirup"}count(e,t,n,r){return this.config.getInstance().enqueueEvent({message:`[COUNT] ${e}:${"object"!=typeof t?"number"!=typeof t?1:t:JSON.stringify(t)} ${n?JSON.stringify(n):""}`.trim(),stack:"NONE"},"INFO",this._getAttribution(r)),!0}_formatLog(e,t){return this.config.formatLog?this.config.formatLog(e,t).trim():e.trim()}fatal(e,t,n,o){return r.untangleOverload.call(this,"fatal",e,t,n,o),!0}_fatalMessage(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e,"fatal"),stack:"NONE"},"FATAL",this._getAttribution(t))}_fatalWithError(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e.message,"fatal"),stack:e.stack},"FATAL",this._getAttribution(t))}_fatalWithErrorAndMessage(e,t,n){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${t.toString()}`,"fatal"),stack:t.stack},"FATAL",this._getAttribution(n))}_fatalWithVariables(e,t,n){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${JSON.stringify(t)}`,"fatal"),stack:"NONE"},"FATAL",this._getAttribution(n))}_fatalWithErrorAndVariables(e,t,n,r){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${t.toString()} ${JSON.stringify(n)}`,"fatal"),stack:t.stack},"FATAL",this._getAttribution(r))}error(e,t,n,o){return r.untangleOverload.call(this,"error",e,t,n,o),!0}_errorMessage(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e,"error"),stack:"NONE"},"ERROR",this._getAttribution(t))}_errorWithError(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e.message,"error"),stack:e.stack},"ERROR",this._getAttribution(t))}_errorWithErrorAndMessage(e,t,n){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${t.toString()}`,"error"),stack:t.stack},"ERROR",this._getAttribution(n))}_errorWithVariables(e,t,n){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${JSON.stringify(t)}`,"error"),stack:"NONE"},"ERROR",this._getAttribution(n))}_errorWithErrorAndVariables(e,t,n,r){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${t.toString()} ${JSON.stringify(n)}`,"error"),stack:t.stack},"ERROR",this._getAttribution(r))}warn(e,t,n,o){return r.untangleOverload.call(this,"warn",e,t,n),!0}_warnMessage(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e,"warn"),stack:"NONE"},"WARN",this._getAttribution(t))}_warnWithErrorAndMessage(e,t,n){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${t.toString()}`,"warn"),stack:t.stack},"WARN",this._getAttribution(n))}_warnWithError(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e.message,"warn"),stack:e.stack},"WARN",this._getAttribution(t))}_warnWithVariables(e,t,n){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${JSON.stringify(t)}`,"warn"),stack:"NONE"},"WARN",this._getAttribution(n))}_warnWithErrorAndVariables(e,t,n,r){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${t.toString()} ${JSON.stringify(n)}`,"warn"),stack:t.stack},"WARN",this._getAttribution(r))}info(e,t,n){return t?this._infoWithVariables(e,t):this._infoMessage(e),!0}_infoMessage(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e,"info"),stack:"NONE"},"INFO",this._getAttribution(t))}_infoWithVariables(e,t,n){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${JSON.stringify(t)}`,"info"),stack:"NONE"},"INFO",this._getAttribution(n))}debug(){return!0}}t.default=i},"./node_modules/@amzn/kirup/dist/src/transports/minerva/minerva.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n("./node_modules/@amzn/minerva-ts-client/dist/index.js"),o=n("./node_modules/@amzn/kirup/dist/src/utils/errorOverload.js"),i=n("./node_modules/@amzn/kirup/dist/src/utils/store.js"),a=n("./node_modules/@amzn/kirup/dist/src/transports/base.js");class s extends a.TransportBase{constructor(e){var t,n;super(e),this._fixedValue=e=>Number(e.toFixed(4)),this.config=e,this.metrics=this._setMetrics(e.metrics);const o={deviceInfoProvider:e.deviceInfoProvider,kpiMetricsSchemaIdentifier:e.kpiMetricsSchemaIdentifier||{schemaId:"ckpi/2/00f30233",groupId:"aminerva"}},i={getConfig:e.getConfig},a={getAccessToken:e.getAccessToken?e.getAccessToken:()=>{}},s={isChildProfile:e.isChildProfile?e.isChildProfile:()=>!1},l={isUsageCollectionEnabled:e.isUsageCollectionEnabled?e.isUsageCollectionEnabled:()=>!0};this.client=new r.MinervaTSClient(i,a,s,l,o),null===(n=(t=this.config).getLogger)||void 0===n||n.call(t).then((e=>{this.logger=e,this.client.setLogger(e)}))}_setMetrics(e){const t=new Map;return e.forEach((e=>{t.set(e.name,{schemaId:e.schemaId,groupId:e.groupId})})),t}tryCatch(e){var t;try{return e()}catch(e){return null===(t=this.logger)||void 0===t||t.error(e.toString()),!1}}batch(e){var t,n,r,o,a,s;return 0===(0,i.getStoreSize)(e)?{newStore:e}:(e.debug=null===(t=e.debug)||void 0===t?void 0:t.filter((e=>this.tryCatch((()=>!this.debug(e.args[0],e.args[1]))))),e.info=null===(n=e.info)||void 0===n?void 0:n.filter((e=>this.tryCatch((()=>!this.info(e.args[0],e.args[1]))))),e.warn=null===(r=e.warn)||void 0===r?void 0:r.filter((e=>this.tryCatch((()=>!this.warn(e.args[0],e.args[1],e.args[2]))))),e.error=null===(o=e.error)||void 0===o?void 0:o.filter((e=>this.tryCatch((()=>!this.error(e.args[0],e.args[1],e.args[2]))))),e.fatal=null===(a=e.fatal)||void 0===a?void 0:a.filter((e=>this.tryCatch((()=>!this.fatal(e.args[0],e.args[1],e.args[2]))))),e.count=null===(s=e.count)||void 0===s?void 0:s.filter((e=>this.tryCatch((()=>!this.count(...e.args))))),{newStore:e,promiseSupplier:()=>this.client.forceUpload().then((()=>{}))})}count(e,t,n,r){return"number"==typeof t&&n?this._recordIntegerMetricEvent(e,t,n,r):"number"==typeof t?this._recordIntegerMetricEvent(e,t,{},r):t&&!n?this._recordIntegerMetricEvent(e,1,t,r):this._recordIntegerMetricEvent(e,1,{},r),!0}_recordIntegerMetricEvent(e,t,n,o){var i,a;const s=this.metrics.get(e);if(!s)throw new Error(`Minerva metric with name ${e} has not been configured.`);{if(null===(a=(i=this.config).filter)||void 0===a?void 0:a.call(i,e))return;const l=Object.entries(n).filter((([,e])=>"number"==typeof e)).reduce(((e,[t,n])=>(e[t]=n,e)),{});void 0===l.Count&&(l.Count=this._fixedValue(t));const c=Object.entries(n).filter((([,e])=>"string"==typeof e)).reduce(((e,[t,n])=>(e[t]={val:n,dataType:r.MinervaValueDataType.STRING},e)),{}),d=this.config.getDefaultDimensions(o);Object.keys(l).forEach((t=>{const n={keyValuePairs:{[e]:{val:this._fixedValue(l[t]),dataType:r.MinervaValueDataType.DOUBLE},Metric:{val:t,dataType:r.MinervaValueDataType.STRING},...c,...d},minervaMetricIdentifier:s};this.client.record(n)}))}}_formatLog(e,t){return this.config.formatLog?this.config.formatLog(e,t).trim():e.trim()}_recordStringMetricEvent(e,t,n=void 0,o={}){const i=this.metrics.get(e);if(!i)throw new Error(`Minerva metric with name ${e} has not been configured.`);{const a={},{logID:s,...l}=o,c={...l};Object.keys(c).forEach((e=>{a[e]={val:c[e],dataType:r.MinervaValueDataType.STRING}}));const d={keyValuePairs:{[e]:{val:this._formatLog(`${t}${n?` ${n.toString()}`:""}`,e),dataType:r.MinervaValueDataType.STRING},...a},minervaMetricIdentifier:i};this.client.record(d)}}fatal(e,t,n){return o.untangleOverload.call(this,"fatal",e,t,n),!0}_fatalMessage(e){this._recordStringMetricEvent("fatal",e)}_fatalWithError(e){this._recordStringMetricEvent("fatal","",e)}_fatalWithErrorAndMessage(e,t){this._recordStringMetricEvent("fatal",e,t)}_fatalWithVariables(e,t){this._recordStringMetricEvent("fatal",e,void 0,t)}_fatalWithErrorAndVariables(e,t,n){this._recordStringMetricEvent("fatal",e,t,n)}error(e,t,n){return o.untangleOverload.call(this,"error",e,t,n),!0}_errorMessage(e){this._recordStringMetricEvent("error",e)}_errorWithError(e){this._recordStringMetricEvent("error","",e)}_errorWithErrorAndMessage(e,t){this._recordStringMetricEvent("error",e,t)}_errorWithVariables(e,t){this._recordStringMetricEvent("error",e,void 0,t)}_errorWithErrorAndVariables(e,t,n){this._recordStringMetricEvent("error",e,t,n)}warn(e,t,n){return o.untangleOverload.call(this,"warn",e,t,n),!0}_warnMessage(e){this._recordStringMetricEvent("warn",e)}_warnWithError(e){this._recordStringMetricEvent("warn","",e)}_warnWithErrorAndMessage(e,t){this._recordStringMetricEvent("warn",e,t)}_warnWithVariables(e,t){this._recordStringMetricEvent("warn",e,void 0,t)}_warnWithErrorAndVariables(e,t,n){this._recordStringMetricEvent("warn",e,t,n)}info(e,t){return t?this._infoWithVariables(e,t):this._infoMessage(e),!0}_infoMessage(e){this._recordStringMetricEvent("info",e)}_infoWithVariables(e,t){this._recordStringMetricEvent("info",e,void 0,t)}debug(e,t){return t?this._debugWithVariables(e,t):this._debugMessage(e),!0}_debugMessage(e){this._recordStringMetricEvent("debug",e)}_debugWithVariables(e,t){this._recordStringMetricEvent("debug",e,void 0,t)}}t.default=s},"./node_modules/@amzn/kirup/dist/src/transports/rtla/rtla.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n("./node_modules/@amzn/kirup/dist/src/utils/errorOverload.js"),o=n("./node_modules/@amzn/kirup/dist/src/transports/base.js");class i extends o.TransportBase{constructor(e){super(e),this.config=e}_getAttribution(e){return this.config.attribution(e)||"Kirup"}count(){return!0}_logRTLA(e,t){"undefined"!=typeof window&&void 0!==window.ueLogError&&window.ueLogError(e,t)}_formatLog(e,t){return this.config.formatLog?this.config.formatLog(e,t).trim():e.trim()}fatal(e,t,n,o){return r.untangleOverload.call(this,"fatal",e,t,n,o),!0}_fatalMessage(e,t){this._logRTLA(new Error(e),{logLevel:"FATAL",attribution:this._getAttribution(t),message:this._formatLog(e,"fatal")})}_fatalWithError(e,t){this._logRTLA(e,{logLevel:"FATAL",attribution:this._getAttribution(t),message:this._formatLog(e.message,"fatal")})}_fatalWithErrorAndMessage(e,t,n){this._logRTLA(t,{logLevel:"FATAL",attribution:this._getAttribution(n),message:this._formatLog(e,"fatal")})}_fatalWithVariables(e,t,n){this._logRTLA(new Error(e),{logLevel:"FATAL",attribution:this._getAttribution(n),message:this._formatLog(`${e} ${JSON.stringify(t)}`,"fatal")})}_fatalWithErrorAndVariables(e,t,n,r){this._logRTLA(t,{logLevel:"FATAL",attribution:this._getAttribution(r),message:this._formatLog(`${e} ${t.toString()} ${JSON.stringify(n)}`,"fatal")})}error(e,t,n,o){return r.untangleOverload.call(this,"error",e,t,n,o),!0}_errorMessage(e,t){this._logRTLA(new Error(e),{logLevel:"ERROR",attribution:this._getAttribution(t),message:this._formatLog(e,"error")})}_errorWithError(e,t){this._logRTLA(e,{logLevel:"ERROR",attribution:this._getAttribution(t),message:this._formatLog(e.message,"error")})}_errorWithErrorAndMessage(e,t,n){this._logRTLA(t,{logLevel:"ERROR",attribution:this._getAttribution(n),message:this._formatLog(e,"error")})}_errorWithVariables(e,t,n){this._logRTLA(new Error(e),{logLevel:"ERROR",attribution:this._getAttribution(n),message:this._formatLog(`${e} ${JSON.stringify(t)}`,"error")})}_errorWithErrorAndVariables(e,t,n,r){this._logRTLA(t,{logLevel:"ERROR",attribution:this._getAttribution(r),message:this._formatLog(`${e} ${t.toString()} ${JSON.stringify(n)}`,"error")})}warn(e,t,n,o){return r.untangleOverload.call(this,"warn",e,t,n),!0}_warnMessage(e,t){this._logRTLA(new Error(e),{logLevel:"WARN",attribution:this._getAttribution(t),message:this._formatLog(e,"warn")})}_warnWithErrorAndMessage(e,t,n){this._logRTLA(t,{logLevel:"WARN",attribution:this._getAttribution(n),message:this._formatLog(e,"warn")})}_warnWithError(e,t){this._logRTLA(e,{logLevel:"WARN",attribution:this._getAttribution(t),message:this._formatLog(e.message,"warn")})}_warnWithVariables(e,t,n){this._logRTLA(new Error(e),{logLevel:"WARN",attribution:this._getAttribution(n),message:this._formatLog(`${e} ${JSON.stringify(t)}`,"warn")})}_warnWithErrorAndVariables(e,t,n,r){this._logRTLA(t,{logLevel:"WARN",attribution:this._getAttribution(r),message:this._formatLog(`${e} ${t.toString()} ${JSON.stringify(n)}`,"warn")})}info(){return!0}debug(){return!0}}t.default=i},"./node_modules/@amzn/kirup/dist/src/transports/transport.browser.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadTransportFromConfig=void 0;const r=n("./node_modules/@amzn/kirup/dist/src/@types/configuration.js"),o=n("./node_modules/@amzn/kirup/dist/src/transports/console/console.js"),i=n("./node_modules/@amzn/kirup/dist/src/transports/insights/insights.js"),a=n("./node_modules/@amzn/kirup/dist/src/transports/minerva/minerva.js"),s=n("./node_modules/@amzn/kirup/dist/src/transports/rtla/rtla.js");t.loadTransportFromConfig=function(e){let t;switch(e.name){case r.Transports.CONSOLE:t=new o.default(e);break;case r.Transports.MINERVA:if(!function(e){return void 0!==e.metrics&&void 0!==e.getConfig&&void 0!==e.deviceInfoProvider&&void 0!==e.getDefaultDimensions}(e))throw new Error("Minerva Transport is not configured correctly");t=new a.default(e);break;case r.Transports.INSIGHTS:if(!function(e){return void 0!==e.getInstance}(e))throw new Error("Insights Transport is not configured correctly");t=new i.default(e);break;case r.Transports.RTLA:if(!function(e){return void 0!==e.attribution}(e))throw new Error("RTLA Transport is not configured correctly");t=new s.default(e);break;default:throw new Error(`Unknown Transport name: ${e.name}`)}return t}},"./node_modules/@amzn/kirup/dist/src/transports/transport.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KirupTransport=void 0;t.KirupTransport=class{constructor(e,t){this.config=e,this.instance=t(e)}}},"./node_modules/@amzn/kirup/dist/src/utils/environment.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentEnvironment=void 0;const r=n("./node_modules/@amzn/kirup/dist/src/@types/configuration.js");function o(){return"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}function i(){return"undefined"!=typeof self&&"undefined"!=typeof ServiceWorkerGlobalScope&&self instanceof ServiceWorkerGlobalScope}function a(){return!1==("undefined"==typeof window&&"undefined"==typeof document)&&!1===i()&&!1===o()}t.getCurrentEnvironment=function(){return a()?r.Environment.DOM:i()?r.Environment.SERVICEWORKER:o()?r.Environment.WEBWORKER:r.Environment.NODE}},"./node_modules/@amzn/kirup/dist/src/utils/errorObject.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isErrorObject=t.objectToError=t.errorToObject=void 0,t.errorToObject=function(e){return{message:e.message,name:e.name,stack:e.stack}},t.objectToError=function(e){const t=new Error(e.message);return t.name=e.name,t.stack=e.stack,t},t.isErrorObject=function(e){return"object"==typeof e&&null!=e&&"string"==typeof e.name&&"string"==typeof e.message}},"./node_modules/@amzn/kirup/dist/src/utils/errorOverload.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.untangleOverload=void 0;const r=n("./node_modules/@amzn/kirup/dist/src/utils/variables.js");t.untangleOverload=function(e,t,n,o,i){let a="",s=null,l=null;"string"==typeof t?(a=t,(0,r.isVariables)(n)&&(l=n)):t instanceof Error&&(s=t,"string"==typeof n?(a=n,(0,r.isVariables)(o)&&(l=o)):(0,r.isVariables)(n)&&(l=n)),s&&l?this[`_${e}WithErrorAndVariables`](a,s,l,i):s&&a?this[`_${e}WithErrorAndMessage`](a,s,i):s?this[`_${e}WithError`](s,i):l?this[`_${e}WithVariables`](a,l,i):this[`_${e}Message`](a,i)}},"./node_modules/@amzn/kirup/dist/src/utils/promises.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fireAndForgetPromise=void 0;t.fireAndForgetPromise=(e,t=(()=>{}))=>{e().then((()=>{}),t)}},"./node_modules/@amzn/kirup/dist/src/utils/safePerformance.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.realPerformance=t.isSupportingPerformanceTiming=t.fakePerformance=t.NAVIGATION_MARKER=void 0;const r=n("./node_modules/@amzn/kirup/dist/src/@types/configuration.js"),o=n("./node_modules/@amzn/kirup/dist/src/utils/environment.js");t.NAVIGATION_MARKER="kirup-navigate";const i=e=>null;t.fakePerformance={getEntriesByName:()=>[],getEntriesByType:()=>[],mark:()=>{},measure:()=>{},getEntryDetailIfPresent:()=>{},legacyCalculateLatency:i,calculateLatency:i};function a(){var e,t,n,i,a,s,l,c;return(0,o.getCurrentEnvironment)()!==r.Environment.DOM||"performance"in window&&void 0!==window.performance.mark&&void 0!==(null===(i=null===(n=null===(t=(e=window.performance).getEntriesByType)||void 0===t?void 0:t.call(e,"navigation"))||void 0===n?void 0:n[0])||void 0===i?void 0:i.domInteractive)&&void 0!==(null===(c=null===(l=null===(s=(a=window.performance).getEntriesByType)||void 0===s?void 0:s.call(a,"navigation"))||void 0===l?void 0:l[0])||void 0===c?void 0:c.domComplete)}t.isSupportingPerformanceTiming=a,t.realPerformance={getEntriesByName:(...e)=>performance.getEntriesByName(...e),getEntriesByType:(...e)=>performance.getEntriesByType(...e),mark:(e,t)=>{performance.mark(e,{detail:t})},measure:(e,t,n)=>{performance.measure(e,t,n)},getEntryDetailIfPresent:e=>{const t=e.detail;return"object"==typeof t&&null!==t?t:void 0},legacyCalculateLatency:e=>{var n,r,o;const i=performance.getEntriesByType("navigation"),a=null===(n=null==i?void 0:i[0])||void 0===n?void 0:n.requestStart,s=performance.getEntriesByName(t.NAVIGATION_MARKER,"mark"),l=null===(r=null==s?void 0:s[0])||void 0===r?void 0:r.startTime,c=performance.getEntriesByName(e,"mark"),d=null===(o=null==c?void 0:c[0])||void 0===o?void 0:o.startTime;if(void 0!==d){return d-(void 0!==l?l:a||0)}throw new Error(`You're ending a marker (${e}) that is not started and undefined (legacy).`)},calculateLatency:e=>{var n,r,o,i,a;const s=performance.getEntriesByType("navigation"),l=null===(n=null==s?void 0:s[s.length-1])||void 0===n?void 0:n.startTime,c=performance.getEntriesByName(t.NAVIGATION_MARKER,"mark"),d=null===(r=null==c?void 0:c[c.length-1])||void 0===r?void 0:r.startTime,u=performance.getEntriesByName(e,"mark"),p="number"==typeof(null===(o=null==s?void 0:s[s.length-1])||void 0===o?void 0:o[e])?Number(null===(i=null==s?void 0:s[s.length-1])||void 0===i?void 0:i[e]):null===(a=null==u?void 0:u[u.length-1])||void 0===a?void 0:a.startTime;if(void 0!==p){return p-(void 0!==d?d:l||0)}throw new Error(`You're ending a marker (${e}) that is not started and undefined.`)}},t.default=a()?t.realPerformance:t.fakePerformance},"./node_modules/@amzn/kirup/dist/src/utils/store.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreSize=void 0;const r=n("./node_modules/@amzn/kirup/dist/src/@types/kirup.js");t.getStoreSize=e=>r.LogTypes.reduce(((t,n)=>{var r;return t+((null===(r=e[n])||void 0===r?void 0:r.length)||0)}),0)},"./node_modules/@amzn/kirup/dist/src/utils/variables.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isVariables=void 0,t.isVariables=function(e){return"object"==typeof e&&null!==e&&!(e instanceof Error)}},"./src/entrypoints/hydration/web-spa-root.ts":(e,t,n)=>{var r=n("./src/util/hydration/hydrateWidgets.tsx"),o=n("./src/util/types/availability.ts"),i=n("./node_modules/react/index.js"),a=n("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),s=n("./node_modules/@babel/runtime/helpers/esm/extends.js");function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function c(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,l(e,t)}const d=i.createContext(null);function u(e,t){var n=Object.create(null);return e&&i.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,i.isValidElement)(e)?t(e):e}(e)})),n}function p(e,t,n){return null!=n[t]?n[t]:e.props[t]}function g(e,t,n){var r=u(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,o=Object.create(null),i=[];for(var a in e)a in t?i.length&&(o[a]=i,i=[]):i.push(a);var s={};for(var l in t){if(o[l])for(r=0;r<o[l].length;r++){var c=o[l][r];s[o[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<i.length;r++)s[i[r]]=n(i[r]);return s}(t,r);return Object.keys(o).forEach((function(a){var s=o[a];if((0,i.isValidElement)(s)){var l=a in t,c=a in r,d=t[a],u=(0,i.isValidElement)(d)&&!d.props.in;!c||l&&!u?c||!l||u?c&&l&&(0,i.isValidElement)(d)&&(o[a]=(0,i.cloneElement)(s,{onExited:n.bind(null,s),in:d.props.in,exit:p(s,"exit",e),enter:p(s,"enter",e)})):o[a]=(0,i.cloneElement)(s,{in:!1}):o[a]=(0,i.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:p(s,"exit",e),enter:p(s,"enter",e)})}})),o}var m=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},h=function(e){function t(t,n){var r,o=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},r}c(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,o=t.children,a=t.handleExited;return{children:t.firstRender?(n=e,r=a,u(n.children,(function(e){return(0,i.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:p(e,"appear",n),enter:p(e,"enter",n),exit:p(e,"exit",n)})}))):g(e,o,a),firstRender:!1}},n.handleExited=function(e,t){var n=u(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,s.Z)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=(0,a.Z)(e,["component","childFactory"]),o=this.state.contextValue,s=m(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?i.createElement(d.Provider,{value:o},s):i.createElement(d.Provider,{value:o},i.createElement(t,r,s))},t}(i.Component);h.propTypes={},h.defaultProps={component:"div",childFactory:function(e){return e}};const v=h;function f(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var y=n("./node_modules/react-dom/index.js");const w=!1;var b=function(e){return e.scrollTop},E="unmounted",T="exited",S="entering",_="entered",R="exiting",A=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var o,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(o=T,r.appearStatus=S):o=_:o=t.unmountOnExit||t.mountOnEnter?E:T,r.state={status:o},r.nextCallback=null,r}c(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===E?{status:T}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==S&&n!==_&&(t=S):n!==S&&n!==_||(t=R)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===S){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:y.findDOMNode(this);n&&b(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===T&&this.setState({status:E})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,o=this.props.nodeRef?[r]:[y.findDOMNode(this),r],i=o[0],a=o[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||w?this.safeSetState({status:_},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,a),this.safeSetState({status:S},(function(){t.props.onEntering(i,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:_},(function(){t.props.onEntered(i,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:y.findDOMNode(this);t&&!w?(this.props.onExit(r),this.safeSetState({status:R},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:T},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:T},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:y.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=o[0],a=o[1];this.props.addEndListener(i,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===E)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,a.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return i.createElement(d.Provider,{value:null},"function"==typeof n?n(e,r):i.cloneElement(i.Children.only(n),r))},t}(i.Component);function C(){}A.contextType=d,A.propTypes={},A.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:C,onEntering:C,onEntered:C,onExit:C,onExiting:C,onExited:C},A.UNMOUNTED=E,A.EXITED=T,A.ENTERING=S,A.ENTERED=_,A.EXITING=R;const P=A;var D=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"==typeof n.className?n.className=f(n.className,r):n.setAttribute("class",f(n.className&&n.className.baseVal||"",r)));var n,r}))},I=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),o=r[0],i=r[1];t.removeClasses(o,"exit"),t.addClass(o,i?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),o=r[0],i=r[1]?"appear":"enter";t.addClass(o,i,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),o=r[0],i=r[1]?"appear":"enter";t.removeClasses(o,i),t.addClass(o,i,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,o=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:o,activeClassName:r?o+"-active":n[e+"Active"],doneClassName:r?o+"-done":n[e+"Done"]}},t}c(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],o=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&o&&(r+=" "+o),"active"===n&&e&&b(e),r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"==typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,o=n.active,i=n.done;this.appliedClasses[t]={},r&&D(e,r),o&&D(e,o),i&&D(e,i)},n.render=function(){var e=this.props,t=(e.classNames,(0,a.Z)(e,["classNames"]));return i.createElement(P,(0,s.Z)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(i.Component);I.defaultProps={classNames:""},I.propTypes={};const k=I,N=e=>{window.scrollTo({top:e,behavior:"instant"})},O=(0,i.createContext)(null),x=O.Provider,M=()=>{const e=(0,i.useContext)(O);if(null===e)throw new Error("Can't consume RouterStateContext outside of a provider");return(0,i.useSyncExternalStore)(e.subscribe,e.getState,e.getState)},L=()=>M().status,W=()=>{const{currentRoute:e,preparations:t,animation:n}=M();return e&&(n?i.createElement(v,{className:`${n.direction}`},i.createElement(k,{classNames:n.class,timeout:n.duration,key:e.path.toString()},i.createElement(e.component,{name:e.name,preparations:t}))):i.createElement(e.component,{name:e.name,preparations:t}))},V=e=>e.offsetTop+e.offsetHeight,j=({getResizingWrapper:e,paginate:t,setIsRestoringPaginatedScrollPosition:n,shouldAttemptPaginatedRestore:r=(()=>Promise.resolve(!0)),callbacks:o})=>{const{restoredScrollY:a,navigationType:s}=M(),l=(0,i.useRef)(!1),c=(0,i.useRef)(!1);return(0,i.useLayoutEffect)((()=>{if(null===a)return;var t;if(window.scrollY>0)return void(null==o||null===(t=o.onPageAlreadyScrolled)||void 0===t||t.call(o));const r=e();if(!r)return;const i=V(r);return a<=i?l.current=!0:"back"===s&&(l.current=!0,a>i&&(c.current=!0,n(!0))),()=>{window.history.scrollRestoration="auto",l.current=!1,c.current=!1}}),[]),(0,i.useEffect)((()=>{if(!l.current)return;const i=e(),s=a;var d;if(!c.current)return N(s),void(null==o||null===(d=o.onScrolledWithoutPaginating)||void 0===d||d.call(o,s));let u=!1;const p=()=>{u||(u=!0)};let g=!1;const m=()=>{g||(g=!0)};let h=!1;const v=()=>{var e,t;h&&(h=!1,null==o||null===(t=o.onUnmountInterruption)||void 0===t||t.call(o));window.removeEventListener("scroll",p),window.removeEventListener("resize",m),null===(e=window.screen.orientation)||void 0===e||e.removeEventListener("change",m),n(!1)};return r(s).then((e=>{var n,r;if(!e)return null==o||null===(r=o.onToldNotToAttemptPaginatedRestoreInterruption)||void 0===r||r.call(o),void v();const a=()=>{h=!0,t(d)};let l=1;const c=Date.now(),d=e=>{var t;if(h=!1,e)if(s<=V(i)){var n;N(s),null==o||null===(n=o.onSuccessfulPaginatedRestore)||void 0===n||n.call(o,s,l,Date.now()-c)}else if(u){var r;null==o||null===(r=o.onPageScrollInterruption)||void 0===r||r.call(o,Date.now()-c)}else{if(!g)return l++,void a();var d;null==o||null===(d=o.onPageResizeInterruption)||void 0===d||d.call(o,Date.now()-c)}else null==o||null===(t=o.onUnableToPaginateInterruption)||void 0===t||t.call(o);v()};window.addEventListener("scroll",p),window.addEventListener("resize",m),null===(n=window.screen.orientation)||void 0===n||n.addEventListener("change",m),a()})),v}),[]),i.createElement("div",{dangerouslySetInnerHTML:{__html:'<script>window.history.scrollRestoration = "manual";<\/script>'}})};var $;function F(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class B{static deriveNavigationType(e,t){const{origin:n,hash:r}=e,{origin:o,hash:i}=t,a=n!==o;let s=!1;if(!a&&r!==i){const n=new URL(e);n.hash="";const r=new URL(t);r.hash="",s=n.toString()===r.toString()}return{isCrossOrigin:a,isHashChange:s}}constructor(e,t,{userInitiated:n=!1,sourceElement:r=null,originalEvent:o,state:i,info:a,formData:s=null,onNoIntercept:l}){F(this,"_originalEvent",void 0),F(this,"_state",void 0),F(this,"_info",void 0),F(this,"_onNoIntercept",void 0),F(this,"_navigationType",void 0),F(this,"_sourceElement",void 0),F(this,"_userInitiated",void 0),F(this,"_destination",void 0),F(this,"_downloadRequest",void 0),F(this,"_formData",void 0),F(this,"_hashChange",void 0),F(this,"_canIntercept",void 0),F(this,"_committed",void 0),F(this,"_abortController",void 0),this._originalEvent=o,this._state=i,this._info=a,this._formData=s,this._onNoIntercept=l,this._navigationType=e,this._sourceElement=r,this._downloadRequest=r instanceof HTMLAnchorElement&&r.hasAttribute("download")?r.download:null,this._userInitiated=n;const c=new URL(window.location.href),d=new URL(t.url,c),{isCrossOrigin:u,isHashChange:p}=B.deriveNavigationType(c,d);this._canIntercept=!u,this._hashChange=p,this._destination={...t,sameDocument:t.sameDocument||p},this._committed=!1,this._abortController=new AbortController}get navigationType(){return this._navigationType}get userInitiated(){return this._userInitiated}get destination(){return this._destination}get downloadRequest(){return this._downloadRequest}get info(){return this._info}get formData(){return this._formData}get canIntercept(){return this._canIntercept}get hashChange(){return this._hashChange}get committed(){return this._committed}get sourceElement(){return this._sourceElement}commit(){!this._committed&&this.canIntercept&&("push"===this._navigationType?History.prototype.pushState.call(history,this._state||null,"",this._destination.url):"replace"===this._navigationType&&History.prototype.replaceState.call(history,this._state||null,"",this._destination.url)),this._committed=!0}intercept(e){var t;this.canIntercept&&(this.preventDefault(),e&&"immediate"!==e.commit||this.commit(),null==e||null===(t=e.handler)||void 0===t||t.call(e).catch((()=>{})))}preventDefault(){var e;null===(e=this._originalEvent)||void 0===e||e.preventDefault()}abort(e){this._abortController.abort(e)}onNoIntercept(){var e;null===(e=this._onNoIntercept)||void 0===e||e.call(this)}get signal(){return this._abortController.signal}}$=B,F(B,"create",((e,t,n={})=>new CustomEvent("fakeNavigate",{detail:new $(e,t,n)})));var U=n("./src/util/utils/promise.ts");const G=()=>"function"==typeof performance.getEntriesByType&&performance.getEntriesByType("navigation").map((e=>e.type)).includes("reload");function z(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const H=()=>{},q={onStart:H,onEnd:H},K={commit:"after-transition",timeout:6e4,animation:null,onStart:H,onEnd:H},J="__scroll_y",Y="__visit_time",Q=e=>({kind:"redirect",href:e});"undefined"!=typeof AbortSignal&&void 0===AbortSignal.timeout&&(AbortSignal.timeout=e=>{const t=new AbortController;return setTimeout((()=>t.abort(new Error("TimeoutError"))),e),t.signal});class Z{evict(){this.data.delete(this.data.keys().next().value)}constructor(e=Number.MAX_VALUE){this.capacity=e,z(this,"data",new Map)}get(e){return this.data.get(e)}set(e,t){this.data.set(e,t),this.data.size>this.capacity&&this.evict()}}const X=e=>!(0!==e.button||e.metaKey||e.altKey||e.ctrlKey||e.shiftKey),ee=e=>e.target&&e.target instanceof Element||!1,te=({navigationType:e,userInitiated:t,destination:{sameDocument:n}})=>"push"===e&&!t&&n,ne=e=>{var t;return"router_programmatic"===(null===(t=e.info)||void 0===t?void 0:t.type)},re=(e,t,n)=>!(!e.canIntercept||!ne(e))||!(["push","replace"].includes(e.navigationType)&&t&&!n(t))&&("reload"!==e.navigationType&&!(({navigationType:e,destination:{url:t}})=>"replace"===e&&t===window.location.href)(e)&&(!te(e)&&(!(({navigationType:e,userInitiated:t,destination:{sameDocument:n}})=>"replace"===e&&!t&&n)(e)&&(!(({navigationType:e,userInitiated:t,destination:{sameDocument:n}})=>!("push"!==e&&"replace"!==e||t||n))(e)&&(!!e.canIntercept&&(!e.hashChange&&(null===e.downloadRequest&&null===e.formData))))))),oe=(e,t,n,r,o,i)=>{var a;const s=r(n,e);var l;if(!s)return null==i||null===(l=i.onNoPathToMatch)||void 0===l||l.call(i),null;const c=o.get(s);var d;if(c)return null==i||null===(d=i.onPathMatchCacheHit)||void 0===d||d.call(i),c;for(const e of t){const t=Array.isArray(e.path)?e.path:[e.path];for(const n of t)if(n instanceof RegExp){const t=s.match(n);var u;if(t)return o.set(s,{route:e,match:t}),null==i||null===(u=i.onPathMatchCacheMiss)||void 0===u||u.call(i),{route:e,match:t}}else if(n===s){var p;return o.set(s,{route:e}),null==i||null===(p=i.onPathMatchCacheMiss)||void 0===p||p.call(i),{route:e}}}return null==i||null===(a=i.onNoRouteMatch)||void 0===a||a.call(i),null};var ie=n("./src/shared/Stores/context.ts"),ae=n("./src/shared/deviceProxy/PVClickstreamClient.ts"),se=n("./src/util/api/APIClient.ts");class le{constructor(e,t=Date.now()){this.millisUntilExpiration=e,this.startTimeMillis=t}hasExpired(){return this.getMillisRemaining()<1}getSecondsRemaining(){return this.getMillisRemaining()/1e3}getMillisRemaining(){return Math.max(0,this.millisUntilExpiration+(this.startTimeMillis-Date.now()))}createIntermediateDeadline(e){return new le(this.millisUntilExpiration-e,this.startTimeMillis)}}var ce=n("./src/util/api/util.ts");const de=e=>{const t=i.lazy(e);let n,r=!1;return Object.assign((e=>(r=!0,i.createElement(n||t,e))),{load:async()=>{if(!r){const{default:t}=await e();n=t}}})};var ue=n("./src/util/logger/kirup.ts");let pe=function(e){return e.SUCCESS="SUCCESS",e.ERROR="ERROR",e}({});var ge=n("./src/shared/Stores/global.ts");const me="navigation-bar",he={name:me,BodyComponent:de((()=>Promise.all([n.e(1216),n.e(6962)]).then(n.bind(n,"./src/apex/NavigationBar/Component.tsx")))),bodyComponentWrapper:i.createElement("header",{id:"pv-navigation-bar"}),getProps:void 0,criticality:o.C.OPTIONAL,useSessionScopedKey:()=>{var e,t;return null!==(e=null===(t=(0,ge.Lo)())||void 0===t?void 0:t.isRemasterEnabled)&&void 0!==e&&e}},ve="footer",fe={name:ve,BodyComponent:de((()=>n.e(349).then(n.bind(n,"./src/apex/Footer/Component.tsx")))),getProps:void 0,criticality:o.C.OPTIONAL},ye="cookie-banner",we={name:ye,BodyComponent:de((()=>n.e(5166).then(n.bind(n,"./src/apex/CookieBanner/Component.tsx")))),getProps:void 0,criticality:o.C.OPTIONAL},be="payment-state-msg",Ee={name:be,BodyComponent:de((()=>n.e(6634).then(n.bind(n,"./src/apex/PaymentStateMsg/Component.tsx")))),getProps:void 0,criticality:o.C.OPTIONAL},Te="deprecated-browsers-banner",Se={name:Te,BodyComponent:de((()=>n.e(6119).then(n.bind(n,"./src/apex/DeprecatedBrowsersBanner/Component.tsx")))),getProps:void 0,criticality:o.C.OPTIONAL},_e="language-notification",Re={name:_e,BodyComponent:de((()=>n.e(3666).then(n.bind(n,"./src/apex/LanguageNotification/Component.tsx")))),getProps:void 0,criticality:o.C.OPTIONAL},Ae="conditional-site-wide",Ce={name:Ae,BodyComponent:de((()=>Promise.all([n.e(1216),n.e(5963)]).then(n.bind(n,"./src/apex/ConditionalSiteWide/Component.tsx")))),getProps:void 0,criticality:o.C.OPTIONAL,useSessionScopedKey:()=>{var e,t;return null!==(e=null===(t=(0,ge.Lo)())||void 0===t?void 0:t.isRemasterEnabled)&&void 0!==e&&e}},Pe="detail-vod",De={name:Pe,BodyComponent:de((()=>Promise.all([n.e(1216),n.e(9874)]).then(n.bind(n,"./src/apex/DetailVod/Component.tsx")))),getProps:void 0,criticality:o.C.MANDATORY},Ie="detail-live",ke={name:Ie,BodyComponent:de((()=>Promise.all([n.e(1216),n.e(5103)]).then(n.bind(n,"./src/apex/DetailLive/Component.tsx")))),getProps:void 0,criticality:o.C.MANDATORY},Ne="detail-internal",Oe={name:Ne,BodyComponent:de((()=>n.e(1371).then(n.bind(n,"./src/apex/DetailInternal/Component.tsx")))),getProps:void 0,criticality:o.C.OPTIONAL},xe="landing-page",Me={name:xe,BodyComponent:de((()=>Promise.all([n.e(1216),n.e(2568)]).then(n.bind(n,"./src/apex/LandingPage/Component.tsx")))),getProps:void 0,criticality:o.C.MANDATORY},Le="browse",We={name:Le,BodyComponent:de((()=>Promise.all([n.e(1216),n.e(9763)]).then(n.bind(n,"./src/apex/Browse/Component.tsx")))),getProps:void 0,criticality:o.C.MANDATORY},Ve="categories",je={name:Ve,BodyComponent:de((()=>Promise.all([n.e(1216),n.e(2422)]).then(n.bind(n,"./src/apex/Categories/Component.tsx")))),getProps:void 0,criticality:o.C.MANDATORY},$e="genre",Fe={name:$e,BodyComponent:de((()=>Promise.all([n.e(1216),n.e(5770)]).then(n.bind(n,"./src/apex/Genre/Component.tsx")))),getProps:void 0,criticality:o.C.MANDATORY},Be="search",Ue={name:Be,BodyComponent:de((()=>Promise.all([n.e(1216),n.e(4925)]).then(n.bind(n,"./src/apex/Search/Component.tsx")))),getProps:void 0,criticality:o.C.MANDATORY},Ge="my-stuff",ze={name:Ge,BodyComponent:de((()=>Promise.all([n.e(1216),n.e(2054)]).then(n.bind(n,"./src/apex/MyStuff/Component.tsx")))),getProps:void 0,criticality:o.C.MANDATORY},He="person",qe={name:He,BodyComponent:de((()=>Promise.all([n.e(1216),n.e(3225)]).then(n.bind(n,"./src/apex/Person/Component.tsx")))),getProps:void 0,criticality:o.C.MANDATORY},Ke=i.createElement("h3",{style:{color:"white"}},"Error Component"),Je="demo",Ye={[me]:he,[ve]:fe,[ye]:we,[be]:Ee,[Te]:Se,[_e]:Re,[Ae]:Ce,[Pe]:De,[Ie]:ke,[xe]:Me,[Le]:We,[Ve]:je,[$e]:Fe,[Be]:Ue,[Ge]:ze,[He]:qe,[Je]:{name:Je,BodyComponent:de((()=>Promise.all([n.e(1216),n.e(9098)]).then(n.bind(n,"./src/apex/Demo/Component.tsx")))),getProps:void 0,ErrorComponent:Ke,criticality:o.C.MANDATORY},[Ne]:Oe};function Qe(e){return function(e){return e in Ye}(e)?Ye[e]:null}var Ze=n("./src/widgets/DVWebNodeWebSPARoot/data/strings.ts");const Xe="pageProps",et="pagination",tt=e=>parseInt(e.headers.get("expires")||"0"),nt=e=>tt(e)<Date.now(),rt=()=>"undefined"!=typeof window&&"caches"in window,ot=(e,t)=>`${e}__${t}`,it=async(e,t=window.location.href)=>{if(!rt())return!1;const n=await ht(t);return await Promise.all(n.map((e=>ut(et,e.url)))),ct(Xe,t,e,Date.now()+6e5)},at=async(e,t=window.location.href)=>{if(rt())return dt(et,ot(t,e))},st=async()=>!!rt()&&!(await Promise.all([pt(Xe),pt(et)])).includes(!1),lt=async()=>!!rt()&&!(await Promise.all([gt(Xe),gt(et)])).includes(!1),ct=async(e,t,n,r)=>{try{const o=await caches.open(e);return await o.put(t,new Response(JSON.stringify(n),{headers:{expires:`${r}`}})),!0}catch(e){return vt(e),!1}},dt=async(e,t)=>{try{const n=await caches.open(e),r=await n.match(t);if(r)return await(nt(r)?n.delete(t).then((()=>{})):r.json())}catch(e){vt(e)}},ut=async(e,t)=>{try{const n=await caches.open(e);return await n.delete(t)}catch(e){return vt(e),!1}},pt=async e=>{try{return await caches.delete(e)}catch(e){return vt(e),!1}},gt=async e=>{try{const t=await caches.open(e),n=await t.keys(),r=await Promise.all(n.map((e=>t.match(e.url)))),o=n.filter(((e,t)=>{const n=r[t];return n&&nt(n)}));return!(await Promise.all(o.map((e=>t.delete(e.url))))).includes(!1)}catch(e){return vt(e),!1}},mt=async(e,t)=>{try{const n=await caches.open(e),r=await n.match(t);if(r)return tt(r)}catch(e){vt(e)}},ht=async e=>{try{const t=await caches.open(et),n=await t.keys(),r=`${e}__`;return n.filter((e=>e.url.startsWith(r)))}catch(e){return vt(e),[]}},vt=e=>{};var ft=n("./src/widgets/DVWebNodeWebSPARoot/util/args.ts"),yt=n("./src/shared/inspector.ts"),wt=n("./src/widgets/DVWebNodeWebSPARoot/types/index.ts");const bt={name:"local-cache",canGetPage:({type:e,navigationType:t})=>"primary"===e&&"back"===t,getPage:async({url:e})=>{const t=await(async(e=window.location.href)=>{if(rt())return dt(Xe,e)})(e.href);return t?{...t,kind:"props",fromCache:"local"}:null}};var Et=n("./src/util/utils/swiftDevice.ts");let Tt=function(e){return e.desktop_macos="desktop_macos",e.desktop_windows="desktop_windows",e.mshop_ios="mshop_ios",e.mshop_android="mshop_android",e.mobile_ios="mobile_ios",e.mobile_android="mobile_android",e.tablet_ios="tablet_ios",e.tablet_android="tablet_android",e}({});const St=(e,t)=>{const n=new Et.AS(e,t);switch(n.getVariant()){case"mshop-ios":return Tt.mshop_ios;case"mshopDefault":case"mshopAndroid":return Tt.mshop_android;case"mobileAndroid":return Tt.mobile_android;case"mobileDefault":return Tt.mobile_ios;case"tabletDefault":return"IOS"==n.getOS()?Tt.tablet_ios:Tt.tablet_android;case"desktopOSX":return Tt.desktop_macos;default:return Tt.desktop_windows}};var _t=n("./src/util/utils/device.ts"),Rt=n("./src/util/utils/timeout.ts");const At=(e,t)=>fetch(e,{headers:{"Content-Type":"text/plain"},method:"GET",signal:null==t?void 0:t.signal});class Ct extends Error{constructor(e){super(e),this.name="PathConstructionError",Object.setPrototypeOf(this,Ct.prototype)}}class Pt extends Error{constructor(e){super(e),this.name="UnexpectedCDNResponse",Object.setPrototypeOf(this,Pt.prototype)}}const Dt="CDNFetchLatency",It=(e,t,n)=>(async e=>{var t,n,r;const o=(0,ie.getRequestContext)(),i=await Nt(o),a=await Ot(o.identityContext),s=(0,ge.Lo)(),l=(null==s?void 0:s.isRemasterEnabled)||!1,c={...i,targetPageId:null==e||null===(t=e.action)||void 0===t?void 0:t.targetPageId,targetPageType:null==e||null===(n=e.action)||void 0===n?void 0:n.targetPageType,cdnBaseUrl:null==e||null===(r=e.action)||void 0===r?void 0:r.cdnBaseUrl,profileAgeGroup:a,device:St(o.userAgent,o.appName),locale:o.locale,dtid:(0,_t.Iw)().deviceTypeId,webVersion:l?"2":"1",marketplaceId:o.marketplaceID},d=Object.keys(c).filter((e=>!c[e]));if(d.length>0)throw new Ct(`Failed to generate resiliency CDN path as ${d.toString()} was undefined or empty`);const{targetPageType:u,targetPageId:p,cdnBaseUrl:g,rlt:m,vtr:h,device:v,locale:f,webVersion:y,dtid:w,profileAgeGroup:b,marketplaceId:E}=c,T=`web/resiliency/${u}/${p}/${m}/${h}/${E}/${f}/${v}/${w}/${b}/${y}`.toLowerCase();if((0,ce.s7)(T))return`${g}${T}`;throw new Ct(`Invalid CDN path: ${T}`)})(e).then((e=>(ue.c.info(`Calling for Resiliency using CDN: ${e}`),ue.c.latency.start(Dt),(async(e,t,n,r)=>{const o=(0,Rt.b)([r],[t]),i=await(0,U.n6)(At(e,n),o,n);if(i.ok)try{const e=await i.json(),t=i.headers.get("Age"),n=t?parseInt(t):NaN;return{content:e,...isNaN(n)?{}:{age:n}}}catch(e){throw new ce.xU(`Failed to parse CDN response due to ${e}`)}else{const{status:e,statusText:t}=i;switch(e){case ce.SU.Forbidden:throw new ce.lY(t);case ce.SU.NotFound:throw new ce.dR(t);default:throw new ce.r6(t,e)}}})(e,t,n)))).then((({content:e,age:t})=>(ue.c.latency.end(Dt),kt(t),JSON.parse(e.response)))),kt=e=>{e&&e>1209600&&ue.c.info(`Possible stale resiliency configuration fetched. Data is ${e} seconds old.`)},Nt=async e=>({rlt:e.currentTerritory,vtr:e.recordTerritory}),Ot=async e=>{{const e=(0,ge.T7)();return null!=e&&e.isChild?"CHILD":"ADULT"}},xt=(e,t,n)=>{var r,o;const i=null==n||null===(r=n.resiliencyMetadata)||void 0===r?void 0:r.find((n=>{var r,o,i;return n.pageType===e&&((null===(r=n.pageId)||void 0===r?void 0:r.primaryPageId)===t||"*"===(null===(o=n.pageId)||void 0===o?void 0:o.primaryPageId)||!(null===(i=n.pageId)||void 0===i||null===(i=i.alias)||void 0===i||!i.includes(t)))}));return"*"===(null==i||null===(o=i.action)||void 0===o?void 0:o.targetPageId)&&(i.action.targetPageId=t),i};let Mt=function(e){return e.ENABLED="enabled",e.DISABLED="disabled",e}({}),Lt=function(e){return e.FALLBACK="fallback",e.CIRCUIT_BREAKER="circuitbreaker",e}({}),Wt=function(e){return e.TENTPOLE="tentpole",e.ALWAYSON="alwayson",e}({});var Vt=n("./src/util/utils/url.ts"),jt=n("./src/shared/WebSPA/index.ts"),$t=n("./src/util/utils/titleId.ts");const Ft={getPageIdentifiers:({path:e,queryParameters:t})=>{var n,r;let o,i,a;o=/.*?\/detail\/([^\/]*)\/([^\/]*)/.exec(e),o?(i=o[o.length-2],a=o[o.length-1]):(o=/.*?\/detail\/([^\/]*)/.exec(e),o&&(i=o[o.length-1]));const s=null===(n=t.gti)||void 0===n?void 0:n[0],l=null===(r=t.asin)||void 0===r?void 0:r[0],c=Bt([a,i,l,s]);return c?{pageType:"detail",pageId:c}:void 0},allowListedPathParams:["gti","asin"]},Bt=e=>{const t=e.map((e=>e?decodeURIComponent(e).replace("+"," ").trim():e)).filter((e=>e&&(0,$t.OH)(e))).map((e=>(0,$t.NE)(e)));return t.length>0?t[0]:void 0};var Ut=n("./src/util/api/swiftPageParams.ts");function Gt(){Gt=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,o){var i=new RegExp(e,r);return t.set(i,o||t.get(e)),zt(i,n.prototype)}function r(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){var o=r[n];if("number"==typeof o)t[n]=e[o];else{for(var i=0;void 0===e[o[i]]&&i+1<o.length;)i++;t[n]=e[o[i]]}return t}),Object.create(null))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zt(e,t)}(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=r(n,this);var o=n.indices;o&&(o.groups=r(o,this))}return n},n.prototype[Symbol.replace]=function(n,o){if("string"==typeof o){var i=t.get(this);return e[Symbol.replace].call(this,n,o.replace(/\$<([^>]+)>/g,(function(e,t){var n=i[t];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof o){var a=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(r(e,a)),o.apply(this,e)}))}return e[Symbol.replace].call(this,n,o)},Gt.apply(this,arguments)}function zt(e,t){return zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zt(e,t)}const Ht={getPageIdentifiers:({path:e,queryParameters:t})=>{const{rc:n,rcToken:r}=t;if(void 0===(null==n?void 0:n[0])||void 0===(null==r?void 0:r[0])){const n=(0,Ut.VF)(e,t);return{pageType:n.pageType,pageId:n.pageId}}},allowListedPathParams:["contentId","contentType","benefitId","merchId","plpId","node"]},qt={getPageIdentifiers:e=>{var t;const n=null===(t=Gt(/\/genre\/([^\/?\#]+)/,{genre:1}).exec(e.path))||void 0===t||null===(t=t.groups)||void 0===t?void 0:t.genre;return n?{pageType:"genre",pageId:n}:void 0},allowListedPathParams:[]},Kt={[jt.JB.DETAIL]:Ft,[jt.JB.LANDING_PAGE]:Ht,[jt.JB.CATEGORIES]:{getPageIdentifiers:()=>({pageType:"genre",pageId:"allGenres"}),allowListedPathParams:[]},[jt.JB.GENRE]:qt},Jt=e=>Kt[e];var Yt=n("./src/util/logger/logger.ts"),Qt=n("./src/shared/deviceProxy/DeviceProxy.ts"),Zt=n("./node_modules/zustand/esm/vanilla.mjs");function Xt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const en="acmConfiguration",tn="ACMClient";class nn{constructor(e,t,n,r){Xt(this,"configurationName",void 0),Xt(this,"cacheKey",void 0),Xt(this,"defaultTimeToRefreshInSeconds",void 0),Xt(this,"metricName",void 0),Xt(this,"getQueryParams",void 0),Xt(this,"logger",void 0),Xt(this,"acmClientConfigurationStore",void 0),Xt(this,"refreshTimeoutId",void 0),this.configurationName=e,this.cacheKey=`/primevideo/acm/${e.toLowerCase()}`,this.defaultTimeToRefreshInSeconds=t,this.metricName=n,this.getQueryParams=r,this.logger=new Yt.Oc("DVWebNode_ACMClient"),this.acmClientConfigurationStore=(0,Zt.M)((()=>({configuration:void 0})))}async _openCache(){if("undefined"!=typeof window&&"caches"in window)try{return await caches.open(en)}catch(e){ue.c.count(`${tn}OpenCacheError`),this.logger.error(`Failed to open ${en} cache`,e)}else ue.c.count(`${tn}OpenCacheUnsupported`)}async _getConfiguration(e){const t=`${tn}Get${this.metricName}`;ue.c.count(`${t}Attempt`);const n=await this._openCache();let r;try{r=await(null==n?void 0:n.match(this.cacheKey))}catch(e){ue.c.count(`${t}MatchCacheError`),this.logger.error(`Failed to match ${en} cache`,e)}if(r){let e;try{e=await r.text();const n=JSON.parse(e);return ue.c.count(`${t}Success`,{Source:"Cache"}),n}catch(n){var o;ue.c.count(`${t}Error`,{Source:"Cache"});const r=`${null===(o=e)||void 0===o?void 0:o.substring(0,500)}`;this.logger.error(`Failed to get ${this.cacheKey} from cache; Trimmed Configuration: ${r}`,n)}}else if(e)try{const n=await e();return ue.c.count(`${t}Success`,{Source:"Fetch"}),n}catch(e){ue.c.count(`${t}Error`,{Source:"Fetch"}),this.logger.error(`Failed to fetch ${this.cacheKey}`,e)}else ue.c.count(`${t}MissingInCacheNoFetch`)}async _getConfigurationURL(){const e=(0,ie.getRequestContext)(),t=`${(0,Qt.WA)(e)}/acm/GetConfiguration/${this.configurationName}`,n=new URLSearchParams(await this.getQueryParams()).toString();return n?`${t}?${n}`:t}_setConfigurationInStore(e){this.acmClientConfigurationStore.setState((()=>({configuration:e})))}getAsyncConfiguration(e){return this._getConfiguration(e?()=>this._refreshConfiguration(!1):void 0)}getConfiguration(){return this.acmClientConfigurationStore.getState().configuration}async updateConfigurationOnce(){await this._refreshConfiguration(!1)}async _refreshConfiguration(e,t){const n=`${tn}Refresh${this.metricName}`;let r,o,i;ue.c.count(`${n}Attempt`);try{r=await this._getConfigurationURL(),o=await fetch(r,{method:"GET",credentials:"include"})}catch(e){ue.c.count(`${n}Error`,{Cause:"FetchFailure"}),this.logger.error(`Failed to fetch from ${r}`,e)}if(o)try{i=await o.json(),ue.c.count(`${n}Success`)}catch(e){ue.c.count(`${n}Error`,{Cause:"JSONReadFailure"}),this.logger.error(`Failed to read as JSON from ${r}`,e)}const a=await this._openCache();if(i&&(this._setConfigurationInStore(i),a))try{await a.put(this.cacheKey,new Response(JSON.stringify(i))),ue.c.count(`${n}PutCacheSuccess`)}catch(e){ue.c.count(`${n}PutCacheError`),this.logger.error(`Failed to put ${this.cacheKey} to cache`,e)}if(a&&e){let r;if(r=i?i.timeToRefreshInSeconds:t,r){const t=1e3*r;this.refreshTimeoutId=setTimeout((()=>this._refreshConfiguration(e,r)),t),ue.c.count(`${n}SetTimeout`,{Duration:r})}}return i}stopConfigurationAutoRefresh(){void 0!==this.refreshTimeoutId&&clearTimeout(this.refreshTimeoutId)}subscribe(e){return this.acmClientConfigurationStore.subscribe(((t,n)=>e(t,n)))}async startConfigurationAutoUpdate(){const e=await this._getConfiguration();e&&this._setConfigurationInStore(e),await this._refreshConfiguration(!0,this.defaultTimeToRefreshInSeconds)}}const rn=new nn("WebClient",600,"WebClientConfiguration",(async()=>({deviceTypeID:(0,_t.Iw)().deviceTypeId,deviceID:"Web"}))),on=new nn("AppResiliency",600,"ResiliencyConfiguration",(async()=>{const e=rn.getConfiguration(),t=(0,ie.getRequestContext)();return{deviceTypeID:(0,_t.Iw)().deviceTypeId,deviceID:"Web",version:"v3",territory:t.currentTerritory.toLowerCase(),deviceGroup:"web",...e&&e.testGroups&&{testGroups:e.testGroups.join(",")}}})),an={name:"page-cdn",verboseLoggingEnabled:!0,canGetPage:({routeName:e,type:t,navigationType:n,url:r,serverConfig:o})=>{try{if(!ln())return!1;if(sn())return!1;const i=r.searchParams.get("forcePageCdn");if(gn(i))return!0;const a=Jt(e);if(!a)return!1;if(pn(t,n))return!0;const s=a.getPageIdentifiers({path:r.pathname,queryParameters:(0,Vt.DX)(r.searchParams)}),l=yn(null==o?void 0:o.resiliencyConfiguration);if(!s||!l)return!1;const c=xt(s.pageType,s.pageId,l);return(null==c?void 0:c.resiliencyStatus)===Mt.ENABLED&&(!!dn(t,c)||un(t,c))}catch(e){return ue.c.error(e,"Failure when calling for resiliency"),!1}},getPage:async({routeName:e,deadline:t,type:n,navigationType:r,url:o,abortController:i,serverConfig:a})=>{var s;const l=o.searchParams.get("forcePageCdn");if(gn(l)&&l!==n)throw new ce.r6("Forcing Fallback",500);const c=await wn(null==a?void 0:a.resiliencyConfiguration);if(!c)return hn(n,"NoResiliencyConfiguration");const d=Jt(e);if(!d)return hn(n,"PageNotSupportedForResiliency");const u=null==d?void 0:d.getPageIdentifiers({path:o.pathname,queryParameters:(0,Vt.DX)(o.searchParams)});if(!u)return hn(n,"NoPageParametersForResiliency");const p=xt(u.pageType,u.pageId,c);if(!p)return hn(n,"NoMatchingResiliencyEntry");if(p.resiliencyStatus!=Mt.ENABLED)return hn(n,"ResiliencyEntryDisabled");const g=mn(p),m=null===(s=p.action)||void 0===s?void 0:s.type,h=c.isTentpole?Wt.TENTPOLE:Wt.ALWAYSON;if(!m||!g||!h)return hn(n,"MissingResiliencyConfigurationFields");const v={TargetPageType:g,ActivationType:m,UxMode:h},f=pn(n,r);if(un(n,p)||f||"primary"==l){return vn(v,f?"SpaShellMode":"CircuitBreaker"),await cn(p,t,v,i,h,m).catch((e=>{throw bn(v,e),new Sn(`Failed to fetch resiliency on primary call due to ${e}`)}))}return dn(n,p)?(vn(v,"Unknown"),await cn(p,t,v,i,h,m).catch((e=>(bn(v,e),null)))):hn(n,"TriggerConditionsNotMet")}},sn=()=>{const e=rn.getConfiguration();return(null==e?void 0:e.contingencies.resiliencyDisabled)||!1},ln=()=>{const e=(0,ge.Lo)();return(null==e?void 0:e.isPageResiliencyLaunched)||!1},cn=async(e,t,n,r,o,i)=>It(e,t,r).then((e=>{var t;const r=Array.isArray(null==e?void 0:e.page)&&(null==e?void 0:e.page).find((e=>"dv-web-node/props/web-spa-root"===e.name)),a=null==r?void 0:r.assembly;if(!a)throw new Pt("Resiliency recovered props are undefined");if(null!==(t=(0,ge.T7)())&&void 0!==t&&t.isChild)try{a.metadata.globalStoreContent.profile.isChild=!0}catch(e){ue.c.error(e,"Unable to override Child Profile value during resiliency recovery")}return fn(n),{...a,kind:"props",fromCache:"cdn",_arbitraryPageRemoteData:{resiliencyData:{uxMode:o,activationType:i}}}})),dn=(e,t)=>{var n;return"fallback"===e&&(null==t||null===(n=t.action)||void 0===n?void 0:n.type)===Lt.FALLBACK},un=(e,t)=>{var n;return"primary"===e&&(null==t||null===(n=t.action)||void 0===n?void 0:n.type)===Lt.CIRCUIT_BREAKER},pn=(e,t)=>"primary"===e&&"init"===t,gn=e=>(0,ie.isInternal)()&&e,mn=e=>{var t;return"home"===(null===(t=e.action)||void 0===t?void 0:t.targetPageType)&&"detail"===e.pageType?"epa":null===(n=e.action)||void 0===n?void 0:n.targetPageType;var n},hn=(e,t)=>{if(En("ResiliencyExitedEarly",{Cause:t}),"primary"===e)throw new _n(`Failed to call resiliency in CircuitBreaker mode due to ${t}`);return ue.c.error(`Unable to trigger resiliency due to ${t}`),null},vn=(e,t)=>{En("ResiliencyAttempt",{...e,Cause:t})},fn=e=>{En("ResiliencySuccess",e)},yn=e=>on.getConfiguration(),wn=async e=>on.getAsyncConfiguration(!0),bn=(e,t)=>{switch(t.name){case"NotFoundError":case"ForbiddenError":En("ResiliencyCacheMiss",{TargetPageType:e.TargetPageType});break;case"PathConstructionError":En("ResiliencyFailure",{...e,Cause:t.name}),ue.c.error(t,"Failed to call resiliency CDN as URL could not be constructed");break;case"UnexpectedCDNResponse":case"JSONParseError":En("ResiliencyFailure",{...e,Cause:"UnexpectedCDNResponse"}),ue.c.error(t,"Failed to utilize resiliency CDN response");break;default:En("ResiliencyFailure",{...e,Cause:"Unknown"}),ue.c.error(t,"Failed during resiliency flow due to unexpected error")}},En=(e,t)=>{ue.c.count(e,t)};class Tn extends Error{constructor(e){super(e),this.name="RecoverableCDNError",Object.setPrototypeOf(this,Tn.prototype)}}class Sn extends Tn{constructor(e){super(e),this.name="RecoverableNotFoundError",Object.setPrototypeOf(this,Sn.prototype)}}class _n extends Tn{constructor(e){super(e),this.name="RecoverableResiliencyExitedError",Object.setPrototypeOf(this,_n.prototype)}}const Rn=e=>{var t;return(null===(t=e.searchParams.get("apexArgs"))||void 0===t||null===(t=t.split(","))||void 0===t||null===(t=t.find((e=>e.startsWith("demo-scenario:"))))||void 0===t||null===(t=t.split(":"))||void 0===t?void 0:t[1])||null},An=(e,t)=>new Promise(((n,r)=>{let o;const i=()=>{clearTimeout(o),r("Aborted")};o=setTimeout((()=>{t.removeEventListener("abort",i),n()}),e.getMillisRemaining()+5e3),t.addEventListener("abort",i)})),Cn={name:"demo",canGetPage:({routeName:e,url:t})=>{var n;return e===wt.JB.DEMO&&!(null===(n=Rn(t))||void 0===n||!n.startsWith("demo-page-remote-"))},getPage:async({type:e,url:t,deadline:n,abortController:r})=>{const o=Rn(t);if(null!=o&&o.includes("-fallback-")&&"fallback"!==e)throw new ce.r6("Forcing Fallback",500);if(null!=o&&o.includes("-primary-")&&"primary"!==e)throw new Error("Forcing Failure");if(null!=o&&o.includes("-primary-failure")&&"primary"===e)throw new Error("Demo Primary Failure");if(null!=o&&o.includes("-fallback-failure")&&"fallback"===e)throw new Error("Demo Fallback Failure");if(null!=o&&o.includes("-primary-miss")&&"primary"===e)return null;if(null!=o&&o.includes("-fallback-miss")&&"fallback"===e)return null;null!=o&&o.includes("-primary-timeout")&&"primary"===e&&await An(n,r.signal),null!=o&&o.includes("-fallback-timeout")&&"fallback"===e&&await An(n,r.signal);const i="fallback"===e?"cdn":"local";return{kind:"props",fromCache:i,body:[{args:{shouldDisplayScenarios:!0,...o?{"demo-scenario":o}:{}},name:"demo",status:pe.SUCCESS,props:{prop1:"GetProps success",pageHost:"demo",requestType:e,fromCache:i}}],siteWide:{bodyStart:[],bodyEnd:[]},config:{},appArgs:{context:(0,ie.getRequestContext)()},metadata:{pageType:"DVWebPlatform",subPageType:"DemoWebSPA",pageTitle:"Web SPA Demo Page",globalStoreContent:(0,ge.zJ)()},baseArgs:{}}}},Pn=[an,bt,{name:"page-host",canGetPage:({type:e,reason:t})=>"primary"===e||"fallback"===e&&t instanceof Tn,getPage:async({api:e,url:t,deadline:n,abortController:r,requestType:o})=>{try{const i=new URL(t);i.searchParams.set("dvWebSPAClientVersion",Ze.RF);const{response:a,status:s}=await e.callWithHeaders(i.href,{headers:{"x-requested-with":"WebSPA",Accept:"application/json",...o&&{"x-purpose":o}},abortController:r,deadline:n,redirect:"error"});if(s===ce.Yh)return Q(t.href);if("string"==typeof a.redirect)return Q(a.redirect);const l=Array.isArray(a.page)&&a.page.find((e=>"dv-web-node/props/web-spa-root"===e.name));return{kind:"props",fromCache:null,...(null==l?void 0:l.assembly)||{}}}catch(e){if(e instanceof U.uM)throw e;if(e instanceof ce.yj)return Q(t.href);if(e instanceof ce.lY)return Q(t.href);if(e instanceof ce.xU)return Q(t.href);if(e instanceof ce.dR)return Q(t.href);throw ce.r6,e}}}],Dn=(e,t,n,r,o)=>{ue.c.count("WebSpaPageRemoteFailure",{RemoteName:e,RequestType:t,RouteName:n,NavigationType:o||"unknown",Reason:r instanceof Error?r.name:"unknown"})},In=async(e,t)=>{const{type:n,navigationType:r,url:o,routeName:i,serverConfig:a,reason:s}=e;let l=null;for(const g of t||(e=>e===wt.JB.DEMO?[Cn,...Pn]:Pn)(i))if(g.canGetPage({type:n,navigationType:r,url:o,routeName:i,serverConfig:a,reason:s}))try{if(l=await g.getPage(e),null!==l){g.verboseLoggingEnabled&&(c=g.name,d=n,u=i,p=r,ue.c.count("WebSpaPageRemoteSuccess",{RemoteName:c,RequestType:d,RouteName:u,NavigationType:p||"unknown"}));break}}catch(e){throw Dn(g.name,n,i,e,r),e._pageRemoteAttribution=g.name,e}var c,d,u,p;return l},kn=e=>async({url:t,signal:n,commit:r,timeout:o,requestType:i,navigationType:a})=>{var s;ue.c.latency.navigate(a);const l=new se.l,c=new le(o).createIntermediateDeadline(500),d=new AbortController;n.addEventListener("abort",(()=>d.abort()));const u=await(async(e,t,n,r,o,i,a)=>{let s=null;try{s=await In({type:"primary",api:e,url:t,routeName:n,deadline:r,abortController:o,navigationType:a,requestType:i})}catch(l){if((l instanceof ce.r6&&l.responseClass===ce.Jf.SERVER_ERROR||l instanceof Tn)&&(s=await In({type:"fallback",api:e,url:t,routeName:n,deadline:r,abortController:o,navigationType:a,requestType:i,reason:l})),null==s)throw l}return s})(l,t,e,c,d,i,a);if(!u)throw new Error("Received no page from configured page remotes");if("redirect"===u.kind)return u;if(!u.body)throw new Error("Received page with no body");const{kind:p,...g}=u;return null!==(s=g.config)&&void 0!==s&&s.forceLocationUpdate?Q(g.config.forceLocationUpdate):(await(async(e,t,n,r)=>{const{fromCache:o,body:i,siteWide:a,metadata:s,appArgs:l,debugs:c}=e,{context:d}=(0,ft.p)(l||{});if("after-transition"===n&&await Promise.allSettled([...i,...(null==a?void 0:a.bodyStart)||[],...(null==a?void 0:a.bodyEnd)||[]].map((e=>{const t=Qe(e.name);return null==t||"object"!=typeof(n=t.BodyComponent)&&"function"!=typeof n||!("load"in n)||"function"!=typeof n.load?Promise.resolve():t.BodyComponent.load();var n}))),d){const t=(0,ie.getRequestContext)();(0,ie.updateRequestContext)(d),(0,ge._3)({...e.metadata.globalStoreContent,requestContext:d}),t.identityContext!==d.identityContext&&(0,U.SD)(st)}if(o||(0,U.SD)((()=>it({body:i,siteWide:a,metadata:s,appArgs:l,debugs:c}))),o)try{(0,ae.U)({homeRegion:(0,ge.zW)()}).navigation({pType:s.pageType,sPageType:s.subPageType,pageTypeId:s.pageTypeId})}catch(e){const t="Failed logging WebSPA page navigation to clickstream";e instanceof Error?ue.c.warn(e,t):ue.c.warn(t)}const{pageType:u,subPageType:p,pageTypeId:g,pageTitle:m}=s||{};window.DVWebNode.pageType=u||"ATVUnknown",window.DVWebNode.subPageType=p||"ATVUnknown",window.DVWebNode.pageTypeId=g;const h=m||Ze.DM;setTimeout((()=>{document.title=h})),window[yt.Kt]&&window.dispatchEvent(new CustomEvent(yt.R7,{detail:{props:e,navigationType:r,url:t.href}}))})(g,t,r,a),(e=>{const{fromCache:t,body:n,siteWide:r,config:o,metadata:i,appArgs:a,_arbitraryPageRemoteData:s}=e,l=(null==r?void 0:r.bodyStart)||[],c=(null==r?void 0:r.bodyEnd)||[],{baseArgs:d}=(0,ft.p)(a||{});let u;return t||(u={isMatchedRouteNavigatable:o&&yr(o)}),((e,t)=>({kind:"route",preparations:e,opts:t}))({baseArgs:d,body:n,siteWide:{bodyStart:l,bodyEnd:c},fromCache:t,metadata:i,_arbitraryPageRemoteData:s},u)})(g))};var Nn=n("./node_modules/classnames/index.js"),On=n.n(Nn),xn=n("./src/util/wrappers/ArgsContext.tsx"),Mn=n("./src/util/wrappers/util.tsx"),Ln=n("./src/shared/WebSPA/Context.tsx"),Wn=n("./node_modules/@amzn/dvui/dist/Fable/components/Button/index.js");const Vn="sRqSzS",jn="E9d4h0",$n="xToQ6M";var Fn=n("./src/util/api/WPSClient.ts");const Bn=new(n("./src/util/utils/cache.ts").Ct)({ttl:21600,limit:12550,jitter:7200}),Un=(e,t)=>`${e}-${t}`,Gn={DV_WEB_ERROR_GENERIC_TITLE:"That shouldn't have happened.",DV_WEB_ERROR_GENERIC_DESCRIPTION:"It looks like something went wrong on our side. Let's find you a great video to watch instead.",DV_WEB_ERROR_ACTION:"Go to Prime Video home",DV_WEB_ERROR_404_TITLE:"It's not here.",DV_WEB_ERROR_404_DESCRIPTION:"There is nothing at the web address you've entered. Let's find you a great video to watch instead."};var zn=n("./src/util/utils/strings.ts"),Hn=n("./node_modules/@amzn/dvui/dist/Fable/components/Spinner/index.js");const qn=()=>{const[e,t]=i.useState((e=>{const t=Object.keys(e),n=(0,ie.getRequestContext)(),r=t.reduce(((e,t)=>{const r=Bn.get(Un(n.locale,t));return r?e.cache[t]=r:e.call.push(t),e}),{cache:{},call:[]});return 0===r.call.length?r.cache:null})(Gn));return i.useEffect((()=>{(async()=>{const e=await((e,t=new Fn.eZ,n)=>(Bn.onLimitReached||(Bn.onLimitReached=()=>null==n?void 0:n.count("GetStringsCacheLimitReached",1,!1)),new Promise((async r=>{const o=(0,ie.getRequestContext)();try{const i=Object.keys(e),a=i.reduce(((e,t)=>{const n=Bn.get(Un(o.locale,t));return n?e.cache[t]=n:e.call.push(t),e}),{cache:{},call:[]});if(null==n||n.count("GetStringsCacheHit",i.length-a.call.length,!1),null==n||n.count("GetStringsNetworkHit",a.call.length,!1),0===a.call.length)r(a.cache);else{const e=30,n=[];for(let r=0,i=a.call.length;r<i;r+=e){const i=a.call.slice(r,r+e);n.push(t.GetStrings({ids:i,context:o}))}const i=await Promise.all(n);r(Object.assign(a.cache,...i.map((e=>(Object.keys(e.results).forEach((t=>Bn.put(Un(o.locale,t),e.results[t]))),e.results)))))}}catch(t){null==n||n.error(t,"Call GetStrings Failed"),r(e)}}))))(Gn);t(e)})()}),[]),i.createElement("section",{className:Vn,"data-automation-id":"wspa-error","data-testid":"wspa-error"},null===e&&i.createElement(Hn.Spinner,null),null!==e&&i.createElement(i.Fragment,null,i.createElement("h2",{className:jn},e.DV_WEB_ERROR_GENERIC_TITLE),i.createElement("p",{className:$n},e.DV_WEB_ERROR_GENERIC_DESCRIPTION),i.createElement(Wn.PrimaryLinkButton,{href:"/gp/video/storefront/ref=atv_wspa_error"},(0,zn.VJ)(e.DV_WEB_ERROR_ACTION,{brand:"Prime Video"}))))},Kn=({name:e})=>null;var Jn=n("./src/util/logger/minerva.ts"),Yn=n("./src/util/hydration/widgetAndApexFrameworkErrorBoundary.tsx"),Qn=n("./node_modules/@amzn/dvui/dist/helpers/provideContext.js"),Zn=n("./src/util/performance/elementTiming.ts"),Xn=n("./src/util/performance/performanceMetricVersion.ts");const er=e=>(t,n)=>t.getEntries().forEach((t=>{var r;if(t.element&&null!==(r=t.identifier)&&void 0!==r&&r.includes(Zn.c.atfVisible)&&(t.renderTime?e.maxRenderTime=Math.max(e.maxRenderTime,t.renderTime):t.loadTime&&(e.fallbackToLoadTime=!0,e.maxRenderTime=Math.max(e.maxRenderTime,t.loadTime)),e.monitoredElements++,e.monitoredElements===e.targetNumberOfElements)){const t=document.querySelectorAll(`[elementtiming~="${Zn.c.atfVisible}"]`);t.length===e.targetNumberOfElements?(ue.c.latency.timeToX("ATFVisibleElementTiming",{ResourceLoadMetric:e.fallbackToLoadTime?"LoadTime":"RenderTime"},"2024-04-15"),n.disconnect()):e.targetNumberOfElements=t.length}})),tr=()=>{var e;const t=[];if("PerformanceObserver"in window&&null!==(e=PerformanceObserver)&&void 0!==e&&null!==(e=e.supportedEntryTypes)&&void 0!==e&&e.includes("long-animation-frame")){const e={longAnimationFrameCount:0},r=new PerformanceObserver((n=e,e=>{e.getEntries().forEach((e=>{void 0!==e.blockingDuration&&e.blockingDuration>1e3&&(ue.c.count("LongAnimationFrame",e.blockingDuration,{Version:Xn.h["2024-04-15"]}),n.longAnimationFrameCount++)}))}));r.observe({type:"long-animation-frame",buffered:!1}),t.push((()=>{ue.c.count("LongAnimationFramesPerRoute",e.longAnimationFrameCount,{Version:Xn.h["2024-04-15"]})})),t.push((()=>r.disconnect()))}var n;return()=>t.forEach((e=>e()))},nr=(0,i.createContext)(void 0),rr=({children:e,arbitraryPageRemoteData:t,arbitraryServerPageRemoteData:n})=>i.createElement(nr.Provider,{value:n||t},e),or=({apex:e,props:t})=>{const n=i.createElement(e.BodyComponent,t),r=i.useMemo((()=>{if(e.bodyComponentWrapper)return i.cloneElement(e.bodyComponentWrapper,{className:On()((0,Mn.VS)(e.name),e.bodyComponentWrapper.props.className),"data-apex":e.name},n)}),[e.bodyComponentWrapper,n]);return r||i.createElement("div",{className:(0,Mn.VS)(e.name),"data-apex":e.name},n)},ir=({apex:e,props:t,baseArgs:n,apexFailureState:r,_arbitraryPageRemoteData:a})=>i.createElement(Yn.Z,{onUncaughtException:(t,n)=>{var i;null===(i=e.onUncaughtException)||void 0===i||i.call(e,t,n),r.setShowGlobalErrorPage(e.criticality===o.C.MANDATORY)},ErrorComponent:e.ErrorComponent,attribution:`apex_${e.name}`,criticality:e.criticality,failureState:r},i.createElement(i.Suspense,{fallback:i.createElement(Kn,{name:e.name})},i.createElement(rr,{arbitraryPageRemoteData:a,arbitraryServerPageRemoteData:t._arbitraryServerPageRemoteData},i.createElement(xn.Mq,{value:{...n,...t.args}},i.createElement(or,{apex:e,props:t.props}))))),ar=(e,t,n)=>{var r;const o=`${e.name}_${n}`,i=null===(r=e.useSessionScopedKey)||void 0===r?void 0:r.call(e,t.props);let a;return a=i?!0===i?(0,Ze.wJ)(o):(0,Ze.wJ)(`${o}_${i}`):(0,Ze.qh)(o),a},sr=({body:e,siteWide:t})=>{let n=!1;const r=new Map;return{apexes:[...t.bodyStart,...e,...t.bodyEnd].reduce(((e,t)=>{const i=Qe(t.name);if(!i)return e;if(t.status===pe.SUCCESS)e.push({props:t,apex:i});else{const a=ar(i,t,e.length),s=i.criticality;s&&r.set(a,s),s===o.C.MANDATORY&&(n=!0),e.push({props:t,apex:i})}return e}),[]),getPropsGlobalErrorPage:n,failures:r}},lr=i.memo((({apexes:e,failures:t,showGlobalErrorPage:n,setShowGlobalErrorPage:r,baseArgs:a,getPropsGlobalErrorPage:s,_arbitraryPageRemoteData:l})=>n?i.createElement(qn,null):i.createElement(i.Fragment,null,e.map((({apex:e,props:n},c)=>{const d=ar(e,n,c);return t.get(d)===o.C.OPTIONAL?e.ErrorComponent?(0,i.cloneElement)(e.ErrorComponent,{apexKey:d}):null:t.get(d)===o.C.MANDATORY?(r(!0),null):i.createElement(ir,{key:d,apex:e,props:n,baseArgs:a,apexFailureState:{failure:void 0!==t.get(d),setShowGlobalErrorPage:r,getPropsGlobalErrorPage:s},_arbitraryPageRemoteData:l})}))))),cr=({preparations:{baseArgs:e,body:t,siteWide:n,_arbitraryPageRemoteData:r},name:o})=>{const a=L(),s="failure"===a||"timeout"===a,{siteWideWeblabs:l}=(0,xn.G4)(),{apexes:c,getPropsGlobalErrorPage:d,failures:u}=(0,i.useMemo)((()=>sr({body:t,siteWide:n})),[t,n]),[p,g]=(0,i.useState)(d||s),m=(0,Ln.CU)(),h=(0,Ze.qh)("route"),v=(0,i.useMemo)((()=>{return e=o,{onScrolledWithoutPaginating:t=>{(0,Jn.G)("WebSpaScrollOnScrolledWithoutPaginating",{Scope:e,Y:t})},onPageAlreadyScrolled:()=>{(0,Jn.G)("WebSpaScrollOnPageAlreadyScrolled",{Scope:e})},onPageScrollInterruption:t=>{(0,Jn.G)("WebSpaScrollOnPageScrollInterruption",{Scope:e,Duration:t})},onPageResizeInterruption:t=>{(0,Jn.G)("WebSpaScrollOnPageResizeInterruption",{Scope:e,Duration:t})},onUnmountInterruption:()=>{(0,Jn.G)("WebSpaScrollOnUnmountInterruption",{Scope:e})},onToldNotToAttemptPaginatedRestoreInterruption:()=>{(0,Jn.G)("WebSpaScrollOnToldNotToAttemptPaginatedRestoreInterruption",{Scope:e})},onUnableToPaginateInterruption:()=>{(0,Jn.G)("WebSpaScrollOnUnableToPaginateInterruption",{Scope:e})},onSuccessfulPaginatedRestore:(t,n,r)=>{(0,Jn.G)("WebSpaScrollOnSuccessfulPaginatedRestore",{Scope:e,Y:t,Paginations:n,Duration:r})}};var e}),[o]);(0,i.useEffect)((()=>{("stable"===a&&p||s)&&g(d||s)}),[a,d]);const[f,y]=(0,i.useState)(!1);(0,i.useEffect)((()=>{window.history.scrollRestoration="auto"}),[]),(0,i.useEffect)((()=>{"loading"===a&&(y(!0),window.history.scrollRestoration="manual")}),[a]),(0,i.useEffect)((()=>{const e=(()=>{var e;const t=[];if(ue.c.latency.timeToX("ReactMounted",void 0,Xn.h["2024-04-15"]),"complete"===document.readyState)ue.c.latency.timeToInteractive(void 0,Xn.h["2024-04-15"]);else{const e=()=>ue.c.latency.timeToInteractive(void 0,Xn.h["2024-04-15"]);window.addEventListener("load",e),t.push((()=>window.removeEventListener("load",e)))}if("PerformanceObserver"in window&&null!==(e=PerformanceObserver)&&void 0!==e&&null!==(e=e.supportedEntryTypes)&&void 0!==e&&e.includes("element")){const e=document.querySelectorAll(`[elementtiming~="${Zn.c.atfVisible}"]`).length;if(e){const n=new PerformanceObserver(er({targetNumberOfElements:e,monitoredElements:0,maxRenderTime:0,fallbackToLoadTime:!1}));n.observe({type:"element",buffered:!0}),ue.c.count("ATFVisibleElementTimingExpected",{Version:Xn.h["2024-04-15"]}),t.push((()=>n.disconnect()))}}return()=>t.forEach((e=>e()))})(),t=tr();return()=>{e(),t()}}),[h]);const w=i.useMemo((()=>(0,Qn.provideDvuiFeatureStoreContext)(lr,{weblabs:l})),[l]);return i.createElement(i.Fragment,null,i.createElement(w,{apexes:c,getPropsGlobalErrorPage:d,failures:u,baseArgs:e,setShowGlobalErrorPage:g,showGlobalErrorPage:p,_arbitraryPageRemoteData:r}),f&&c.length>0?i.createElement(j,{key:h,getResizingWrapper:jt.GB,shouldAttemptPaginatedRestore:()=>(async(e=window.location.href)=>{if(!rt())return!1;const t=await mt(Xe,e);if(!t||t-Date.now()<3e4)return!1;const n=await ht(e);if(0===n.length)return!1;const r=await mt(et,n[0].url);return void 0!==r&&r-Date.now()>=3e4})(),setIsRestoringPaginatedScrollPosition:e=>null==m?void 0:m.setIsRestoringPaginatedScrollPosition(e),paginate:e=>null==m?void 0:m.callScrollRestorationPaginator(e,1e4),callbacks:v}):null)};var dr=n("./src/shared/Explore/ClientImpressions/ImpressionTracker.tsx");const ur=e=>({prepare:kn(e.name),component:cr,transitionFrom:{onStart(){dr.F.onPageHide()}},...e}),pr=[ur({name:wt.JB.DEMO,path:new RegExp("^/internal/demo/")}),ur({name:wt.JB.DETAIL,path:new RegExp("^/detail(?:/|$)")}),ur({name:wt.JB.LANDING_PAGE,path:new RegExp("^/(?:$|(storefront|tv|movie|kids|store|livetv|tournament|channel|collection|partner|sports|prime|addons)(?:/|$))")}),ur({name:wt.JB.BROWSE,path:new RegExp("^/browse(?:/|$)")}),ur({name:wt.JB.CATEGORIES,path:new RegExp("^/categories(?:/|$)")}),ur({name:wt.JB.GENRE,path:new RegExp("^/genre(?:/|$)")}),ur({name:wt.JB.SEARCH,path:new RegExp("^/search(?:/|$)")}),ur({name:wt.JB.MY_STUFF_WATCHLIST,path:new RegExp("^/mystuff/watchlist(?:/|$)")}),ur({name:wt.JB.MY_STUFF_LIBRARY,path:new RegExp("^/mystuff/library(?:/|$)")}),ur({name:wt.JB.MY_STUFF,path:new RegExp("^/mystuff(?:/|$)")}),ur({name:wt.JB.PERSON,path:new RegExp("^/(?:prime-video/actor|person)/")})];var gr=n("./src/shared/player/integration/playerStatus.ts");const mr=new RegExp("^(?:/-/[^/?]+)?(?:/region/[^/?]+)?(?:/(?:g|h)p/video)?((?:/[^/?]+)*?)(?:/ref_?=[^/?]+)?(?:/(?:\\d{3}-\\d{7}-\\d{7}|\\d{4}-\\d{7}-\\d{6}))?/?$"),hr=/\/(?:(?:b(?:\/|$))|(?:(?:gp|s)\/browse))/,vr=/\/(?:d|dp|gp\/product|gp\/mobile\/udp)\//,fr=(e,t)=>{(0,Jn.G)("WebSpaRouterRouteNotNavigatable",{Route:e.name,Reason:t,ClientVersion:Ze.RF})},yr=e=>(t,n,r)=>{if(e.csnDenyList){const r=t=>{var n;return null===(n=e.csnDenyList)||void 0===n?void 0:n.some((e=>t.includes(wt.lp[e])))},o=wt.wG[t.name],i=n?wt.wG[n.name]:[];if(r(o))return fr(t,"ToRouteDenied"),!1;if(r(i))return fr(t,"FromRouteDenied"),!1}if("number"==typeof e.clientTTLMins&&e.clientTTLMins>-1){if((e=>{var t,n,r;const o=60*e*1e3,i=null===(t=(n=performance).getEntriesByType)||void 0===t?void 0:t.call(n,"navigation");return((null==i||null===(r=i[0])||void 0===r?void 0:r.startTime)||performance.timing.requestStart)+o})(e.clientTTLMins)<Date.now())return fr(t,"TTL"),!1}return!((0,gr.M)()&&!ne(r))||(fr(t,"PlayerOpen"),!1)},wr=(e,t,n)=>{const r=`${e} route=${t.name}`;n?ue.c.fatal(n,r):ue.c.fatal(r),(0,Jn.G)(e,{Route:t.name,ClientVersion:Ze.RF})};let br=0;const Er={onNoRouteMatch:()=>{0},onPrepareTimeout:e=>{wr("WebSpaRouterPrepareTimeout",e)},onAbort:e=>{(e=>{(0,Jn.G)("WebSpaRouterAbort",{Route:e.name,ClientVersion:Ze.RF})})(e)},onPrepareFailure:(e,t)=>{wr("WebSpaRouterPrepareFailure",e,t)},onNavigateFailure:(e,t)=>{wr("WebSpaRouterNavigateFailure",e,t)},onRedirect:e=>{fr(e,"Redirect")},onNavigateSuccess:(e,t,n,r)=>{const{fromCache:o,metadata:{pageType:i,subPageType:a}}=t;br+=1,(0,Jn.G)("WebSpaRouterNavigateSuccess",{Route:e.name,ToPageType:i||"unknown",ToSubPageType:a||"unknown",..."back"===n?{FromCache:o?1:0}:{},NavigationType:n,UseFakeNavigationAPI:r?1:0,ClientVersion:Ze.RF,ClientNavigationCount:br})}},Tr=(({routes:e,isSourceElementRoutable:t,getPathToMatch:n,routeMatchCacheCapacity:r,callbacks:o})=>{let i={status:"stable",navigationType:"init",currentRoute:null,preparations:null,restoredScrollY:null,animation:null},a=[];const s=e=>(a.push(e),()=>{a=a.filter((t=>t!==e))}),l=e=>{var t;i=e(i),a.forEach((e=>e())),null==o||null===(t=o.onStateSet)||void 0===t||t.call(o,i)},c=new Z(r);let d=null;const u=e=>{d=null,ee(e)&&X(e)&&(d=e.target.closest("a[href], button"))},p=e=>{if(ee(e)&&X(e)&&!e.defaultPrevented&&d instanceof HTMLAnchorElement&&"_self"===(d.getAttribute("target")||"_self")){const n=d.href;if(y===n)e.preventDefault();else if(b){var t;null===(t=window.fakeNavigation)||void 0===t||t.dispatchEvent(B.create(n===window.location.href?"replace":"push",{url:n,index:-1,sameDocument:!1},{userInitiated:!0,sourceElement:d,originalEvent:e}))}}},g=e=>{var t;b?History.prototype.replaceState.call(history,{...window.history.state,...e},""):null!==(t=window.navigation)&&void 0!==t&&t.currentEntry&&window.navigation.updateCurrentEntry({state:{...window.navigation.currentEntry.getState(),...e}})},m=e=>{var t,n,r;return null!==(t=null===(n=window.navigation)||void 0===n||null===(n=n.currentEntry.getState())||void 0===n?void 0:n[e])&&void 0!==t?t:null===(r=window.history.state)||void 0===r?void 0:r[e]};let h;const v=e=>{h=e};let f=null,y=null,w=Date.now(),b=!1,E=!1,T=!1,S=()=>!0,_=!1;const R=e=>{var t;null==o||null===(t=o.onAbort)||void 0===t||t.call(o,e),l((e=>({...e,status:"aborted"})))},A=e=>{var t,n;ne(e)&&(e.preventDefault(),null===(t=(n=e.info).failed)||void 0===t||t.call(n));"traverse"===e.navigationType?setTimeout((()=>{window.location.reload()})):b&&e.onNoIntercept()},C=r=>{var a;if(b){const e=f;f=null,null==e||e.abort()}if(_)return _=!1,void r.intercept();if(void 0!==h)return setTimeout(location.assign.bind(window.location),0,h),void(h=void 0);const s=r.sourceElement||d;if(d=null,te(r)&&(T=!0),!re(r,s,t))return void A(r);const{navigationType:u}=r,p=new URL(r.destination.url,window.location.origin),C=oe(u,e,p.pathname,n,c,o);if(!C)return void A(r);const{route:P,match:D}=C;if(!S(P,i.currentRoute,r))return void A(r);if(i.currentRoute===P){if(T&&(({navigationType:e,userInitiated:t,destination:{sameDocument:n}})=>"traverse"===e&&t&&n)(r))return}else T=!1;const I=(e=>{let t="back";if("traverse"===e.navigationType)if(b){var n;const e=null===(n=window.history.state)||void 0===n?void 0:n[Y];"number"==typeof e&&(t=w<e?"forward":"back",w=e)}else t=e.destination.index<window.navigation.currentEntry.index?"back":"forward";else t="forward";return t})(r),k="traverse"===u?I:u,{onStart:N,onEnd:O}={...q,...null===(a=i.currentRoute)||void 0===a?void 0:a.transitionFrom},{commit:x,timeout:M,animation:L,onStart:W,onEnd:V}={...K,...P.transitionTo},j=I&&L?{...L,direction:I}:null,$=(e,t)=>{var n,o,i,a;(b&&(f=null),O(e),V(t),t)?null===(n=r.info)||void 0===n||null===(o=n.succeeded)||void 0===o||o.call(n):null===(i=r.info)||void 0===i||null===(a=i.failed)||void 0===a||a.call(i)};"push"!==u&&"replace"!==u&&b||g({[J]:window.scrollY});const F=ne(r);var B;if(r.signal.aborted||F&&r.info.signal.aborted)return void(null==o||null===(B=o.onAbort)||void 0===B||B.call(o,P));const[G,z]="immediate"===x?["immediate","immediate"]:["after-transition",E?"after-transition":"immediate"];y=r.destination.url,b&&(f=r);const H=window.location.href;r.intercept({commit:z,scroll:"manual",async handler(){try{var e,t;N(),W(),b&&"push"===u&&(w=Date.now()),l("immediate"===G?e=>({...e,navigationType:k,animation:j,preparations:null,currentRoute:P,restoredScrollY:null,status:"loading"}):e=>({...e,navigationType:k,animation:j,restoredScrollY:null,status:"loading"}));const d=new AbortController;r.signal.addEventListener("abort",(()=>d.abort())),F&&r.info.signal.addEventListener("abort",(()=>d.abort()));const h=d.signal,f=M-500;let y;try{y=await(0,U.n6)(P.prepare({url:p,signal:h,match:D,commit:G,requestType:F?r.info.requestType:"navigation",navigationType:k,timeout:f}),M)}catch(e){var n;if(e instanceof U.uM)null==o||null===(n=o.onPrepareTimeout)||void 0===n||n.call(o,P),l((e=>({...e,status:"timeout"})));else if(e instanceof Error&&"AbortError"===e.name)R(P);else{var i;null==o||null===(i=o.onPrepareFailure)||void 0===i||i.call(o,P,e),l((t=>({...t,status:"failure",error:e})))}return void $(!1,!1)}if(h.aborted)return R(P),void $(!1,!1);if("redirect"===y.kind){var a;const e=y;if($(!0,!1),null==o||null===(a=o.onRedirect)||void 0===a||a.call(o,P,e),l((e=>({...e,status:"stable"}))),F)return void("immediate"===z&&("replace"===r.navigationType?History.prototype.replaceState.call(history,null,"",H):(_=!0,window.history.back())));var s;if(S=()=>!1,"immediate"===z)"forward"===I?(v(e.href),window.history.back()):window.location.replace(e.href);else if("forward"===I)setTimeout(window.location.assign.bind(window.location),0,e.href);else null===(s=r.commit)||void 0===s||s.call(r),setTimeout(window.location.replace.bind(window.location),0,e.href);return}const E=y;var c;if("after-transition"===z)null===(c=r.commit)||void 0===c||c.call(r);$(!0,!0),scrollTo(0,0);let T=null;if("push"!==u){const e=m(J);"number"==typeof e&&(T=e)}l((e=>({...e,currentRoute:P,status:"stable",preparations:E.preparations,match:D,restoredScrollY:T}))),null==o||null===(e=o.onNavigateSuccess)||void 0===e||e.call(o,P,E.preparations,k,b),!b||"push"!==u&&"replace"!==u||g({[Y]:w}),null!==(t=E.opts)&&void 0!==t&&t.isMatchedRouteNavigatable&&(S=E.opts.isMatchedRouteNavigatable)}catch(e){$(!1,!1),((e,t)=>{var n;null==o||null===(n=o.onNavigateFailure)||void 0===n||n.call(o,e,t),l((e=>({...e,status:"failure"})))})(P,e)}finally{y=null}}})},P=e=>{var t;null===(t=window.fakeNavigation)||void 0===t||t.dispatchEvent(B.create("traverse",{url:window.location.href,index:-1,sameDocument:!0},{userInitiated:e.isTrusted}))},D=e=>{g({[J]:window.scrollY})},I=()=>{g({[J]:window.scrollY})},k=e=>{var t;if(e.defaultPrevented||!(e.target instanceof Element))return;const n=e.target.closest("form");if(!n)return;d=n;const r=new FormData(n),{method:o,action:i}=n,a=new URL(i,window.location.href);"get"===o&&(a.search=new URLSearchParams([...r].map((([e,t])=>t instanceof File?[e,t.name]:[e,t]))).toString()),null===(t=window.fakeNavigation)||void 0===t||t.dispatchEvent(B.create("push",{url:a.href,sameDocument:!1,index:-1},{userInitiated:e.isTrusted,originalEvent:e,sourceElement:n,formData:"post"===o?r:null}))},N=e=>C(e.detail);let O=!1;return{initFetch:async t=>{var r,i;const a=oe("init",e,t.pathname,n,c,o);if(!a)throw new Error("No route to fetch for");const{route:s,match:l}=a,d=(null===(r=s.transitionTo)||void 0===r?void 0:r.timeout)||K.timeout,u=AbortSignal.timeout(d);let p;try{p=await(0,U.n6)(s.prepare({navigationType:"init",url:new URL(t),signal:u,match:l,timeout:d}),d)}catch(e){var g;throw null==o||null===(g=o.onInitFetchFailure)||void 0===g||g.call(o,s,e),e}if("route"!==p.kind)throw new Error("Unsupported route response");return null!==(i=p.opts)&&void 0!==i&&i.isMatchedRouteNavigatable&&(S=p.opts.isMatchedRouteNavigatable),{path:t.pathname,preparations:p.preparations,route:s,match:l}},forClient:({path:t,preparations:r},{isMatchedRouteNavigatable:a=S,forceFakeNavigationAPI:l=!1,supportsDeferredCommit:h=!1}={})=>{const f=oe("init",e,t,n,c,o);if(!f)throw new Error("No route to render");{const{route:e,match:t}=f,n=m(J);i={status:"stable",navigationType:G()?"reload":"init",currentRoute:e,preparations:r,match:t,restoredScrollY:"number"==typeof n?n:null,animation:null},S=a}var y;return"undefined"!=typeof window&&(b=!window.navigation||l,E=h,"undefined"==typeof window||O||(O=!0,window.addEventListener("click",u,!0),window.addEventListener("click",p),window.addEventListener("pagehide",D),document.addEventListener("scrollend",I),b?(window.addEventListener("popstate",P),window.addEventListener("submit",k),history.pushState=(e,t,n)=>{var r;null===(r=window.fakeNavigation)||void 0===r||r.dispatchEvent(B.create("push",{url:n||window.location.href,index:-1,sameDocument:!0},{state:e,onNoIntercept(){History.prototype.pushState.call(history,e,t,n)}}))},history.replaceState=(e,t,n)=>{var r;const{[Y]:o,[J]:i}=window.history.state||{},a={...e,...void 0!==o&&{[Y]:o},...void 0!==i&&{[J]:i}};null===(r=window.fakeNavigation)||void 0===r||r.dispatchEvent(B.create("replace",{url:n||window.location.href,index:-1,sameDocument:!0},{state:a,onNoIntercept(){History.prototype.replaceState.call(history,a,t,n)}}))},window.fakeNavigation=new EventTarget,window.fakeNavigation.addEventListener("fakeNavigate",N),g({[Y]:w=(null===(y=history.state)||void 0===y?void 0:y[Y])||Date.now()})):window.navigation&&window.navigation.addEventListener("navigate",C))),{subscribe:s,getState:()=>i,__handleNavigate:C,__handleClickCapture:u,__handleClickBubble:p,__handleFormSubmit:k,__setExternalRedirectLocation:v,get __navigatingElement(){return d}}},forServer:({preparations:t,route:r,match:i,path:a})=>{let s=r,l=i;if(!s){const t=oe("init",e,a,n,c,o);if(!t)throw new Error("No route to render");s=t.route,l=t.match}return{subscribe:()=>H,getState:()=>({status:"stable",navigationType:"init",currentRoute:s,match:l,preparations:t,restoredScrollY:null,animation:null})}},navigate:(e,t={})=>((e,{navigationType:t,requestType:n})=>{const r=new URL(e,window.location.origin).href,o=null!=t?t:r===window.location.href?"replace":"push";let i,a;const s=new Promise(((e,t)=>{i=e,a=t})),l=new AbortController,c={type:"router_programmatic",requestType:n||"navigation",succeeded:i,failed:a,signal:l.signal};var d,u;return b?null===(d=window.fakeNavigation)||void 0===d||d.dispatchEvent(B.create(o,{url:r,index:-1,sameDocument:!1},{info:c})):null===(u=window.navigation)||void 0===u||u.navigate(r,{info:c,history:o}),{deferred:s,abort:l.abort.bind(l)}})(e,t),dispose:()=>{var e,t;"undefined"!=typeof window&&(window.removeEventListener("click",u,!0),window.removeEventListener("click",p),window.removeEventListener("popstate",P),window.removeEventListener("pagehide",D),document.removeEventListener("scrollend",I),null===(e=window.navigation)||void 0===e||e.removeEventListener("navigate",C),null===(t=window.fakeNavigation)||void 0===t||t.removeEventListener("fakeNavigate",N))}}})({routes:pr,getPathToMatch:(e,t)=>{var n;if("traverse"===t){if(e.match(hr))return"/storefront";if(e.match(vr))return"/detail/"}const r=(null===(n=e.match(mr))||void 0===n?void 0:n[1])||"/";return r.startsWith("/detail/")?"/detail/":r},isSourceElementRoutable:e=>null!==e.closest(".DVWebNode"),routeMatchCacheCapacity:100,callbacks:Er});var Sr=n("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts");const _r=()=>{},Rr=({children:e,config:t,log:n=_r})=>{const[r,o]=i.useState(!1),a=i.useRef(!1),s=i.useRef(_r),l=i.useRef([]),c=i.useRef("nested"),d=i.useRef(0),u=i.useRef(_r),p=i.useRef(),g=i.useRef(!1),m=()=>{g.current=!0,u.current(!1)},h=(0,i.useMemo)((()=>({invalidatePageCaches:async()=>{await(async(e=window.location.href)=>{if(!rt())return!1;const t=ut(Xe,e),n=await ht(e);return!(await Promise.all([t,...n.map((e=>ut(et,e.url)))])).includes(!1)})()},putCachedPagination:async(e,t)=>{await(async(e,t,n=window.location.href)=>{if(!rt())return!1;const r=await mt(Xe,n);return void 0!==r&&await ct(et,ot(n,e),t,r)})(e,t)},getCachedPagination:async e=>at(e),getAllCachedPaginations:async(e,t)=>(async(e,t,n=window.location.href)=>{if(!rt())return[];const r=[];let o=e;do{const e=await at(o,n);e?(r.push(e),o=t(e)):o=null}while(o);return r})(e,t),bindScrollRestorationPaginator:(e,t=!0)=>(n(`bindScrollRestorationPaginator - paginator=${e.name} isPage=${t}`),t?s.current=e:l.current.push(e),t?()=>{s.current=_r,l.current=[],d.current=0}:()=>{const t=l.current.findIndex(e);t>=0&&l.current.splice(t,1),d.current=0}),callScrollRestorationPaginator:(e,t)=>{if(u.current=e,g.current=!1,clearTimeout(p.current),void 0!==t&&(p.current=setTimeout(m,t)),d.current<l.current.length){c.current="nested";const e=l.current[d.current];n(`callScrollRestorationPaginator - paginator=${e.name}`),e()}else n("callScrollRestorationPaginator - paginator=page"),c.current="page",s.current===_r?u.current(!1):s.current()},reportPagination:(e,t)=>{g.current||(clearTimeout(p.current),n(`reportPagination - success=${e} done=${t} priority=${c.current}`),e&&t&&("page"===c.current?(n("Done with the page"),s.current=_r):d.current++),u.current(e))},isRestoringPaginatedScrollPosition:()=>a.current,setIsRestoringPaginatedScrollPosition(e){a.current=e,o(e)},navigate:(e,t)=>Tr.navigate(e,t),reportNavigation(){const e=(0,ae.U)({homeRegion:(0,ge.zW)()}),{pageType:t,subPageType:n,pageTypeId:r}=window.DVWebNode;t&&n&&e.action({action:Sr.W0.Landing,hitType:Sr.qB.PageHit,pType:t,sPageType:n,pageTypeId:r})},playbackNavigationMode:t.playbackNavigationMode||"NONE"})),[r]);return i.createElement(Ln._G.Provider,{value:h},e)},Ar="lGJghq",Cr="tctukO",Pr={enterActive:"hi2FDQ",enterDone:"dRmQSj",exitActive:"BqWGHA",exitDone:"ZC9y7O"},Dr=({delayed:e})=>{const t=L(),n=(0,Ln.CU)(),r=(0,i.useRef)(null),[o,a]=i.useState(!1);return(0,i.useEffect)((()=>{a("loading"===t||(null==n?void 0:n.isRestoringPaginatedScrollPosition())||!1)}),[t,n]),i.createElement(k,{classNames:Pr,in:o,timeout:1e3,nodeRef:r},i.createElement("div",{ref:r,className:On()(Ar,{[Cr]:e})}))},Ir=()=>i.createElement("section",{className:Vn,"data-automation-id":"wspa-loading"},i.createElement(Hn.Spinner,null));var kr=n("./src/util/utils/array.ts");let Nr,Or=!1;const xr=()=>{rn.stopConfigurationAutoRefresh(),on.stopConfigurationAutoRefresh(),Nr&&(Nr(),Nr=void 0,Or=!1)},Mr=(e,t)=>{var n,r;(0,kr.P)((null===(n=e.configuration)||void 0===n?void 0:n.testGroups)||[],(null===(r=t.configuration)||void 0===r?void 0:r.testGroups)||[])||(0,U.SD)((()=>on.updateConfigurationOnce()))},Lr=(e,t,n,r)=>{ue.c.count("DVWebNodePerfMetrics",{WidgetName:e,Index:t,MetricType:n,Value:r})},Wr={name:jt.sR,Component:({config:e,metadata:t,appArgs:n,...r})=>{var o;const{initPath:a,disableServerRouterInit:s=!1}=(0,xn.G4)(),{baseArgs:l}=(0,ft.p)(n),[c,d]=(0,i.useState)(s?void 0:{path:a||n.context.path,preparations:{baseArgs:l,fromCache:null,metadata:t,...r}});(0,i.useEffect)((()=>{const e=s?void 0:{metadata:t,appArgs:n,...r};var o;(0,U.SD)((()=>(async e=>{G()?(await st(),e&&await it(e)):(e&&await it(e),(0,U.SD)(lt))})(e))),s&&(0,U.SD)((()=>(async()=>await Tr.initFetch(new URL(window.location.href)))().then(d))),Object.keys((null===(o=window.DVWebNode)||void 0===o?void 0:o.perfMetrics)||[]).forEach((e=>{window.DVWebNode.perfMetrics[e].forEach(((t,n)=>{const r=n.toString();t.afterMarkup&&t.beforeMarkup&&t.afterProps&&t.beforeHydration&&t.afterHydration?(Lr(e,r,"DomParsed",t.afterMarkup.getTime()-t.beforeMarkup.getTime()),Lr(e,r,"PropsParsed",t.afterProps.getTime()-t.afterMarkup.getTime()),Lr(e,r,"HydrationExecute",t.afterHydration.getTime()-t.beforeHydration.getTime()),Lr(e,r,"Noninteractive",t.afterHydration.getTime()-t.afterMarkup.getTime()),Lr(e,r,"WidgetLoaded",t.afterHydration.getTime()-t.beforeMarkup.getTime())):ue.c.error("Failed to load performance metrics",{widgetName:e})}))}))}),[]),(0,i.useEffect)((()=>{if(null==e||!e.forceLocationUpdate)return(0,U.SD)((()=>(async()=>{const e=(0,ge.Lo)();null!=e&&e.isPageResiliencyLaunched&&!Or&&(Or=!0,await rn.startConfigurationAutoUpdate(),await on.startConfigurationAutoUpdate(),Nr=rn.subscribe(Mr))})())),xr;window.location.assign(e.forceLocationUpdate)}),[]);const u=(e=>{var t;return{isMatchedRouteNavigatable:e?yr(e):void 0,forceFakeNavigationAPI:null!==(t=null==e?void 0:e.forceFakeNavigationAPI)&&void 0!==t&&t,supportsDeferredCommit:!1}})(s?void 0:e);return c?i.createElement(x,{value:Tr.forClient(c,u)},i.createElement(Rr,{config:e},i.createElement(Dr,{delayed:null===(o=e.delayLoadingIndicator)||void 0===o||o}),i.createElement(W,null))):i.createElement(Ir,null)},getProps:void 0,criticality:o.C.MANDATORY,getHydrationArgs:({initPath:e,disableServerRouterInit:t,siteWideWeblabs:n})=>({initPath:e,disableServerRouterInit:t,siteWideWeblabs:n})};(0,r.y)(Wr)},"./src/server/timeout.ts":(e,t,n)=>{n.d(t,{Xc:()=>r});const r="X-Amzn-Client-TTL-Seconds"},"./src/shared/Explore/ClientImpressions/ImpressionTracker.tsx":(e,t,n)=>{n.d(t,{F:()=>w});var r=n("./src/util/utils/sample.ts"),o=n("./src/util/utils/device.ts"),i=n("./src/util/logger/kirup.ts"),a=n("./src/util/logger/logger.ts"),s=n("./src/shared/deviceProxy/DeviceProxy.ts"),l=n("./src/shared/Stores/context.ts");function c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=10,u="DVWebNodeClientsideImpression";class p{constructor(){c(this,"context",void 0),c(this,"logger",void 0),this.context=(0,l.getRequestContext)(),this.logger=new a.Oc("DVWebNode_ClientsideImpressionClient")}buildClientsideImpressionUri(){const e={...(0,s.B$)(this.context),deviceTypeID:p.html5DTID,deviceID:"Web",firmware:"DVWebNode"},t=new URLSearchParams(e);return`${(0,s.WA)(this.context)}/${p.clientsideImpressionUrl}?${t.toString()}`}getParameters(e){return{...(0,s.B$)(this.context),...e,sessionId:this.context.sessionID,deviceTypeID:(0,o.dz)().deviceTypeId}}async logImpression(e){const t=this.buildClientsideImpressionUri(),n=this.getParameters(e);if("sendBeacon"in navigator&&!Boolean(window.chrome)){(0,r.d)(d,(()=>{i.c.count(`${u}SendBeacon`,{Type:"Attempt"})}));const e=new Blob([JSON.stringify(n)],{type:"application/json"}),o=navigator.sendBeacon(t,e);return(0,r.d)(d,(()=>{i.c.count(`${u}SendBeacon`,{Type:o?"QueueSuccess":"QueueFail"})})),o}return(0,r.d)(d,(()=>{i.c.count(`${u}Fetch`,{Type:"Attempt"})})),fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),keepalive:!0,credentials:"include"}).then((()=>((0,r.d)(d,(()=>{i.c.count(`${u}Fetch`,{Type:"Success"})})),!0)),(()=>((0,r.d)(d,(()=>{i.c.count(`${u}Fetch`,{Type:"Reject"})})),!1))).catch((e=>((0,r.d)(d,(()=>{i.c.count(`${u}Fetch`,{Type:"Catch"})})),this.logger.warn("Clientside impression fetch failed",e),!1)))}}c(p,"clientsideImpressionUrl","cdp/usage/ClientsideImpression"),c(p,"html5DTID",s.V4.WEB);var g,m=n("./node_modules/uuid/dist/esm-browser/v4.js");n("./node_modules/intersection-observer/intersection-observer.js");function h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){return e[e.HandleIOEntries=0]="HandleIOEntries",e[e.GroupIndividualImpressions=1]="GroupIndividualImpressions",e[e.SendRequestsFromQueue=2]="SendRequestsFromQueue",e[e.__LENGTH=3]="__LENGTH",e}(v||{});const f="DVWebNodeImpressionTracker",y=10;class w{static init(){var e,t;if(w.io||(w.io=new IntersectionObserver(w.onNewIoEntries,{threshold:[.5,.6,.7,.8,.9,1]})),w.logger||(w.logger=new a.Oc("DVWebNode_ImpressionTracker")),w.timeOrigin=Date.now()-performance.now(),w.elementToElementData||(w.elementToElementData=new Map),w.currentlyInViewItems||(w.currentlyInViewItems=new Map),w.intersectionObserverEntryQueue||(w.intersectionObserverEntryQueue=[]),w.pendingIndividualImpressionRecords||(w.pendingIndividualImpressionRecords=new Map),w.groupedImpressionsQueue||(w.groupedImpressionsQueue=[]),w.unobservedElements=0,w.minCarousel=0,w.maxCarousel=0,w.attachOnIdleCallback(),w.client=new p,"loading"===document.readyState){w.pageLoaded=!1;const e=()=>{w.pageLoaded=!0,document.removeEventListener("DOMContentLoaded",e)};document.addEventListener("DOMContentLoaded",e)}else w.pageLoaded=!0;document.addEventListener("visibilitychange",this.onVisibilityChange),document.addEventListener("pagehide",w.onPageHide);const n=new URL(window.location.href);this.debugVariables=(0,l.isInternal)()&&n.searchParams.has("impressionDebug")?""===n.searchParams.get("impressionDebug")?"ALL":null!==(e=null===(t=n.searchParams.get("impressionDebug"))||void 0===t?void 0:t.split(","))&&void 0!==e?e:null:null}static observe(e,t){try{var n,o;if(w.io||w.init(),null==t||!t.collectionImpressionData)return;if(!e)return void(0,r.d)(y,(()=>{i.c.count(`${f}ObserveNoElement`)}));null===(n=w.io)||void 0===n||n.observe(e),null===(o=w.elementToElementData)||void 0===o||o.set(e,t)}catch(e){var a;null===(a=w.logger)||void 0===a||a.error(e instanceof Error?e:`${e}`)}}static unobserve(e){var t;e?(null===(t=w.io)||void 0===t||t.unobserve(e),w.unobservedElements++,w.elementToElementData&&w.unobservedElements!==w.elementToElementData.size||w.disconnectAll()):(0,r.d)(y,(()=>{i.c.count(`${f}UnobserveNoElement`)}))}static disconnectAll(){var e;null===(e=w.io)||void 0===e||e.disconnect(),w.onIdleCallback({didTimeout:!0,timeRemaining:()=>50}),w.io=void 0,w.elementToElementData=void 0,w.currentlyInViewItems=void 0,w.intersectionObserverEntryQueue=void 0,w.pendingIndividualImpressionRecords=void 0,w.unobservedElements=0,document.removeEventListener("visibilitychange",this.onVisibilityChange),document.removeEventListener("pagehide",this.onPageHide)}static addImpressionRecord(e,t){var n,o,a;((0,r.d)(y,(()=>{i.c.count(`${f}${e.eventType}ImpressionRecorded`)})),w.debugImpression(e),null!==(n=w.pendingIndividualImpressionRecords)&&void 0!==n&&n.has(t))?null===(o=w.pendingIndividualImpressionRecords.get(t))||void 0===o||o.push(e):null===(a=w.pendingIndividualImpressionRecords)||void 0===a||a.set(t,[e])}static logManualImpression(e,t){var n,o;const a=null===(n=w.elementToElementData)||void 0===n?void 0:n.get(e),s=null===(o=w.currentlyInViewItems)||void 0===o?void 0:o.get(e),l=performance.now();if(!a||!a.collectionImpressionData||!s)return void(0,r.d)(y,(()=>{i.c.count(`${f}ManualImpressionsNoElement`)}));const c={...a,...s,eventType:t,timeToView:s.impressionStartTime,inViewTime:l-s.impressionStartTime,eventTime:w.timeOrigin+l,elementSize:`${e.scrollWidth},${e.scrollHeight}`};w.addImpressionRecord(c,a.collectionImpressionData),"Select"===t?w.onIdleCallback({didTimeout:!0,timeRemaining:()=>50},!0):w.attachOnIdleCallback()}}g=w,h(w,"io",void 0),h(w,"timeOrigin",void 0),h(w,"elementToElementData",void 0),h(w,"intersectionObserverEntryQueue",void 0),h(w,"pendingIndividualImpressionRecords",void 0),h(w,"groupedImpressionsQueue",void 0),h(w,"currentlyInViewItems",void 0),h(w,"idleCallbackHandle",void 0),h(w,"timeoutID",void 0),h(w,"client",void 0),h(w,"unobservedElements",void 0),h(w,"pageLoaded",void 0),h(w,"minCarousel",void 0),h(w,"maxCarousel",void 0),h(w,"logger",void 0),h(w,"debugVariables",void 0),h(w,"onVisibilityChange",(()=>{"hidden"==document.visibilityState&&g.onPageHide()})),h(w,"onNewIoEntries",(e=>{var t;null===(t=g.intersectionObserverEntryQueue)||void 0===t||t.push(...e),g.attachOnIdleCallback()})),h(w,"idleCallbackNextStep",0),h(w,"callbackBuffer",10),h(w,"minimumImpressions",3),h(w,"onIdleCallback",((e,t=!1)=>{var n,r,o;g.clearSavedCallback();const i=()=>e.didTimeout||e.timeRemaining()>g.callbackBuffer;for(;i()&&g.idleCallbackNextStep<v.__LENGTH;)switch(g.idleCallbackNextStep){case v.HandleIOEntries:if(g.intersectionObserverEntryQueue){for(;g.intersectionObserverEntryQueue.length>0;)g.handleIoEntryQueue();g.recalculateMinAndMax()}g.idleCallbackNextStep++;break;case v.GroupIndividualImpressions:g.groupIndividualImpressionRecords(),g.idleCallbackNextStep++;break;case v.SendRequestsFromQueue:for(;g.groupedImpressionsQueue&&g.groupedImpressionsQueue.length>0&&(g.groupedImpressionsQueue.length>=g.minimumImpressions||t)&&i();)g.sendRequestFromQueue();g.idleCallbackNextStep++}g.idleCallbackNextStep>=v.__LENGTH&&(g.idleCallbackNextStep=0),(null!==(n=g.intersectionObserverEntryQueue)&&void 0!==n&&n.length||null!==(r=g.pendingIndividualImpressionRecords)&&void 0!==r&&r.size||null!==(o=g.groupedImpressionsQueue)&&void 0!==o&&o.length)&&g.attachOnIdleCallback()})),h(w,"recalculateMinAndMax",(()=>{let e=9999,t=0;g.currentlyInViewItems&&(g.currentlyInViewItems.forEach((n=>{e=Math.min(e,n.carouselPosition),t=Math.max(t,n.carouselPosition)})),g.minCarousel=e,g.maxCarousel=t)})),h(w,"inferEventTrigger",(e=>{if(!e)return"Pageload";const t=e.carouselPosition||0;return g.pageLoaded?g.maxCarousel>=t&&t>=g.minCarousel?"Hscroll":"Vscroll":"Pageload"})),h(w,"handleIoEntryQueue",(()=>{var e,t;if(!g.currentlyInViewItems||0==(null===(e=g.intersectionObserverEntryQueue)||void 0===e?void 0:e.length))return;const n=null===(t=g.intersectionObserverEntryQueue)||void 0===t?void 0:t.shift();if(n)if(n.isIntersecting){const e=g.currentlyInViewItems.get(n.target);if(e)g.currentlyInViewItems.set(n.target,{...e,maxFractionInView:Math.max(n.intersectionRatio,e.maxFractionInView)});else{var o;const e=null===(o=g.elementToElementData)||void 0===o?void 0:o.get(n.target),t=g.inferEventTrigger(e),a=null==e?void 0:e.carouselPosition;void 0!==a?g.currentlyInViewItems.set(n.target,{impressionStartTime:n.time,maxFractionInView:n.intersectionRatio,eventTrigger:t,carouselPosition:a}):(0,r.d)(y,(()=>{i.c.count(`${f}NoCarouselPosition`)}))}}else{var a;const e=g.currentlyInViewItems.get(n.target),t=null===(a=g.elementToElementData)||void 0===a?void 0:a.get(n.target),r="View";if(e&&t){const o=e.impressionStartTime,i=n.time,a={...t,...e,inViewTime:i-o,timeToView:o,eventTime:g.timeOrigin+o,elementSize:`${n.target.scrollWidth},${n.target.scrollHeight}`,eventType:r};g.pageLoaded&&a.inViewTime>1e3&&g.addImpressionRecord(a,null==t?void 0:t.collectionImpressionData),g.currentlyInViewItems.delete(n.target)}}})),h(w,"groupIndividualImpressionRecords",(()=>{var e,t;0!=(null===(e=g.pendingIndividualImpressionRecords)||void 0===e?void 0:e.size)&&(null===(t=g.pendingIndividualImpressionRecords)||void 0===t||t.forEach(((e,t,n)=>{var r;const o=[];let i=0;null==e||e.forEach(((e,t)=>{(0==t||Math.abs(e.eventTime-i/t)<2e3)&&(i+=e.eventTime,o.push(e))})),o.length==(null==e?void 0:e.length)?n.delete(t):n.set(t,e.filter((e=>!o.includes(e)))),null===(r=g.groupedImpressionsQueue)||void 0===r||r.push(o)})))})),h(w,"sendRequestFromQueue",(()=>{var e,t;let n=[];const o=null===(e=g.groupedImpressionsQueue)||void 0===e?void 0:e.length;var a;o&&o>20?(n=null===(a=g.groupedImpressionsQueue)||void 0===a?void 0:a.splice(0,20),(0,r.d)(y,(()=>{i.c.count(`${f}BatchSizeMaxed`)}))):(n=g.groupedImpressionsQueue,g.groupedImpressionsQueue=[]);if(n=null===(t=n)||void 0===t?void 0:t.filter((e=>e.length>0)),!n||!n[0])return void(0,r.d)(y,(()=>{i.c.count(`${f}NoGroupedImpressions`)}));const s={eventBatchTimestamp:Date.now(),ImpressionEntryList:n.map((e=>({items:e.map((e=>({ImpressionEntryEvent:{eventId:(0,m.Z)(),eventType:e.eventType,eventTrigger:e.eventTrigger,eventTimestamp:e.eventTime},ImpressionEntryView:{inViewTime:e.inViewTime,inViewStripe:Math.min(100*e.maxFractionInView,100),timeToView:e.timeToView},ImpressionEntryItem:{itemName:e.widgetType,itemContentId:e.titleID,itemCreativeId:e.imageURL,itemContentSize:e.elementSize,itemReftag:e.refMarker,itemSlotId:`${e.itemPosition+1},${e.carouselPosition+1}`,itemContentType:e.itemContentType},ImpressionEntryItemAnalytics:e.itemAnalytics}))),carouselAnalytics:e[0].collectionImpressionData,clientVariant:"PVWebsite"})))};g.client.logImpression(s)})),h(w,"attachOnIdleCallback",(()=>{g.idleCallbackHandle||g.timeoutID||(window.requestIdleCallback?g.idleCallbackHandle=window.requestIdleCallback(g.onIdleCallback):g.timeoutID=window.setTimeout((()=>{const e=Date.now();g.onIdleCallback({didTimeout:!1,timeRemaining:()=>e+50-Date.now()})}),2e3))})),h(w,"detatchOnIdleCallback",(()=>{window.cancelIdleCallback&&g.idleCallbackHandle?window.cancelIdleCallback(g.idleCallbackHandle):g.timeoutID&&window.clearTimeout(g.timeoutID),g.clearSavedCallback()})),h(w,"clearSavedCallback",(()=>{g.idleCallbackHandle=void 0,g.timeoutID=void 0})),h(w,"onPageHide",(()=>{var e;(0,r.d)(y,(()=>{i.c.count(`${f}OnPageHide`)}));const t=performance.now();if(!g.currentlyInViewItems)return;const n=Array.from(g.currentlyInViewItems.keys()).map((e=>({isIntersecting:!1,target:e,time:t,intersectionRatio:0,rootBounds:null,intersectionRect:e.getBoundingClientRect(),boundingClientRect:e.getBoundingClientRect()})));null===(e=g.intersectionObserverEntryQueue)||void 0===e||e.push(...n),g.onIdleCallback({didTimeout:!0,timeRemaining:()=>100},!0)})),h(w,"debugImpression",(e=>{if(null==g.debugVariables||!(0,l.isInternal)())return;if("ALL"==g.debugVariables)return void window.console.log(e);const t=g.debugVariables,n=Object.fromEntries(Object.entries(e).filter((([e,n])=>t.includes(e))));window.console.log(n)}))},"./src/shared/Profiles/utils.ts":(e,t,n)=>{n.d(t,{EB:()=>s,Kn:()=>a,QN:()=>u,Qq:()=>i,R2:()=>p,Yv:()=>l,_0:()=>c,aF:()=>o,wY:()=>d});var r=n("./src/util/utils/query.ts");const o="switchRurl",i=()=>{try{const e=(0,r.GR)(o);if(!e)return;const t=new URL(e,window.location.origin);return t.pathname+t.search+t.hash}catch(e){return}},a=["ValidationException","InvalidInputException","PinNotSetException","InvalidPinLengthException"],s=["InvalidCSRFTokenException","EmptyIdentityContextException","PinNotValidException"],l=e=>`^[0-9]{${e}}$`,c=(e,t)=>(e=>new RegExp(l(e)))(t).test(e),d=e=>e?"text":"password",u=(e,t)=>{const n=e.match(`[0-9]{1,${t}}`);return null!=n&&n.length?n[0]:""},p=(e,t,n)=>n.call(e,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:(0,r.Lv)(n.logger,t)})},"./src/shared/Stores/context.ts":(e,t,n)=>{n.r(t),n.d(t,{getRequestContext:()=>i,isInternal:()=>l,isRetail:()=>c,setRequestContext:()=>a,updateRequestContext:()=>s});var r=n("./src/shared/utils/setContextFromInlineScript.ts");const o=(0,n("./node_modules/zustand/esm/vanilla.mjs").M)((()=>({context:void 0}))),i=()=>{let e;var t;if(e=o.getState().context,void 0===e&&"undefined"!=typeof window&&window.DVWebNode&&(e=null===(t=window.DVWebNode.stores)||void 0===t?void 0:t.getState().context),void 0===e&&"undefined"!=typeof window&&(e=(0,r.j)()),void 0===e)throw new Error("Attempting to retrieve a RequestContext that is currently not set in the Zustand stores");return e},a=e=>{o.setState({context:e}),"undefined"!=typeof window&&window.DVWebNode&&void 0!==window.DVWebNode.stores&&window.DVWebNode.stores.setState({context:e})},s=e=>{const t=i();a({...t,...e})},l=()=>i().isInternal,c=()=>"Retail"===i().domain},"./src/shared/Stores/global.ts":(e,t,n)=>{n.d(t,{Lo:()=>p,T7:()=>u,_3:()=>c,e8:()=>a,zJ:()=>d,zW:()=>g});var r=n("./node_modules/zustand/esm/vanilla.mjs"),o=n("./src/util/utils/htmlEncode.ts");const i={requestContext:{},profile:{},featurePivots:{}},a=()=>(window.DVWebNode||(window.DVWebNode={perfMetrics:{}}),window.DVWebNode.storage||(window.DVWebNode.storage={}),window.DVWebNode.storage.global||(window.DVWebNode.storage.global=(0,r.M)((()=>(()=>{var e;let t;const n=null===(e=document.getElementById("dv-web-store-template"))||void 0===e?void 0:e.innerHTML;if(!n)return i;try{const e=JSON.parse((0,o.He)(n)),r=(0,o.Mt)(e);t=(0,o.ob)(r).global}catch(e){return i}return t||i})()))),window.DVWebNode.storage.global);let s;const l=()=>"undefined"!=typeof process&&null!=process.env.JEST_WORKER_ID?(s||(s=(0,r.M)((()=>({})))),s):a(),c=e=>l().setState(e),d=()=>l().getState(),u=()=>l().getState().profile,p=()=>l().getState().featurePivots,g=()=>l().getState().homeRegion},"./src/shared/WebSPA/Context.tsx":(e,t,n)=>{n.d(t,{CU:()=>a,_G:()=>i,n_:()=>s});var r=n("./node_modules/react/index.js");function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}const i=(0,r.createContext)(void 0),a=()=>(0,r.useContext)(i),s=e=>t=>r.createElement(i.Consumer,null,(n=>r.createElement(e,o({webSPA:n},t))))},"./src/shared/WebSPA/index.ts":(e,t,n)=>{n.d(t,{JB:()=>o.JB,GB:()=>a,sR:()=>i});var r=n("./src/util/wrappers/util.tsx"),o=n("./src/widgets/DVWebNodeWebSPARoot/types/index.ts");const i="web-spa-root",a=()=>document.querySelector(`.${(0,r.VS)(i)}`)},"./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts":(e,t,n)=>{n.d(t,{KU:()=>s,Nb:()=>a,P7:()=>m,W0:()=>c,c7:()=>r,cf:()=>i,mw:()=>h,qB:()=>d,sW:()=>l,wW:()=>o});let r=function(e){return e.ATVMyStuff="ATVMyStuff",e.ATVProfiles="ATVProfiles",e.ATVDetail="ATVDetail",e.ATVHome="ATVHome",e.ATVBrowse="ATVBrowse",e.ATVPerson="ATVPerson",e.ATVUnknown="ATVUnknown",e.ATVDownloads="ATVDownloads",e.ATVSubscription="ATVSubscription",e.ATVSearch="ATVSearch",e.ATVMerch="ATVMerch",e.ATVMoviesAnywhere="ATVMoviesAnywhere",e.ATVModal="ATVModal",e.ATVLive="ATVLive",e.ATVGenre="ATVGenre",e.ATVCategories="ATVCategories",e.ATVRoadblock="ATVRoadblock",e.ATVSplash="ATVSplash",e.ATVSettings="ATVSettings",e.ATVNav="ATVNav",e.ATVChannel="ATVChannel",e.Detail="Detail",e.DetailWebView="DetailWebView",e.DetailAW="DetailAW",e.PVPerson="PVPerson",e.DVWebAjaxAnalytics="DVWebAjaxAnalytics",e.DVSPA="DVSPA",e}({}),o=function(e){return e.MyStuff="MyStuff",e.Library="Library",e.Watchlist="Watchlist",e.Channels="Channels",e.Following="Following",e.Home="Home",e.Store="Store",e.FreeToMe="FreeToMe",e.TV="TV",e.Kids="Kids",e.RentBuy="RentBuy",e.Subscription="Subscription",e.JoinPrime="JoinPrime",e.LiveTv="LiveTv",e.Sports="Sports",e.Search="Search",e.SearchInput="SearchInput",e.Browse="Browse",e.Categories="Categories",e.WhosWatching="WhosWatching",e.Manage="Manage",e.Edit="Edit",e.Associate="Associate",e.Create="Create",e.PinAndLocks="PinAndLocks",e.Preferences="Preferences",e.Switch="Switch",e.Account="Account",e.Season="Season",e.Movie="Movie",e.Event="Event",e.InstantVideo="InstantVideo",e.TVSeason="TVSeason",e.SSM="SSM",e.Actor="Actor",e.Watch="Watch",e.Chat="Chat",e.PVWinApp="PVWinApp",e.Downloads="Downloads",e.GettingStarted="GettingStarted",e.IAS="IAS",e.Main="Main",e.Unknown="Unknown",e}({}),i=function(e){return e.Explore="pvwindowsapp-explore",e.DetailPage="pvwindowsapp-dp",e.Live="pvwindowsapp-live",e.AccList="pvwindowsapp-al",e.WindowsApp="pvwindowsapp-main",e.Unknown="pvwindowsapp-unknown",e}({}),a=function(e){return e.Explore="pvweb-explore",e.DetailPage="pvweb-dp",e.Live="pvweb-live",e.AccList="pvweb-al",e.WindowsApp="pvweb-winapp",e.Unknown="pvweb-unknown",e}({}),s=function(e){return e.Web="web",e.WinApp="winApp",e}({});const l={[r.ATVMyStuff]:{[s.WinApp]:i.AccList,[s.Web]:a.AccList},[r.ATVProfiles]:{[s.WinApp]:i.AccList,[s.Web]:a.AccList},[r.ATVDetail]:{[s.WinApp]:i.DetailPage,[s.Web]:a.DetailPage},[r.ATVPerson]:{[s.WinApp]:i.DetailPage,[s.Web]:a.DetailPage},[r.ATVMoviesAnywhere]:{[s.WinApp]:i.DetailPage,[s.Web]:a.DetailPage},[r.ATVHome]:{[s.WinApp]:i.Explore,[s.Web]:a.Explore},[r.ATVBrowse]:{[s.WinApp]:i.Explore,[s.Web]:a.Explore},[r.ATVSearch]:{[s.WinApp]:i.Explore,[s.Web]:a.Explore},[r.ATVMerch]:{[s.WinApp]:i.Explore,[s.Web]:a.Explore},[r.ATVSubscription]:{[s.WinApp]:i.Explore,[s.Web]:a.Explore},[r.ATVUnknown]:{[s.WinApp]:i.Unknown,[s.Web]:a.Unknown},[r.ATVDownloads]:{[s.WinApp]:i.WindowsApp,[s.Web]:a.WindowsApp},[r.DVSPA]:{[s.WinApp]:i.WindowsApp,[s.Web]:a.WindowsApp},[r.ATVModal]:{[s.WinApp]:i.Live,[s.Web]:a.Live},[r.ATVLive]:{[s.WinApp]:i.Explore,[s.Web]:a.Explore},[r.ATVGenre]:{[s.WinApp]:i.Explore,[s.Web]:a.Explore},[r.ATVCategories]:{[s.WinApp]:i.Explore,[s.Web]:a.Explore},[r.Detail]:{[s.WinApp]:i.DetailPage,[s.Web]:a.DetailPage},[r.DetailWebView]:{[s.WinApp]:i.DetailPage,[s.Web]:a.DetailPage},[r.DetailAW]:{[s.WinApp]:i.DetailPage,[s.Web]:a.DetailPage},[r.PVPerson]:{[s.WinApp]:i.DetailPage,[s.Web]:a.DetailPage},[r.DVWebAjaxAnalytics]:{[s.WinApp]:i.DetailPage,[s.Web]:a.DetailPage}};let c=function(e){return e.SignOut="SignOut",e.SignIn="SignIn",e.Share="Share",e.Search="Search",e.CarouselScroll="CarouselScroll",e.Purchase="Purchase",e.Rent="Rent",e.PlayTrailer="PlayTrailer",e.PlayStream="PlayStream",e.PlayDraper="PlayDraper",e.PlayDownload="PlayDownload",e.Download="Download",e.Click="Click",e.Back="Back",e.AddToWatchlist="AddToWatchlist",e.RemoveFromWatchlist="RemoveFromWatchlist",e.PageNavigate="PageNavigate",e.ModalRendered="ModalRendered",e.Landing="Landing",e.DefaultAction="Click",e}({}),d=function(e){return e.PageHit="pageHit",e.PageTouch="pageTouch",e.PopUp="popUp",e.actionOnly="actionOnly",e.refreshButton="refreshButton",e.BackForwardButton="bf=10",e}({});const u=/.*originals.*/,p=/.*prime.*/,g=/.*sports.*/,m=(e,t)=>{switch(e){case r.ATVHome:return"hm";case r.ATVMerch:return["Home","RentBuy","Channels"].includes(t)?"str":"FreeToMe"==t?"avod":"hm";case r.ATVMyStuff:return"mys";case r.ATVSearch:return"sr";case r.ATVBrowse:return"br";case r.ATVDetail:return"dp";case r.ATVPerson:return"pd";case r.ATVCategories:case r.ATVGenre:return"cat";case r.ATVLive:return"live";case r.ATVMoviesAnywhere:case r.ATVSplash:return"gst";case r.ATVSettings:return"set";case r.ATVDownloads:return"dnl";case r.ATVSubscription:return"subs";case r.ATVChannel:return"3p";case r.ATVUnknown:default:return"hm"}},h=(e,t)=>{switch(e){case o.Home:return"deals"==t?"deals":"hom";case o.FreeToMe:return"ftm";case o.Movie:return"mv";case o.Season:case o.TV:return"tv";case o.Kids:return"kid";case o.Store:return"str";case o.Watchlist:return"wl";case o.Library:return"yvl";case o.RentBuy:return"rnb";case o.Channels:return"chn";case o.Categories:return"cat";case o.Main:case o.Unknown:default:const n=e.toString().toLowerCase();return u.test(n)?"ori":p.test(n)?"pri":g.test(n)?"sports":"hom"}}},"./src/shared/deviceProxy/DeviceProxy.ts":(e,t,n)=>{n.d(t,{B$:()=>l,V4:()=>a,WA:()=>s});var r=n("./src/util/utils/device.ts"),o=n("./src/util/utils/marketplace.ts"),i=n("./src/shared/deviceProxy/marketplaceUtils.ts");const a={WEB:"AOAGZA014O5RE",WINDOWS:"A3OEMT9S4WNMK"},s=(e,t)=>`https://${(0,i.getDeviceProxyEndpoint)(e.marketplaceID,t)}`,l=e=>({deviceID:e.deviceID,deviceTypeID:(0,r.dz)().deviceTypeId,gascEnabled:(0,o.ST)()?"true":"false",marketplaceID:e.marketplaceID,uxLocale:e.locale})},"./src/shared/deviceProxy/PVClickstreamClient.ts":(e,t,n)=>{n.d(t,{U:()=>y});var r=n("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts"),o=n("./src/shared/deviceProxy/DeviceProxy.ts"),i=n("./src/util/utils/refMarker.ts"),a=n("./src/shared/deviceProxy/ServiceClientBase.ts"),s=n("./src/util/logger/logger.ts");function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c{constructor(){l(this,"store",new Map),l(this,"push",(e=>{const t=this.store.size+e.startTime;return this.store.set(t,e),t})),l(this,"delete",(e=>{this.store.delete(e)})),l(this,"values",(()=>Array.from(this.store.values()))),l(this,"clear",(()=>{this.store.clear()}))}}class d{constructor(e,t){l(this,"storage",void 0),l(this,"callback",void 0),l(this,"parameters",void 0),l(this,"interval",null),l(this,"timer",(()=>{this.interval=setInterval(this.execute,1e3*this.parameters.duration)})),l(this,"add",(e=>{const t=this.storage.push(e);return this.storage.store.size===this.parameters.size?this.execute():null===this.interval&&this.timer(),t})),l(this,"remove",(e=>{this.storage.delete(e)})),l(this,"execute",(()=>{this.callback(this.storage.values()),this.reset()})),l(this,"reset",(()=>{this.storage.clear(),null!==this.interval&&clearInterval(this.interval),this.interval=null})),this.storage=new c,this.callback=t,this.parameters=e}}var u=n("./src/shared/Stores/context.ts");function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g{constructor({DTID:e,logger:t=new s.Oc("DVWebNode:ClickstreamClient"),batchParameters:n,homeRegion:i}){p(this,"DTID",void 0),p(this,"context",void 0),p(this,"serviceClient",void 0),p(this,"queue",void 0),p(this,"logger",void 0),p(this,"homeRegion",void 0),p(this,"buildURL",(()=>{const e=new URLSearchParams({...(0,o.B$)(this.context),deviceTypeID:this.DTID,firmware:"DVWebNode"});return`${(0,o.WA)(this.context,this.homeRegion)}/${g.CLICKSTREAM_URL}?${e.toString()}`})),p(this,"buildEntry",((e,t)=>Object.assign(t,{hitType:e,startTime:Date.now(),deviceTypeId:this.DTID}))),p(this,"getAdditionalParameters",(()=>({isStressTest:String(Boolean(this.context.isTest)),clientIp:this.context.customerIPAddress,currentClientTime:Date.now(),currentTerritory:this.context.currentTerritory,customerId:this.context.customerID,deviceId:this.context.deviceID,deviceTypeId:this.DTID,identityContext:this.context.identityContext,marketplaceId:this.context.marketplaceID,preferredLanguage:this.context.locale,sessionId:this.context.sessionID,videoCountryOfRecord:this.context.recordTerritory}))),p(this,"call",(async e=>{const t=JSON.stringify({EntryList:e,...this.getAdditionalParameters()});try{await this.serviceClient.post({operationName:a.n.Clickstream,uri:this.buildURL(),opts:{credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:t}},g.strategy)}catch(e){}})),p(this,"hit",(({pageType:e,subPageType:t,clientVariant:n,refMarker:o,pageTypeId:i,A9SearchFields:a,weblabs:s})=>{const l=this.buildEntry(r.qB.PageHit,{action:r.W0.Click,pageType:e,subPageType:t,clientVariant:n,...o&&{refMarker:o},...i&&{pageTypeId:i},...a&&{A9SearchFields:a},...s&&{Weblabs:s}});this.queue.add(l)})),p(this,"hva",(({pageType:e,subPageType:t,action:n,clientVariant:o,refMarker:i,pageTypeId:a,hitType:s,A9SearchFields:l,additionalData:c,weblabs:d})=>{const u=this.buildEntry(null!=s?s:r.qB.PageTouch,{action:n,pageType:e,subPageType:t,clientVariant:o,...i&&{refMarker:i},...a&&{pageTypeId:a},...l&&{A9SearchFields:l},...c&&{additionalData:c},...d&&{Weblabs:d}});this.queue.add(u)})),this.context=(0,u.getRequestContext)(),this.DTID=e,this.logger=t,this.serviceClient=new a.v({logger:t,logErrorAsWarning:!0}),this.queue=new d(n,this.call),this.homeRegion=i}}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}p(g,"CLICKSTREAM_URL","cdp/usage/Clickstream"),p(g,"strategy",{maxRetries:0,retryOnException:()=>!1});const h={size:1,duration:1};class v extends g{constructor({homeRegion:e,logger:t}){super({DTID:v.getDTID(),logger:t,homeRegion:e,batchParameters:v.getBatchParameters()}),m(this,"previousParameters",void 0),m(this,"onNavigation",void 0),m(this,"backButtonData",void 0),m(this,"getClientVariant",(e=>r.sW[e]?r.sW[e][r.KU.Web]:r.Nb.Unknown)),m(this,"getA9SearchFields",(()=>{var e;const t=new URLSearchParams(window.location.search),n=e=>{if(null===e)return null;const t=parseInt(e,10);return isNaN(t)?null:t},r=n(t.get("qid")),o=t.get("sr"),i=null===o?null:n(o.split("-")[1]);return null!==r&&null!==i&&i>0?{qid:r,searchPositionIndex:i,keyword:null!==(e=t.get("keywords"))&&void 0!==e?e:""}:void 0})),m(this,"getRefmarker",(()=>{const e=window.location.href.match(i.oA);return e&&e[1]||"atv_unknown"})),m(this,"getParameters",((e,t,n,r)=>({pageType:e,subPageType:t,refMarker:n||this.getRefmarker(),clientVariant:r||this.getClientVariant(e),A9SearchFields:this.getA9SearchFields()}))),m(this,"recordBackButton",(()=>{const e=this.getRefmarker();this.backButtonData={ref:e+"_back",hitType:r.qB.BackForwardButton}})),m(this,"clearBackButton",(()=>{this.backButtonData=void 0})),m(this,"navigation",(e=>{const{pType:t,sPageType:n,ref:o,pageTypeId:i,weblabs:a}=e;try{const{pageType:e,subPageType:s,refMarker:l,clientVariant:c,A9SearchFields:d}=this.getParameters(t,n,o);this.previousParameters={pageType:e,subPageType:s,refMarker:l,clientVariant:c,A9SearchFields:d},this.backButtonData&&(this.hva({pageType:e,subPageType:s,action:r.W0.Back,clientVariant:c,refMarker:this.backButtonData.ref,pageTypeId:i,hitType:this.backButtonData.hitType,A9SearchFields:d,weblabs:a}),this.clearBackButton()),this.hit({pageType:e,subPageType:s,clientVariant:c,refMarker:l,pageTypeId:i,A9SearchFields:d,weblabs:a}),this.onNavigation&&this.onNavigation({pageType:e,subPageType:s})}catch(e){this.logger.warn("PVClickstream navigation() error",e)}})),m(this,"action",(e=>{const{action:t,pType:n,sPageType:r,ref:o,pageTypeId:i,hitType:a,clientVariantOverride:s,additionalData:l}=e;try{const{pageType:e,subPageType:c,refMarker:d,clientVariant:u}=n&&r?this.getParameters(n,r,o,s):this.previousParameters;this.previousParameters={pageType:e,subPageType:c,refMarker:d,clientVariant:u},this.hva({pageType:e,subPageType:c,action:t,clientVariant:null!=s?s:u,hitType:a,refMarker:null!=o?o:d,pageTypeId:i,additionalData:l})}catch(e){this.logger.warn("PVClickstream action() error",e)}})),m(this,"setOnNavigation",(e=>this.onNavigation=e)),this.previousParameters={pageType:r.c7.ATVUnknown,subPageType:r.wW.Unknown,clientVariant:r.cf.Unknown,refMarker:"atv_unknown"}}}m(v,"getBatchParameters",(()=>h)),m(v,"getDTID",(()=>o.V4.WEB));let f=null;const y=e=>(null!=f&&void 0===e||(f=new v(e||{})),f)},"./src/shared/deviceProxy/ServiceClientBase.ts":(e,t,n)=>{n.d(t,{n:()=>c,v:()=>u});var r=n("./src/util/api/util.ts"),o=n("./src/shared/utils/metrics/metricTypes.ts"),i=n("./src/shared/Stores/context.ts"),a=n("./src/util/utils/network.ts");function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l={credentials:"include",headers:{},body:void 0};let c=function(e){return e.Clickstream="Clickstream",e.ConsumeRental="ConsumeRental",e.Release="Release",e.Sync="Sync",e.UpdateStream="UpdateStream",e.RecordIASFeedback="RecordIASFeedback",e.ReportCustomerAction="ReportCustomerAction",e}({});const d={Clickstream:o.$E.CallClickStream,ConsumeRental:o.$E.CallConsumeRental,Release:o.$E.CallRelease,Sync:o.$E.CallSync,UpdateStream:o.$E.CallUpdateStream,RecordIASFeedback:o.$E.CallClickStream,ReportCustomerAction:o.$E.CallClickStream};class u{constructor({logger:e,retryLogic:t,logErrorAsWarning:n=!1}){s(this,"context",void 0),s(this,"logger",void 0),s(this,"retryLogic",void 0),s(this,"logErrorAsWarning",void 0),s(this,"defaultRetryCondition",(()=>!1)),s(this,"logError",((e,t,n)=>{this.logErrorAsWarning?this.logger.warn(t,{errorMessage:null==e?void 0:e.message,...n}):this.logger.error(t,{errorMessage:null==e?void 0:e.message,...n})})),this.context=(0,i.getRequestContext)(),this.logger=e;const r={maxRetries:0,retryOnStatusCode:this.defaultRetryCondition,retryOnException:this.defaultRetryCondition,retryOnDeserializationException:this.defaultRetryCondition};this.retryLogic={...r,...t},this.logErrorAsWarning=n}sleep(e){return new Promise((t=>setTimeout(t,e)))}async get(e,t){const n={...e.opts,method:"GET"};return this.call(null==e?void 0:e.operationName,this.buildURL(e.uri,e.query),n,t)}async post(e,t){const n={...e.opts,method:"POST"};return this.call(null==e?void 0:e.operationName,this.buildURL(e.uri,e.query),n,t)}buildURL(e,t={}){let n;try{n=new URL(e)}catch(t){n=new URL(e,window.location.origin)}for(const e in t)n.searchParams.set(e,`${t[e]}`);return n.toString().replace(/\/$/,"")}constructPostRequest({body:e,...t}){return{...l,...t,body:e?JSON.stringify(e):void 0}}async call(e,t,n,r){const i={...this.retryLogic,...r};let a=0;do{const r={};try{if(a>0&&i.backoffStrategy){const e=i.backoffStrategy(a);await this.sleep(e)}const o=await this.fetchResponse(e,t,n,r);let s=await this.parseResponse(e,o,r);return r.Success=1,s}catch(o){if(this.shouldRetry(o,t,n,e,r,i)&&a!=i.maxRetries)continue;throw r.Failure=1,o}finally{0!=a&&(r.Retry=1),void 0!==e?this.logger.count(d[e],r):this.logger.count(o.$E.CallUndefined,r),a++}}while(a<=((null==i?void 0:i.maxRetries)||0));return Promise.reject()}async parseResponse(e,t,n){let o;try{o=await t.json()}catch(t){const o=new r.xU(t.message);throw this.logError(o,"Could not parse response",{operationName:e}),n.DeserializationException=1,o}return o}async fetchResponse(e,t,n,i){const a=Date.now(),s=await fetch(t,n);if(i.Latency=Date.now()-a,i[`StatusCode_${s.status}`]=1,!s.ok){const n=await s.text(),a=new r.jZ(n,s.status);throw 400===s.status?this.logger.count(o.l4.FetchResponseCode400,i):403===s.status?this.logger.count(o.l4.FetchResponseCode403,i):this.logError(a,"Non 2xx status code received",{statusCode:s.status,operationName:e,url:t,marketplaceId:this.context.marketplaceID,currentTerritory:this.context.currentTerritory,recordTerritory:this.context.recordTerritory,geoToken:this.context.geoToken,location:window.location.href}),a}return s}shouldRetry(e,t,n,o,i,s){return e instanceof r.jZ&&s&&s.retryOnStatusCode?s.retryOnStatusCode(e,t,n):e instanceof r.xU&&s&&s.retryOnDeserializationException?s.retryOnDeserializationException(e,t,n):(a.Zc.isOnline(!0)?i.Exception=1:i.NetworkException=1,this.logError(e,`${n.method} request threw an exception`,{url:t,operationName:o}),!(!s||!s.retryOnException)&&s.retryOnException(e,t,n))}}},"./src/shared/deviceProxy/marketplaceUtils.ts":(e,t,n)=>{n.r(t),n.d(t,{getCompanyName:()=>s,getDeviceProxyEndpoint:()=>o,getRatingBadgeLocale:()=>l,getRegionFromMarketplaceId:()=>i,getStringFromMarketplaceId:()=>a});var r=n("./src/util/utils/marketplace.ts");const o=(e,t)=>{let n="";switch(n=(0,r.is)()===r.wQ.ROW&&t?t:i(e),n){case r.yp.EU:return`atv-ps-eu${(0,r.is)()}`;case r.yp.FE:return`atv-ps-fe${(0,r.is)()}`;case r.yp.NA:default:return`atv-ps${(0,r.is)()}`}},i=e=>{switch(e){case r.HZ.UK:case r.HZ.DE:case r.HZ.ROW_EU:case r.HZ.ROE_EU:return r.yp.EU;case r.HZ.JP:case r.HZ.ROW_FE:return r.yp.FE;case r.HZ.US:case r.HZ.ROW_NA:default:return r.yp.NA}},a=e=>{switch(e){case r.HZ.UK:return"UK";case r.HZ.DE:return"DE";case r.HZ.ROW_EU:return"ROWEU";case r.HZ.ROE_EU:return"ROEEU";case r.HZ.JP:return"JP";case r.HZ.ROW_FE:return"ROWFE";case r.HZ.US:return"US";case r.HZ.ROW_NA:return"ROWNA";default:return"UNKNOWN"}},s=e=>{switch(e){case r.HZ.UK:return"Amazon Digital UK Limited";case r.HZ.DE:return"Amazon.com Int'l Sales, Inc";case r.HZ.JP:return"Amazon.com Sales, Inc";case r.HZ.US:default:return"Amazon.com Services LLC"}},l=e=>{switch(e){case r.HZ.UK:return"uk";case r.HZ.DE:return"de";default:return}}},"./src/shared/inspector.ts":(e,t,n)=>{n.d(t,{G:()=>a,Jl:()=>l,Kt:()=>r,R7:()=>c,a5:()=>o,d4:()=>s,iV:()=>i});const r="avInspectorWidgetMounted",o="avInspectorPageLoad",i="avInspectorWidgetMount",a="avInspectorAjaxStart",s="avInspectorAjaxSuccess",l="avInspectorAjaxDrop",c="avInspectorWidgetWebSpaNavigation"},"./src/shared/player/integration/playerStatus.ts":(e,t,n)=>{n.d(t,{M:()=>i,k:()=>o});let r=!1;const o=e=>{r=e},i=()=>r},"./src/shared/utils/metrics/metricTypes.ts":(e,t,n)=>{n.d(t,{$E:()=>a,B:()=>r,l4:()=>i,p1:()=>o});let r=function(e){return e.DownloadActionCancelled="DownloadAction.Cancelled",e.DownloadActionDeleted="DownloadAction.Deleted",e.DownloadActionSeasonDownloadCancelled="DownloadAction.SeasonDownloadCancelled",e.DownloadActionDisable="DownloadAction:Disable",e.DownloadActionEnable="DownloadAction:Enable",e.DownloadActionResume="DownloadAction:Resume",e.DownloadActionHold="DownloadAction:Hold",e.DownloadActionPause="DownloadAction:Pause",e.DownloadActionRefresh="DownloadAction:Refresh",e.DownloadActionRemove="DownloadAction:Remove",e.DownloadActionRetry="DownloadAction:Retry",e.DownloadActionRelease="DownloadAction:Release",e.DownloadActionStarted="DownloadAction:Started",e.HeartbeatXPDownloads="DownloadActive:XP",e.DownloadEventCompleted="DownloadEvent.Completed",e.DownloadEventFailed="DownloadEvent.Failed",e.DownloadEventDownloadError="DownloadEvent:DownloadError",e.DownloadEventStatusChange="DownloadEvent:StatusChange",e.DownloadEventLocalContentError="DownloadEvent:LocalContentError",e.DownloadEventRefreshed="DownloadEvent:Refreshed",e.DownloadEventRefreshing="DownloadEvent:Refreshing",e.DownloadEventRefreshError="DownloadEvent:RefreshError",e.DownloadEventProgress="DownloadEvent:Progress",e.DownloadEventTriggered="DownloadEvent:Triggered",e.DownloadOfflineDataSavingError="offline-data-saving-error",e.DownloadReportNoDownloads="dl-no-downloads",e.DownloadReportNoDownloadsButMetadata="dl-no-downloads-but-metadata",e.DownloadReportNoMetadataButDownloads="dl-no-metadata-but-downloads",e.DownloadReportNoMetadata="dl-no-metadata",e.DownloadReportNoDownloadsNoMetadata="dl-nothing",e.DownloadAdditionalLanguageDefault="download-additional-language-default",e.DownloadQualityDefault="download-download-quality-default",e.DownloadQualityDownloadSettingsPage="download-quality:settings-page",e.DownloadQualityDownloadSettingsModal="download-quality:download-settings-modal",e.DownloadSettingsModalDownloadQualityTabOpened="download-settings-modal-download-quality-tab-opened",e.DownloadSettingsModalLanguageTabOpened="download-settings-modal-language-tab-opened",e.DownloadSettingsModalDownloadStart="download-settings-modal:download-start",e.DownloadSettingsModalOpen="download-settings-modal:open",e.DownloadMissingAudioTracks="missing-audio-tracks",e.DownloadMultiDeleteRequested="multi-delete-requested",e.DownloadMissingDownloadsMetadata="missing-downloads-metadata",e.RepopulateDownloadMetadata="DownloadReport.RepopulateDownloadMetadata",e.DownloadNoAction="download-no-action",e.GetAllDownloadOperations="GetAllDownloadOperations",e.XPDownloadTimingDownloadsMetadataReceived="xp-download-timing:downloads-metadata-received",e.XPDownloadTimingDownloadsPayloadConstructed="xp-download-timing:downloads-payload-constructed",e.XPDownloadTimingLCMLoaded="xp-download-timing:lcm-loaded",e.XPDownloadTimingOperationsDataReceived="xp-download-timing:operations-data-received",e.XPDownloadTimingSDKLoaded="xp-download-timing:sdk-loaded",e.EditDownloadsClicked="edit-clicked",e.DownloadFallBackStreaming="fallback-streaming",e}({}),o=function(e){return e.PlaybackOrigin="PlaybackOrigin",e.PlaybackOriginNativePlayback="PlaybackOrigin:NativePlayback",e.PlaybackOriginXpPlayback="PlaybackOrigin:XpPlayback",e.PlaybackTitleIdMismatch="playback-title-id-mismatch",e}({}),i=function(e){return e.SWClearCache="sw-clear-cache",e.AssetLoadingFailed="AssetLoadingFailed",e.CXBlockingErrorRecovered="CXBlockingErrorRecovered",e.CXBlockingErrorUnknown="CXBlockingErrorUnknown",e.ChunkFailedToLoad="ChunkFailedToLoad",e.FetchResponseCode400="HTTP:400",e.FetchResponseCode403="HTTP:403",e.LogoutActionTimeout="LogoutAction-Timeout",e.ProfileSwitch="ProfileSwitch",e.SPAInitialisation="SPAInitialisation",e.Deeplink="deeplink",e.DeeplinkAction="deeplinkAction",e.NavBarToggle="navigationBar:toggle",e.ProfilesModalOpen="profilesModal:open",e.SpaEPAReload="spa-epa-reload",e.UXLanguageChangeShowErrorBanner="uxLanguageChange-show-error-banner",e.WidgetMount="widget-mount",e.AppUpdateBannerAction="AppUpdateBannerAction",e.AppUpdateSunsetAction="AppUpdateSunsetAction",e}({}),a=function(e){return e.CallClickStream="Call:Clickstream",e.CallConsumeRental="Call:ConsumeRental",e.CallRelease="Call:Release",e.CallSync="Call:Sync",e.CallUpdateStream="Call:UpdateStream",e.CallUndefined="Call:Undefined",e.SyncDisable="Sync:Disable",e.SyncRefresh="Sync:Refresh",e.SyncDelete="Sync:Delete",e.SyncNoAction="Sync:NoAction",e.SyncUnknown="Sync:Unknown",e}({})},"./src/shared/utils/setContextFromInlineScript.ts":(e,t,n)=>{n.d(t,{j:()=>i});var r=n("./node_modules/zustand/esm/vanilla.mjs"),o=n("./src/util/utils/htmlEncode.ts");const i=()=>{var e;window.DVWebNode||(window.DVWebNode={perfMetrics:{}}),window.DVWebNode.stores||(window.DVWebNode.stores=(0,r.M)((()=>({context:void 0}))));const t=null===(e=document.getElementById("dvwebnode-context"))||void 0===e?void 0:e.innerHTML;if(t)try{const e=JSON.parse((0,o.He)(t)),n=(0,o.Mt)(e),r=(0,o.ob)(n);return window.DVWebNode.stores.setState({context:r}),r}catch(e){"undefined"!=typeof window&&window.ueLogError&&window.ueLogError(e,{logLevel:"ERROR",message:"Unable to parse RequestContext in inline-head-start-scripts"})}else"undefined"!=typeof window&&window.ueLogError&&window.ueLogError(new Error("Element with id=dvwebnode-context not found"),{logLevel:"ERROR",message:"Unable to parse RequestContext in inline-head-start-scripts"})}},"./src/util/utils/url.ts":(e,t,n)=>{n.d(t,{DX:()=>i,V_:()=>o});var r=n("./src/util/utils/history.ts");const o=e=>{if(window&&window.location.search){const t=((e,t)=>e?(e.startsWith("?")?e.slice(1):e).split("&").map((e=>e.split("="))).filter((e=>!t.has(e[0]))).map((e=>void 0===e[1]?e[0]:e.join("="))).join("&"):"")(window.location.search,e),n=t?`?${t}`:"";n!==window.location.search&&(0,r.lO)(null,"",`${window.location.origin}${window.location.pathname}${n}`)}},i=e=>{const t={};for(let n of e.keys())t[n]=e.getAll(n);return t}},"./src/widgets/DVWebNodeWebSPARoot/data/strings.ts":(e,t,n)=>{n.d(t,{DM:()=>a,RF:()=>c,qh:()=>l,wJ:()=>s});var r=n("./node_modules/uuid/dist/esm-browser/v5.js"),o=n("./src/shared/Stores/context.ts");const i="0ab8c76d-ffa5-406e-9d26-cc3bddffbd2a",a="Prime Video",s=e=>{const{identityContext:t}=(0,o.getRequestContext)(),n=[t||"0|",e].join(":");return(0,r.Z)(n,i)},l=e=>{const{identityContext:t,path:n,queryParameters:a}=(0,o.getRequestContext)(),s=[t||"0|",n,Object.keys(a),Object.values(a),e].join(":");return(0,r.Z)(s,i)},c="1.0.95871.0"},"./src/widgets/DVWebNodeWebSPARoot/types/index.ts":(e,t,n)=>{n.d(t,{lp:()=>r,JB:()=>o,wG:()=>i});let r=function(e){return e.DEMO="DEMO",e.VOD_DETAIL_PAGE="VOD_DETAIL_PAGE",e.LIVE_DETAIL_PAGE="LIVE_DETAIL_PAGE",e.LANDING_PAGE="LANDING_PAGE",e.BROWSE="BROWSE",e.GENRE="GENRE",e.CATEGORIES="CATEGORIES",e.SEARCH="SEARCH",e.MY_STUFF="MY_STUFF",e.PERSON="PERSON",e}({}),o=function(e){return e.DEMO="demo",e.DETAIL="detail",e.LANDING_PAGE="landing-page",e.BROWSE="browse",e.CATEGORIES="categories",e.GENRE="genre",e.SEARCH="search",e.MY_STUFF="my-stuff",e.MY_STUFF_WATCHLIST="my-stuff-watchlist",e.MY_STUFF_LIBRARY="my-stuff-library",e.PERSON="person",e}({});const i={[o.DEMO]:[r.DEMO],[o.DETAIL]:[r.VOD_DETAIL_PAGE,r.LIVE_DETAIL_PAGE],[o.LANDING_PAGE]:[r.LANDING_PAGE],[o.BROWSE]:[r.BROWSE],[o.CATEGORIES]:[r.CATEGORIES],[o.GENRE]:[r.GENRE],[o.SEARCH]:[r.SEARCH],[o.MY_STUFF]:[r.MY_STUFF],[o.MY_STUFF_WATCHLIST]:[r.MY_STUFF],[o.MY_STUFF_LIBRARY]:[r.MY_STUFF],[o.PERSON]:[r.PERSON]}},"./src/widgets/DVWebNodeWebSPARoot/util/args.ts":(e,t,n)=>{n.d(t,{h:()=>r,p:()=>o});const r=e=>{const{apexes:t=[],siteWideApexes:n,config:r={},initPath:o,disableServerRouterInit:i,pageType:a,subPageType:s,pageTypeId:l,pageTitle:c,serverConfig:d,...u}=e;return{webSpaArgs:{apexes:t,siteWideApexes:n,config:r,pageType:a,subPageType:s,pageTypeId:l,pageTitle:c,disableServerRouterInit:i,serverConfig:d},appArgs:u}},o=e=>{const{context:t,siteWideWeblabs:n,render:r}=e;return{baseArgs:{siteWideWeblabs:n,render:r},context:t}}},"./node_modules/@babel/runtime/helpers/esm/extends.js":(e,t,n)=>{function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:()=>r})},"./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js":(e,t,n)=>{function r(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}n.d(t,{Z:()=>r})}},e=>{var t=t=>e(e.s=t);e.O(0,[1216],(()=>(t("./node_modules/wicg-inert/dist/inert.esm.js"),t("./src/entrypoints/hydration/web-spa-root.ts"))));e.O()}]);
//# sourceMappingURL=http://sourcemaps.aka.amazon.com/020823bebc49b2706b271da017465c72875f872840e7827ec6cd1c5738c052eef78997d68277c66510435a669f7a687b6e61a0e99c372be48be9f83c6544c24e962512a4cec26dd0e42168343190b487fafe9d915da873e9d0bd4895f7ce30353d30e456a81d1c12651b44b20f02928de46a29d0169602c3a339dd2d515ff9917b156d5f03c67daec3928775299ceb62180106872be12c03477310f7148d3187c2f7ca38c6d85c215f4c303032549af03013eb45cdd0dd4eb684c945b96ffe4cfb0ac058c10062b679ae5d7b3aa54382ce55b71405389aedf37252eb95b9cf25ddee042249b592545db9b10e24fc124a338a4d2a3e855d563097979513d3d41c?np=1