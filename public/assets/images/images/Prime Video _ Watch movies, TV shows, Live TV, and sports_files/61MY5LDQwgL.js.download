"use strict";(self.webpackChunk_amzn_dvwebnode=self.webpackChunk_amzn_dvwebnode||[]).push([[4918],{"./node_modules/@amzn/kirup/dist/src/@types/configuration.js":(e,t)=>{var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.Transports=t.Environment=void 0,function(e){e[e.DOM=1]="DOM",e[e.NODE=2]="NODE",e[e.WEBWORKER=3]="WEBWORKER",e[e.SERVICEWORKER=4]="SERVICEWORKER"}(r||(t.Environment=r={})),function(e){e[e.MINERVA=1]="MINERVA",e[e.METRICAGENT=2]="METRICAGENT",e[e.INSIGHTS=3]="INSIGHTS",e[e.CONSOLE=4]="CONSOLE",e[e.RTLA=5]="RTLA"}(n||(t.Transports=n={}))},"./node_modules/@amzn/kirup/dist/src/@types/kirup.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LogTypes=void 0,t.LogTypes=["debug","info","warn","error","fatal","count"]},"./node_modules/@amzn/kirup/dist/src/browser.js":function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.RTLA_RECOMMENDED=t.INSIGHTS_RECOMMENDED=t.MINERVA_RECOMMENDED=t.CONSOLE_RECOMMENDED=t.KirupLogger=void 0;var i=r("./node_modules/@amzn/kirup/dist/src/kirup.browser.js");Object.defineProperty(t,"KirupLogger",{enumerable:!0,get:function(){return i.KirupLogger}});var a=r("./node_modules/@amzn/kirup/dist/src/configuration/console.js");Object.defineProperty(t,"CONSOLE_RECOMMENDED",{enumerable:!0,get:function(){return a.CONSOLE_RECOMMENDED}});var s=r("./node_modules/@amzn/kirup/dist/src/configuration/minerva.js");Object.defineProperty(t,"MINERVA_RECOMMENDED",{enumerable:!0,get:function(){return s.MINERVA_RECOMMENDED}});var l=r("./node_modules/@amzn/kirup/dist/src/configuration/insights.js");Object.defineProperty(t,"INSIGHTS_RECOMMENDED",{enumerable:!0,get:function(){return l.INSIGHTS_RECOMMENDED}});var c=r("./node_modules/@amzn/kirup/dist/src/configuration/rtla.js");Object.defineProperty(t,"RTLA_RECOMMENDED",{enumerable:!0,get:function(){return c.RTLA_RECOMMENDED}}),o(r("./node_modules/@amzn/kirup/dist/src/@types/configuration.js"),t)},"./node_modules/@amzn/kirup/dist/src/configuration/console.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CONSOLE_RECOMMENDED=void 0;const n=r("./node_modules/@amzn/kirup/dist/src/@types/configuration.js");t.CONSOLE_RECOMMENDED={name:n.Transports.CONSOLE,support:[n.Environment.DOM,n.Environment.NODE],persistence:!1,canHandleErrorObject:!0,retries:0,maxDataAge:3e5,maxRateLimit:1e4,maxBatchSize:0}},"./node_modules/@amzn/kirup/dist/src/configuration/insights.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INSIGHTS_RECOMMENDED=void 0;const n=r("./node_modules/@amzn/kirup/dist/src/@types/configuration.js");t.INSIGHTS_RECOMMENDED={name:n.Transports.INSIGHTS,support:[n.Environment.DOM],persistence:!1,canHandleErrorObject:!1,retries:3,maxDataAge:3e5,maxRateLimit:1e4,maxBatchSize:20}},"./node_modules/@amzn/kirup/dist/src/configuration/minerva.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MINERVA_RECOMMENDED=void 0;const n=r("./node_modules/@amzn/kirup/dist/src/@types/configuration.js");t.MINERVA_RECOMMENDED={name:n.Transports.MINERVA,support:[n.Environment.DOM,n.Environment.SERVICEWORKER,n.Environment.WEBWORKER],persistence:!0,canHandleErrorObject:!0,retries:3,maxDataAge:3e5,maxRateLimit:1e4,maxBatchSize:100}},"./node_modules/@amzn/kirup/dist/src/configuration/rtla.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RTLA_RECOMMENDED=void 0;const n=r("./node_modules/@amzn/kirup/dist/src/@types/configuration.js");t.RTLA_RECOMMENDED={name:n.Transports.RTLA,support:[n.Environment.DOM],persistence:!1,canHandleErrorObject:!1,retries:3,maxDataAge:3e5,maxRateLimit:1e4,maxBatchSize:20}},"./node_modules/@amzn/kirup/dist/src/events.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KirupEvents=void 0;t.KirupEvents=class{constructor(e){this.action=e,this.onWindowLoad=this.onWindowLoad.bind(this),this.onDocumentVisibilityChange=this.onDocumentVisibilityChange.bind(this),this.onDocumentPageHide=this.onDocumentPageHide.bind(this),this.attach()}attach(){document.addEventListener("visibilitychange",this.onDocumentVisibilityChange),document.addEventListener("pagehide",this.onDocumentPageHide),window.addEventListener("load",this.onWindowLoad)}onDocumentVisibilityChange(){this.action()}onDocumentPageHide(){this.action()}onWindowLoad(){this.action()}}},"./node_modules/@amzn/kirup/dist/src/kirup.browser.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KirupLogger=void 0;const n=r("./node_modules/@amzn/kirup/dist/src/kirup.js"),o=r("./node_modules/@amzn/kirup/dist/src/transports/transport.js"),i=r("./node_modules/@amzn/kirup/dist/src/transports/transport.browser.js");class a extends n.KirupLoggerBase{constructor(e){super(e,o.KirupTransport,i.loadTransportFromConfig)}}t.KirupLogger=a},"./node_modules/@amzn/kirup/dist/src/kirup.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KirupLoggerBase=void 0;const n=r("./node_modules/@amzn/kirup/dist/src/@types/configuration.js"),o=r("./node_modules/@amzn/kirup/dist/src/events.js"),i=r("./node_modules/@amzn/kirup/dist/src/latency.js"),a=r("./node_modules/@amzn/kirup/dist/src/storage.js"),s=r("./node_modules/@amzn/kirup/dist/src/utils/environment.js"),l=r("./node_modules/@amzn/kirup/dist/src/utils/promises.js"),c=r("./node_modules/@amzn/kirup/dist/src/utils/store.js"),d=r("./node_modules/@amzn/kirup/dist/src/utils/variables.js"),u=[n.Environment.DOM],g=[n.Environment.DOM,n.Environment.WEBWORKER,n.Environment.SERVICEWORKER],m=[n.Environment.DOM,n.Environment.WEBWORKER,n.Environment.SERVICEWORKER],p={warn:"Warning",error:"Error",fatal:"Fatal"},h={domain:"Unknown",id:"Unknown"};t.KirupLoggerBase=class{constructor(e,t,r){if(this._env=(0,s.getCurrentEnvironment)(),this._config=this._applyConfiguration(e),this._transports=this._getTransports(t,r),this._processAllStoreEntries=this._processAllStoreEntries.bind(this),this._processStoreEntries=this._processStoreEntries.bind(this),u.includes(this._env)&&new o.KirupEvents(this._processAllStoreEntries),g.includes(this._env))this._storage=new a.KirupStorage;else if(this._transports.withPersistence.length>0)throw new Error(`Provided configuration includes persistence enabled transports. Environment ${this._env} does not support persistence.`);this.latency=new i.Latency(this._env,this._transports.all)}_applyConfiguration(e){return Object.assign(e,{transports:e.transports.filter((e=>e.support.includes(this._env)))})}_getTransports(e,t){const r=[],n=[];return this._config.transports.forEach((o=>{const i=new e(o,t);r.push(i),o.persistence&&n.push(i)})),{all:r,withPersistence:n}}async _processStoreEntries(e){var t,r,n;null===(r=(t=e.instance).clearSchedule)||void 0===r||r.call(t),await(null===(n=this._storage)||void 0===n?void 0:n.retrieveAndUpdate(e.config.name.toString(),e.config,(t=>{var r,n;return(null===(n=(r=e.instance).batch)||void 0===n?void 0:n.call(r,t))||{newStore:t}})))}async _processAllStoreEntries(){for(const e of this._transports.withPersistence)await this._processStoreEntries(e)}async _processStore(e,t){var r,n;(0,c.getStoreSize)(t)>=e.config.maxBatchSize?await this._processStoreEntries(e):null===(n=(r=e.instance).scheduleNextProcessing)||void 0===n||n.call(r,(()=>this._processStoreEntries(e)))}async _log(e,t,...r){var o,i;let a,s;const l=null===(i=(o=e.config).pageContext)||void 0===i?void 0:i.call(o);switch(t){case"count":{const n=[...r,l];a=()=>e.instance[t](...n),s=()=>{var r,o;return null===(o=(r=e.config).postLogAction)||void 0===o?void 0:o.call(r,t,n[0],n[1]||1,this)};break}case"debug":case"info":{const n=[...r,l];a=()=>e.instance[t](...n),s=()=>{var r,o;return null===(o=(r=e.config).postLogAction)||void 0===o?void 0:o.call(r,t,n[0])};break}case"warn":case"error":case"fatal":{const o=[...r,l],[i,c,u]=o;a=()=>e.instance[t](...o),s=()=>{var r,i,a;if(null===(i=(r=e.config).postLogAction)||void 0===i||i.call(r,t,o[0]),this._env===n.Environment.NODE){const r=null===(a=[c,u].find(d.isVariables))||void 0===a?void 0:a.logID,n=r||h;e.instance.count(["LogID",p[t],n.domain,n.id].join("_"),void 0,void 0,l),e.instance.count([p[t],n.id].join("_"),void 0,void 0,l)}};break}}if(void 0===e.config.allowLogType||e.config.allowLogType.includes(t))if(e.config.persistence&&this._storage){const n=await this._storage.add(e.config.name.toString(),t,[...r,l]);await this._processStore(e,n)}else null==a||a();null==s||s()}_reportLogFailure(e,t){m.includes(this._env)&&console.error(`Log failure for transport ${e.config.name.toString()};`,t)}count(e,t,r){this._transports.all.forEach((n=>(0,l.fireAndForgetPromise)((()=>this._log(n,"count",e,t,r)),(e=>this._reportLogFailure(n,e)))))}fatal(e,t,r){this._transports.all.forEach((n=>(0,l.fireAndForgetPromise)((()=>this._log(n,"fatal",e,t,r)),(e=>this._reportLogFailure(n,e)))))}error(e,t,r){this._transports.all.forEach((n=>(0,l.fireAndForgetPromise)((()=>this._log(n,"error",e,t,r)),(e=>this._reportLogFailure(n,e)))))}warn(e,t,r){this._transports.all.forEach((n=>(0,l.fireAndForgetPromise)((()=>this._log(n,"warn",e,t,r)),(e=>this._reportLogFailure(n,e)))))}info(e,t){this._transports.all.forEach((r=>(0,l.fireAndForgetPromise)((()=>this._log(r,"info",e,t)),(e=>this._reportLogFailure(r,e)))))}debug(e,t){this._transports.all.forEach((r=>(0,l.fireAndForgetPromise)((()=>this._log(r,"debug",e,t)),(e=>this._reportLogFailure(r,e)))))}}},"./node_modules/@amzn/kirup/dist/src/latency.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Latency=void 0;const n=r("./node_modules/@amzn/kirup/dist/src/@types/configuration.js"),o=r("./node_modules/@amzn/kirup/dist/src/utils/safePerformance.js"),i=["domInteractive","domComplete"];t.Latency=class{constructor(e,t){this._env=e,this._transports=t}navigate(e){void 0===e?o.default.mark(o.NAVIGATION_MARKER):o.default.mark(o.NAVIGATION_MARKER,{navigationType:e})}_hasSameDocumentNavigationOccurred(){var e;const t=o.default.getEntriesByName(o.NAVIGATION_MARKER,"mark"),r=null===(e=null==t?void 0:t[t.length-1])||void 0===e?void 0:e.startTime;return Boolean(r)}_getLastSameDocumentNavigationType(){var e;const t=o.default.getEntriesByName(o.NAVIGATION_MARKER,"mark"),r=null==t?void 0:t[t.length-1],n=r&&(null===(e=o.default.getEntryDetailIfPresent(r))||void 0===e?void 0:e.navigationType);return"string"==typeof n?n:"unknown"}_getCrossDocumentNavigationType(){const e=o.default.getEntriesByType("navigation"),t=null==e?void 0:e[0],r=t&&(null==t?void 0:t.type);return"string"==typeof r?r:"unknown"}_getPerformanceMarkName(e,t,r){if("measure"===r)return`${e}-measure`;return`${e}-${t&&Object.entries(t).map((([e,t])=>`${e}:${t}`)).join("|")||"no-dimensions"}-${r}`}start(e,t){return o.default.mark(this._getPerformanceMarkName(e,t,"start")),this}end(e,t){const r=this._getPerformanceMarkName(e,t,"start"),n=this._getPerformanceMarkName(e,t,"end");o.default.mark(n);const i=this._getPerformanceMarkName(e,t,"measure");if(o.default.getEntriesByName(r,"mark").length){o.default.measure(i,r,n);const a=o.default.getEntriesByName(i,"measure"),s=null==a?void 0:a[a.length-1],l=null==s?void 0:s.duration;l&&this._transports.forEach((r=>{var n,o;if(void 0===r.config.allowLogType||r.config.allowLogType.includes("count")){const i=null===(o=(n=r.config).pageContext)||void 0===o?void 0:o.call(n);r.instance.count(e,l,t,i)}}))}return this}clickToATF(){this.clickToX("atf")}clickToCF(){this.clickToX("cf")}clickToInteractive(){this.clickToX("ci")}clickToX(e){if(this._env!==n.Environment.DOM)throw new Error(`Your environment ${this._env} does not support clickTo* metrics.`);{o.default.mark(e);const t=o.default.legacyCalculateLatency(e);if(null===t)return;this._transports.forEach((r=>{var n,o;if(void 0===r.config.allowLogType||r.config.allowLogType.includes("count")){const i=null===(o=(n=r.config).pageContext)||void 0===o?void 0:o.call(n);r.instance.count(e,t,void 0,i)}}))}}timeToInteractive(e,t="2024-03-22"){this.timeToX("timeToInteractive",e,t)}timeToATF(e){this.timeToX("timeToATF",e)}timeToCF(e){this.timeToX("timeToCF",e)}timeToX(e,t,r){if(this._env!==n.Environment.DOM)throw new Error(`Your environment ${this._env} does not support timeTo* metrics.`);{const n=r?`${e}-${r}`:e;i.includes(e)||o.default.mark(n);const a=o.default.calculateLatency(n);if(null===a||a>6e4)return;const s=this._hasSameDocumentNavigationOccurred(),l=s?"same-document":"cross-document",c=s?this._getLastSameDocumentNavigationType():this._getCrossDocumentNavigationType(),d=t&&Object.entries(t).map((([e,t])=>`${e}=${t}`)).join("|");this._transports.forEach((t=>{var n,o;if(void 0===t.config.allowLogType||t.config.allowLogType.includes("count")){const i=t.config.deviceType||"Desktop",s=null===(o=(n=t.config).pageContext)||void 0===o?void 0:o.call(n);!r||r<="2024-03-22"?(t.instance.count(e,a,{DeviceType:i,NavigationType:c,NavigationMethod:l,Pivot:"NONE",...r?{Version:r}:{}},s),d&&t.instance.count(e,a,{DeviceType:i,NavigationType:c,NavigationMethod:l,Pivot:d,...r?{Version:r}:{}},s)):t.instance.count(e,a,{DeviceType:i,NavigationType:c,NavigationMethod:l,Pivot:d||"NONE",Version:r},s)}}))}}}},"./node_modules/@amzn/kirup/dist/src/storage.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KirupStorage=t.EMPTY_STORE=void 0;const n=r("./node_modules/idb-keyval/dist/index.js"),o=r("./node_modules/@amzn/kirup/dist/src/utils/errorObject.js");let i;t.EMPTY_STORE={debug:[],info:[],warn:[],error:[],fatal:[],count:[]};const a=()=>(i||(i=(0,n.createStore)("kirup","keyval")),i);t.KirupStorage=class{constructor(){this.queue=Promise.resolve(t.EMPTY_STORE)}enqueue(e){return this.queue=this.queue.then((()=>e()),(()=>e())),this.queue}add(e,t,r){return this.enqueue((()=>{let i;return(0,n.update)(e,(e=>{const n=e||{};return n[t]||(n[t]=[]),r[0]instanceof Error&&(r[0]=(0,o.errorToObject)(r[0])),n[t].push({time:Date.now(),args:r}),i=n,i}),a()).then((()=>i))}))}retrieveAndUpdate(e,r,o){return this.enqueue((()=>{let i;return(0,n.update)(e,(e=>{try{i=o(this.preprocess(e,r))}catch(t){i={newStore:e}}return i.newStore=i.newStore||t.EMPTY_STORE,i.newStore}),a()).then((()=>{var e;return null===(e=i.promiseSupplier)||void 0===e?void 0:e.call(i)})).then((()=>i.newStore))}))}preprocess(e,r){var n,i,a,s,l,c;if(!e)return t.EMPTY_STORE;const d=Date.now();return e.count=null===(n=e.count)||void 0===n?void 0:n.filter((e=>d-e.time<r.maxDataAge)),e.debug=null===(i=e.debug)||void 0===i?void 0:i.filter((e=>d-e.time<r.maxDataAge)),e.info=null===(a=e.info)||void 0===a?void 0:a.filter((e=>d-e.time<r.maxDataAge)),e.warn=null===(s=e.warn)||void 0===s?void 0:s.filter((e=>d-e.time<r.maxDataAge)).map((e=>(r.canHandleErrorObject&&e.args&&(0,o.isErrorObject)(e.args[0])&&(e.args[0]=(0,o.objectToError)(e.args[0])),e))),e.error=null===(l=e.error)||void 0===l?void 0:l.filter((e=>d-e.time<r.maxDataAge)).map((e=>(r.canHandleErrorObject&&e.args&&(0,o.isErrorObject)(e.args[0])&&(e.args[0]=(0,o.objectToError)(e.args[0])),e))),e.fatal=null===(c=e.fatal)||void 0===c?void 0:c.filter((e=>d-e.time<r.maxDataAge)).map((e=>(r.canHandleErrorObject&&e.args&&(0,o.isErrorObject)(e.args[0])&&(e.args[0]=(0,o.objectToError)(e.args[0])),e))),e}}},"./node_modules/@amzn/kirup/dist/src/transports/base.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TransportBase=void 0;const n=r("./node_modules/@amzn/kirup/dist/src/utils/promises.js");t.TransportBase=class{constructor(e){this.config=e}scheduleNextProcessing(e){void 0===this.timeout&&(this.timeout=setTimeout((()=>{(0,n.fireAndForgetPromise)((()=>e(this.config.name.toString())))}),this.config.maxRateLimit))}clearSchedule(){clearTimeout(this.timeout),this.timeout=void 0}}},"./node_modules/@amzn/kirup/dist/src/transports/console/console.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r("./node_modules/@amzn/kirup/dist/src/utils/errorOverload.js"),o=r("./node_modules/@amzn/kirup/dist/src/transports/base.js");class i extends o.TransportBase{batch(e){var t,r,n,o,i,a;return e.debug=null===(t=e.debug)||void 0===t?void 0:t.filter((e=>!this.debug(e.args[0],e.args[1]))),e.info=null===(r=e.info)||void 0===r?void 0:r.filter((e=>!this.info(e.args[0],e.args[1]))),e.warn=null===(n=e.warn)||void 0===n?void 0:n.filter((e=>!this.warn(e.args[0],e.args[1],e.args[2]))),e.error=null===(o=e.error)||void 0===o?void 0:o.filter((e=>!this.error(e.args[0],e.args[1],e.args[2]))),e.fatal=null===(i=e.fatal)||void 0===i?void 0:i.filter((e=>!this.fatal(e.args[0],e.args[1],e.args[2]))),e.count=null===(a=e.count)||void 0===a?void 0:a.filter((e=>!this.count(e.args[0],e.args[1],e.args[2]))),{newStore:e}}count(e,t,r){return"number"==typeof t&&r?this._countDimensionValue(e,t,r):"number"==typeof t?this._countValue(e,t):t&&!r?this._countDimension(e,t):this._countName(e),!0}_countName(e){console.log(`count: ${e}`)}_countValue(e,t){console.log(`count: ${e}, value: ${t}`)}_countDimension(e,t){console.log(`count: ${e}, dimensions: `,t)}_countDimensionValue(e,t,r){console.log(`count: ${e}, value: ${t}, dimensions: `,r)}fatal(e,t,r){return n.untangleOverload.call(this,"fatal",e,t,r),!0}_fatalMessage(e){console.error(`fatal: ${e}`)}_fatalWithError(e){console.error(e)}_fatalWithErrorAndMessage(e,t){console.error(`fatal: ${e}`,t)}_fatalWithVariables(e,t){console.error(`fatal: ${e}`,t)}_fatalWithErrorAndVariables(e,t,r){console.error(`fatal: ${e}`,t,r)}error(e,t,r){return n.untangleOverload.call(this,"error",e,t,r),!0}_errorMessage(e){console.error(`error: ${e}`)}_errorWithErrorAndMessage(e,t){console.error(`error: ${e}`,t)}_errorWithError(e){console.error(e)}_errorWithVariables(e,t){console.error(`error: ${e}`,t)}_errorWithErrorAndVariables(e,t,r){console.error(`error: ${e}`,t,r)}warn(e,t,r){return n.untangleOverload.call(this,"warn",e,t,r),!0}_warnMessage(e){console.warn(`warn: ${e}`)}_warnWithErrorAndMessage(e,t){console.warn(`warn: ${e}`,t)}_warnWithError(e){console.warn(e)}_warnWithVariables(e,t){console.warn(`warn: ${e}`,t)}_warnWithErrorAndVariables(e,t,r){console.warn(`warn: ${e}`,t,r)}info(e,t){return t?this._infoWithVariables(e,t):this._infoMessage(e),!0}_infoMessage(e){console.info(`info: ${e}`)}_infoWithVariables(e,t){console.info(`info: ${e}`,t)}debug(e,t){return t?this._debugWithVariables(e,t):this._debugMessage(e),!0}_debugMessage(e){console.debug(`debug: ${e}`)}_debugWithVariables(e,t){console.debug(`debug: ${e}`,t)}}t.default=i},"./node_modules/@amzn/kirup/dist/src/transports/insights/insights.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r("./node_modules/@amzn/kirup/dist/src/utils/errorOverload.js"),o=r("./node_modules/@amzn/kirup/dist/src/transports/base.js");class i extends o.TransportBase{constructor(e){super(e),this.config=e,this.instance=e.getInstance()}_getAttribution(e){return this.config.attribution&&this.config.attribution(e)||"Kirup"}count(e,t,r,n){return this.config.getInstance().enqueueEvent({message:`[COUNT] ${e}:${"object"!=typeof t?"number"!=typeof t?1:t:JSON.stringify(t)} ${r?JSON.stringify(r):""}`.trim(),stack:"NONE"},"INFO",this._getAttribution(n)),!0}_formatLog(e,t){return this.config.formatLog?this.config.formatLog(e,t).trim():e.trim()}fatal(e,t,r,o){return n.untangleOverload.call(this,"fatal",e,t,r,o),!0}_fatalMessage(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e,"fatal"),stack:"NONE"},"FATAL",this._getAttribution(t))}_fatalWithError(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e.message,"fatal"),stack:e.stack},"FATAL",this._getAttribution(t))}_fatalWithErrorAndMessage(e,t,r){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${t.toString()}`,"fatal"),stack:t.stack},"FATAL",this._getAttribution(r))}_fatalWithVariables(e,t,r){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${JSON.stringify(t)}`,"fatal"),stack:"NONE"},"FATAL",this._getAttribution(r))}_fatalWithErrorAndVariables(e,t,r,n){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${t.toString()} ${JSON.stringify(r)}`,"fatal"),stack:t.stack},"FATAL",this._getAttribution(n))}error(e,t,r,o){return n.untangleOverload.call(this,"error",e,t,r,o),!0}_errorMessage(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e,"error"),stack:"NONE"},"ERROR",this._getAttribution(t))}_errorWithError(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e.message,"error"),stack:e.stack},"ERROR",this._getAttribution(t))}_errorWithErrorAndMessage(e,t,r){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${t.toString()}`,"error"),stack:t.stack},"ERROR",this._getAttribution(r))}_errorWithVariables(e,t,r){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${JSON.stringify(t)}`,"error"),stack:"NONE"},"ERROR",this._getAttribution(r))}_errorWithErrorAndVariables(e,t,r,n){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${t.toString()} ${JSON.stringify(r)}`,"error"),stack:t.stack},"ERROR",this._getAttribution(n))}warn(e,t,r,o){return n.untangleOverload.call(this,"warn",e,t,r),!0}_warnMessage(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e,"warn"),stack:"NONE"},"WARN",this._getAttribution(t))}_warnWithErrorAndMessage(e,t,r){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${t.toString()}`,"warn"),stack:t.stack},"WARN",this._getAttribution(r))}_warnWithError(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e.message,"warn"),stack:e.stack},"WARN",this._getAttribution(t))}_warnWithVariables(e,t,r){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${JSON.stringify(t)}`,"warn"),stack:"NONE"},"WARN",this._getAttribution(r))}_warnWithErrorAndVariables(e,t,r,n){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${t.toString()} ${JSON.stringify(r)}`,"warn"),stack:t.stack},"WARN",this._getAttribution(n))}info(e,t,r){return t?this._infoWithVariables(e,t):this._infoMessage(e),!0}_infoMessage(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e,"info"),stack:"NONE"},"INFO",this._getAttribution(t))}_infoWithVariables(e,t,r){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${JSON.stringify(t)}`,"info"),stack:"NONE"},"INFO",this._getAttribution(r))}debug(){return!0}}t.default=i},"./node_modules/@amzn/kirup/dist/src/transports/minerva/minerva.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r("./node_modules/@amzn/minerva-ts-client/dist/index.js"),o=r("./node_modules/@amzn/kirup/dist/src/utils/errorOverload.js"),i=r("./node_modules/@amzn/kirup/dist/src/utils/store.js"),a=r("./node_modules/@amzn/kirup/dist/src/transports/base.js");class s extends a.TransportBase{constructor(e){var t,r;super(e),this._fixedValue=e=>Number(e.toFixed(4)),this.config=e,this.metrics=this._setMetrics(e.metrics);const o={deviceInfoProvider:e.deviceInfoProvider,kpiMetricsSchemaIdentifier:e.kpiMetricsSchemaIdentifier||{schemaId:"ckpi/2/00f30233",groupId:"aminerva"}},i={getConfig:e.getConfig},a={getAccessToken:e.getAccessToken?e.getAccessToken:()=>{}},s={isChildProfile:e.isChildProfile?e.isChildProfile:()=>!1},l={isUsageCollectionEnabled:e.isUsageCollectionEnabled?e.isUsageCollectionEnabled:()=>!0};this.client=new n.MinervaTSClient(i,a,s,l,o),null===(r=(t=this.config).getLogger)||void 0===r||r.call(t).then((e=>{this.logger=e,this.client.setLogger(e)}))}_setMetrics(e){const t=new Map;return e.forEach((e=>{t.set(e.name,{schemaId:e.schemaId,groupId:e.groupId})})),t}tryCatch(e){var t;try{return e()}catch(e){return null===(t=this.logger)||void 0===t||t.error(e.toString()),!1}}batch(e){var t,r,n,o,a,s;return 0===(0,i.getStoreSize)(e)?{newStore:e}:(e.debug=null===(t=e.debug)||void 0===t?void 0:t.filter((e=>this.tryCatch((()=>!this.debug(e.args[0],e.args[1]))))),e.info=null===(r=e.info)||void 0===r?void 0:r.filter((e=>this.tryCatch((()=>!this.info(e.args[0],e.args[1]))))),e.warn=null===(n=e.warn)||void 0===n?void 0:n.filter((e=>this.tryCatch((()=>!this.warn(e.args[0],e.args[1],e.args[2]))))),e.error=null===(o=e.error)||void 0===o?void 0:o.filter((e=>this.tryCatch((()=>!this.error(e.args[0],e.args[1],e.args[2]))))),e.fatal=null===(a=e.fatal)||void 0===a?void 0:a.filter((e=>this.tryCatch((()=>!this.fatal(e.args[0],e.args[1],e.args[2]))))),e.count=null===(s=e.count)||void 0===s?void 0:s.filter((e=>this.tryCatch((()=>!this.count(...e.args))))),{newStore:e,promiseSupplier:()=>this.client.forceUpload().then((()=>{}))})}count(e,t,r,n){return"number"==typeof t&&r?this._recordIntegerMetricEvent(e,t,r,n):"number"==typeof t?this._recordIntegerMetricEvent(e,t,{},n):t&&!r?this._recordIntegerMetricEvent(e,1,t,n):this._recordIntegerMetricEvent(e,1,{},n),!0}_recordIntegerMetricEvent(e,t,r,o){var i,a;const s=this.metrics.get(e);if(!s)throw new Error(`Minerva metric with name ${e} has not been configured.`);{if(null===(a=(i=this.config).filter)||void 0===a?void 0:a.call(i,e))return;const l=Object.entries(r).filter((([,e])=>"number"==typeof e)).reduce(((e,[t,r])=>(e[t]=r,e)),{});void 0===l.Count&&(l.Count=this._fixedValue(t));const c=Object.entries(r).filter((([,e])=>"string"==typeof e)).reduce(((e,[t,r])=>(e[t]={val:r,dataType:n.MinervaValueDataType.STRING},e)),{}),d=this.config.getDefaultDimensions(o);Object.keys(l).forEach((t=>{const r={keyValuePairs:{[e]:{val:this._fixedValue(l[t]),dataType:n.MinervaValueDataType.DOUBLE},Metric:{val:t,dataType:n.MinervaValueDataType.STRING},...c,...d},minervaMetricIdentifier:s};this.client.record(r)}))}}_formatLog(e,t){return this.config.formatLog?this.config.formatLog(e,t).trim():e.trim()}_recordStringMetricEvent(e,t,r=void 0,o={}){const i=this.metrics.get(e);if(!i)throw new Error(`Minerva metric with name ${e} has not been configured.`);{const a={},{logID:s,...l}=o,c={...l};Object.keys(c).forEach((e=>{a[e]={val:c[e],dataType:n.MinervaValueDataType.STRING}}));const d={keyValuePairs:{[e]:{val:this._formatLog(`${t}${r?` ${r.toString()}`:""}`,e),dataType:n.MinervaValueDataType.STRING},...a},minervaMetricIdentifier:i};this.client.record(d)}}fatal(e,t,r){return o.untangleOverload.call(this,"fatal",e,t,r),!0}_fatalMessage(e){this._recordStringMetricEvent("fatal",e)}_fatalWithError(e){this._recordStringMetricEvent("fatal","",e)}_fatalWithErrorAndMessage(e,t){this._recordStringMetricEvent("fatal",e,t)}_fatalWithVariables(e,t){this._recordStringMetricEvent("fatal",e,void 0,t)}_fatalWithErrorAndVariables(e,t,r){this._recordStringMetricEvent("fatal",e,t,r)}error(e,t,r){return o.untangleOverload.call(this,"error",e,t,r),!0}_errorMessage(e){this._recordStringMetricEvent("error",e)}_errorWithError(e){this._recordStringMetricEvent("error","",e)}_errorWithErrorAndMessage(e,t){this._recordStringMetricEvent("error",e,t)}_errorWithVariables(e,t){this._recordStringMetricEvent("error",e,void 0,t)}_errorWithErrorAndVariables(e,t,r){this._recordStringMetricEvent("error",e,t,r)}warn(e,t,r){return o.untangleOverload.call(this,"warn",e,t,r),!0}_warnMessage(e){this._recordStringMetricEvent("warn",e)}_warnWithError(e){this._recordStringMetricEvent("warn","",e)}_warnWithErrorAndMessage(e,t){this._recordStringMetricEvent("warn",e,t)}_warnWithVariables(e,t){this._recordStringMetricEvent("warn",e,void 0,t)}_warnWithErrorAndVariables(e,t,r){this._recordStringMetricEvent("warn",e,t,r)}info(e,t){return t?this._infoWithVariables(e,t):this._infoMessage(e),!0}_infoMessage(e){this._recordStringMetricEvent("info",e)}_infoWithVariables(e,t){this._recordStringMetricEvent("info",e,void 0,t)}debug(e,t){return t?this._debugWithVariables(e,t):this._debugMessage(e),!0}_debugMessage(e){this._recordStringMetricEvent("debug",e)}_debugWithVariables(e,t){this._recordStringMetricEvent("debug",e,void 0,t)}}t.default=s},"./node_modules/@amzn/kirup/dist/src/transports/rtla/rtla.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r("./node_modules/@amzn/kirup/dist/src/utils/errorOverload.js"),o=r("./node_modules/@amzn/kirup/dist/src/transports/base.js");class i extends o.TransportBase{constructor(e){super(e),this.config=e}_getAttribution(e){return this.config.attribution(e)||"Kirup"}count(){return!0}_logRTLA(e,t){"undefined"!=typeof window&&void 0!==window.ueLogError&&window.ueLogError(e,t)}_formatLog(e,t){return this.config.formatLog?this.config.formatLog(e,t).trim():e.trim()}fatal(e,t,r,o){return n.untangleOverload.call(this,"fatal",e,t,r,o),!0}_fatalMessage(e,t){this._logRTLA(new Error(e),{logLevel:"FATAL",attribution:this._getAttribution(t),message:this._formatLog(e,"fatal")})}_fatalWithError(e,t){this._logRTLA(e,{logLevel:"FATAL",attribution:this._getAttribution(t),message:this._formatLog(e.message,"fatal")})}_fatalWithErrorAndMessage(e,t,r){this._logRTLA(t,{logLevel:"FATAL",attribution:this._getAttribution(r),message:this._formatLog(e,"fatal")})}_fatalWithVariables(e,t,r){this._logRTLA(new Error(e),{logLevel:"FATAL",attribution:this._getAttribution(r),message:this._formatLog(`${e} ${JSON.stringify(t)}`,"fatal")})}_fatalWithErrorAndVariables(e,t,r,n){this._logRTLA(t,{logLevel:"FATAL",attribution:this._getAttribution(n),message:this._formatLog(`${e} ${t.toString()} ${JSON.stringify(r)}`,"fatal")})}error(e,t,r,o){return n.untangleOverload.call(this,"error",e,t,r,o),!0}_errorMessage(e,t){this._logRTLA(new Error(e),{logLevel:"ERROR",attribution:this._getAttribution(t),message:this._formatLog(e,"error")})}_errorWithError(e,t){this._logRTLA(e,{logLevel:"ERROR",attribution:this._getAttribution(t),message:this._formatLog(e.message,"error")})}_errorWithErrorAndMessage(e,t,r){this._logRTLA(t,{logLevel:"ERROR",attribution:this._getAttribution(r),message:this._formatLog(e,"error")})}_errorWithVariables(e,t,r){this._logRTLA(new Error(e),{logLevel:"ERROR",attribution:this._getAttribution(r),message:this._formatLog(`${e} ${JSON.stringify(t)}`,"error")})}_errorWithErrorAndVariables(e,t,r,n){this._logRTLA(t,{logLevel:"ERROR",attribution:this._getAttribution(n),message:this._formatLog(`${e} ${t.toString()} ${JSON.stringify(r)}`,"error")})}warn(e,t,r,o){return n.untangleOverload.call(this,"warn",e,t,r),!0}_warnMessage(e,t){this._logRTLA(new Error(e),{logLevel:"WARN",attribution:this._getAttribution(t),message:this._formatLog(e,"warn")})}_warnWithErrorAndMessage(e,t,r){this._logRTLA(t,{logLevel:"WARN",attribution:this._getAttribution(r),message:this._formatLog(e,"warn")})}_warnWithError(e,t){this._logRTLA(e,{logLevel:"WARN",attribution:this._getAttribution(t),message:this._formatLog(e.message,"warn")})}_warnWithVariables(e,t,r){this._logRTLA(new Error(e),{logLevel:"WARN",attribution:this._getAttribution(r),message:this._formatLog(`${e} ${JSON.stringify(t)}`,"warn")})}_warnWithErrorAndVariables(e,t,r,n){this._logRTLA(t,{logLevel:"WARN",attribution:this._getAttribution(n),message:this._formatLog(`${e} ${t.toString()} ${JSON.stringify(r)}`,"warn")})}info(){return!0}debug(){return!0}}t.default=i},"./node_modules/@amzn/kirup/dist/src/transports/transport.browser.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadTransportFromConfig=void 0;const n=r("./node_modules/@amzn/kirup/dist/src/@types/configuration.js"),o=r("./node_modules/@amzn/kirup/dist/src/transports/console/console.js"),i=r("./node_modules/@amzn/kirup/dist/src/transports/insights/insights.js"),a=r("./node_modules/@amzn/kirup/dist/src/transports/minerva/minerva.js"),s=r("./node_modules/@amzn/kirup/dist/src/transports/rtla/rtla.js");t.loadTransportFromConfig=function(e){let t;switch(e.name){case n.Transports.CONSOLE:t=new o.default(e);break;case n.Transports.MINERVA:if(!function(e){return void 0!==e.metrics&&void 0!==e.getConfig&&void 0!==e.deviceInfoProvider&&void 0!==e.getDefaultDimensions}(e))throw new Error("Minerva Transport is not configured correctly");t=new a.default(e);break;case n.Transports.INSIGHTS:if(!function(e){return void 0!==e.getInstance}(e))throw new Error("Insights Transport is not configured correctly");t=new i.default(e);break;case n.Transports.RTLA:if(!function(e){return void 0!==e.attribution}(e))throw new Error("RTLA Transport is not configured correctly");t=new s.default(e);break;default:throw new Error(`Unknown Transport name: ${e.name}`)}return t}},"./node_modules/@amzn/kirup/dist/src/transports/transport.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KirupTransport=void 0;t.KirupTransport=class{constructor(e,t){this.config=e,this.instance=t(e)}}},"./node_modules/@amzn/kirup/dist/src/utils/environment.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentEnvironment=void 0;const n=r("./node_modules/@amzn/kirup/dist/src/@types/configuration.js");function o(){return"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}function i(){return"undefined"!=typeof self&&"undefined"!=typeof ServiceWorkerGlobalScope&&self instanceof ServiceWorkerGlobalScope}function a(){return!1==("undefined"==typeof window&&"undefined"==typeof document)&&!1===i()&&!1===o()}t.getCurrentEnvironment=function(){return a()?n.Environment.DOM:i()?n.Environment.SERVICEWORKER:o()?n.Environment.WEBWORKER:n.Environment.NODE}},"./node_modules/@amzn/kirup/dist/src/utils/errorObject.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isErrorObject=t.objectToError=t.errorToObject=void 0,t.errorToObject=function(e){return{message:e.message,name:e.name,stack:e.stack}},t.objectToError=function(e){const t=new Error(e.message);return t.name=e.name,t.stack=e.stack,t},t.isErrorObject=function(e){return"object"==typeof e&&null!=e&&"string"==typeof e.name&&"string"==typeof e.message}},"./node_modules/@amzn/kirup/dist/src/utils/errorOverload.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.untangleOverload=void 0;const n=r("./node_modules/@amzn/kirup/dist/src/utils/variables.js");t.untangleOverload=function(e,t,r,o,i){let a="",s=null,l=null;"string"==typeof t?(a=t,(0,n.isVariables)(r)&&(l=r)):t instanceof Error&&(s=t,"string"==typeof r?(a=r,(0,n.isVariables)(o)&&(l=o)):(0,n.isVariables)(r)&&(l=r)),s&&l?this[`_${e}WithErrorAndVariables`](a,s,l,i):s&&a?this[`_${e}WithErrorAndMessage`](a,s,i):s?this[`_${e}WithError`](s,i):l?this[`_${e}WithVariables`](a,l,i):this[`_${e}Message`](a,i)}},"./node_modules/@amzn/kirup/dist/src/utils/promises.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fireAndForgetPromise=void 0;t.fireAndForgetPromise=(e,t=(()=>{}))=>{e().then((()=>{}),t)}},"./node_modules/@amzn/kirup/dist/src/utils/safePerformance.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.realPerformance=t.isSupportingPerformanceTiming=t.fakePerformance=t.NAVIGATION_MARKER=void 0;const n=r("./node_modules/@amzn/kirup/dist/src/@types/configuration.js"),o=r("./node_modules/@amzn/kirup/dist/src/utils/environment.js");t.NAVIGATION_MARKER="kirup-navigate";const i=e=>null;t.fakePerformance={getEntriesByName:()=>[],getEntriesByType:()=>[],mark:()=>{},measure:()=>{},getEntryDetailIfPresent:()=>{},legacyCalculateLatency:i,calculateLatency:i};function a(){var e,t,r,i,a,s,l,c;return(0,o.getCurrentEnvironment)()!==n.Environment.DOM||"performance"in window&&void 0!==window.performance.mark&&void 0!==(null===(i=null===(r=null===(t=(e=window.performance).getEntriesByType)||void 0===t?void 0:t.call(e,"navigation"))||void 0===r?void 0:r[0])||void 0===i?void 0:i.domInteractive)&&void 0!==(null===(c=null===(l=null===(s=(a=window.performance).getEntriesByType)||void 0===s?void 0:s.call(a,"navigation"))||void 0===l?void 0:l[0])||void 0===c?void 0:c.domComplete)}t.isSupportingPerformanceTiming=a,t.realPerformance={getEntriesByName:(...e)=>performance.getEntriesByName(...e),getEntriesByType:(...e)=>performance.getEntriesByType(...e),mark:(e,t)=>{performance.mark(e,{detail:t})},measure:(e,t,r)=>{performance.measure(e,t,r)},getEntryDetailIfPresent:e=>{const t=e.detail;return"object"==typeof t&&null!==t?t:void 0},legacyCalculateLatency:e=>{var r,n,o;const i=performance.getEntriesByType("navigation"),a=null===(r=null==i?void 0:i[0])||void 0===r?void 0:r.requestStart,s=performance.getEntriesByName(t.NAVIGATION_MARKER,"mark"),l=null===(n=null==s?void 0:s[0])||void 0===n?void 0:n.startTime,c=performance.getEntriesByName(e,"mark"),d=null===(o=null==c?void 0:c[0])||void 0===o?void 0:o.startTime;if(void 0!==d){return d-(void 0!==l?l:a||0)}throw new Error(`You're ending a marker (${e}) that is not started and undefined (legacy).`)},calculateLatency:e=>{var r,n,o,i,a;const s=performance.getEntriesByType("navigation"),l=null===(r=null==s?void 0:s[s.length-1])||void 0===r?void 0:r.startTime,c=performance.getEntriesByName(t.NAVIGATION_MARKER,"mark"),d=null===(n=null==c?void 0:c[c.length-1])||void 0===n?void 0:n.startTime,u=performance.getEntriesByName(e,"mark"),g="number"==typeof(null===(o=null==s?void 0:s[s.length-1])||void 0===o?void 0:o[e])?Number(null===(i=null==s?void 0:s[s.length-1])||void 0===i?void 0:i[e]):null===(a=null==u?void 0:u[u.length-1])||void 0===a?void 0:a.startTime;if(void 0!==g){return g-(void 0!==d?d:l||0)}throw new Error(`You're ending a marker (${e}) that is not started and undefined.`)}},t.default=a()?t.realPerformance:t.fakePerformance},"./node_modules/@amzn/kirup/dist/src/utils/store.js":(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreSize=void 0;const n=r("./node_modules/@amzn/kirup/dist/src/@types/kirup.js");t.getStoreSize=e=>n.LogTypes.reduce(((t,r)=>{var n;return t+((null===(n=e[r])||void 0===n?void 0:n.length)||0)}),0)},"./node_modules/@amzn/kirup/dist/src/utils/variables.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isVariables=void 0,t.isVariables=function(e){return"object"==typeof e&&null!==e&&!(e instanceof Error)}},"./src/entrypoints/hydration/crossbenefit-modal.tsx":(e,t,r)=>{var n=r("./src/util/hydration/hydrateWidgets.tsx"),o=r("./node_modules/react/index.js"),i=r("./src/util/wrappers/ArgsContext.tsx"),a=r("./src/shared/CS/components/Text/Text.tsx"),s=r("./src/shared/CS/components/Modal/Modal.tsx"),l=r("./node_modules/classnames/index.js"),c=r.n(l),d=r("./node_modules/@amzn/dvui/dist/Icons/Arrow.js"),u=r.n(d),g=r("./node_modules/@amzn/dvui/dist/Container.js"),m=r("./node_modules/@amzn/dvui/dist/Link.js"),p=r("./src/shared/CS/components/LazyImage/LazyImage.tsx"),h=r("./src/util/utils/dvstring/utils.ts");const v=[200,240,360],f=[{"max-tablet-lowest":200},{"max-laptop-lowest":200},{"max-desktop-lowest":360},{"max-desktop-hd-lowest":360},{"max-desktop-uhd-lowest":360}],E={height:"12px",width:"12px"},w="R10k62",b="jOhPms",y="_9AD24q",T="hs3Jb3",_="fXJxbs";function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A.apply(this,arguments)}const D=e=>o.createElement(m.Link,{href:e.link.url,className:b,onClick:e.handleClick},o.createElement(p.w,{src:e.image.url,alt:e.title,baseValue:2160,wrapperClassName:T,sizesOptions:{defaultSrcSize:360,srcSizes:f},shouldLazyLoad:!0,srcSetWidths:v}),o.createElement(a.Z.Body,{className:y},e.title),o.createElement(u(),E)),S=({modalItems:e,publishEvent:t})=>o.createElement(g.Container,{className:c()(w,{[_]:1===e.length}),testID:"crossbenefit-modal-tiles"},e.map(((e,r)=>o.createElement(D,A({},e,{handleClick:t(r),key:(0,h.EL)()})))));var k=r("./node_modules/@amzn/dvui/dist/Fable/components/Button/index.js");let C=function(e){return e.CLOSE="close",e.OPT_OUT="opt_out",e.CALL_TO_ACTION="call_to_action",e}({}),M=function(e){return e.PRIMARY="primary",e.SECONDARY="secondary",e}({}),O=function(e){return e.CROSS_BENEFIT_DISCOVERY="CrossBenefitDiscovery",e.CROSS_BENEFIT_DISCOVERY_LEGACY="CrossBenefitDiscoveryLegacy",e.PRIME_ADDON="PrimeAddOn",e}({});const R="pypSK0",P=({modalButtonList:e,optOutEvent:t,dismissEvent:r})=>{const n=(e,t)=>`cross-benefit-modal-${e.toLowerCase()}-btn-${t}`;return o.createElement(g.Container,{className:R,testID:"crossbenefit-button-list"},e.map(((e,i)=>{return o.createElement(k.SecondaryButton,{onClick:(a=e.buttonAction,C.OPT_OUT===a?t:r),key:(0,h.EL)(),id:n(e.buttonAction,i)},e.text);var a})))};var L=r("./node_modules/@amzn/dvui/dist/DvuiContainer.js"),N=r("./src/widgets/DVWebNodeCrossBenefitModal/utils/utils.ts"),W=r("./src/shared/deviceProxy/PVClickstreamClient.ts"),x=r("./src/util/csm/clickstreamPageParams.ts");const V="vx7ze4",I="ALgnt0",j=e=>{const{modalContent:{modalButtonList:t,modalItems:r,subtitle:n,title:i},widgetRefmarker:l,homeRegion:c}=e,[d,u]=o.useState(!1),{subPageType:g}=(0,x.Mi)(),m=(0,W.U)({homeRegion:c}),p=(0,N.oB)({clickstreamClient:m,subPageType:g,widgetRefmarker:l,callback:()=>{u(!1),(0,N.LH)()}}),h=o.useMemo((()=>(0,N.Dy)(p)),[p]),{onModalRender:v,onModalDismount:f,onCloseButtonClick:E,onOptOutButtonClick:w,onTileLinkClick:b}=h;return o.useEffect((()=>{const e=(0,N.qH)()&&!(0,N.hT)()&&(0,N.M_)(i,r);e&&!d&&v(),u(e)}),[d]),o.createElement(L.DvuiContainer,{testID:"crossbenefit-modal-wrapper"},(0,N.M_)(i,r)&&o.createElement("div",{id:"crossbenefit-modal-suppression-key"}),o.createElement(s.u,{testID:"crossbenefit-modal",titleText:i,className:V,isVisible:d,disableCloseButton:!0,body:o.createElement(o.Fragment,null,o.createElement(a.Z.Body,{className:I},n),o.createElement(S,{modalItems:r,publishEvent:b})),footer:o.createElement(P,{dismissEvent:E,optOutEvent:w,modalButtonList:t}),onRequestClose:f}))};var B=r("./node_modules/@amzn/dvui/dist/Text.js"),z=r("./node_modules/@amzn/dvui/dist/Fable/components/Icons/BackMirrored.js"),$=r.n(z);const U={modalWrapper:"BrB5vC",title:"E04sq0",bodyWrapper:"XCR009",subtitle:"n8WXTB",tilesContainer:"XFWn-P",tileWrapper:"BvmZmv",tileImageWrapper:"Ahqo2l",tileBodyWrapper:"T9HdQw",tileText:"_1ngmA3",tileArrow:"e0lHIh",footerWrapper:"Y5Vaos"},H={modalWrapper:"KLR6Vj",title:"F5GF0M",bodyWrapper:"sxxTQL",subtitle:"eLUh-l",tilesContainer:"ah1v0e",tileWrapper:"K6R7vr",tileImageWrapper:"WJ6ie3",tileBodyWrapper:"x0IYhh",tileText:"E1NJcd",tileArrow:"oTm7Id",footerWrapper:"VrmNUR"},F=(0,o.createContext)(U),q=F.Provider,K=()=>(0,o.useContext)(F),G=(0,o.createContext)((0,N.Dy)((()=>{}))),Z=G.Provider,J=()=>(0,o.useContext)(G);function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X.apply(this,arguments)}const Y=({index:e,link:t,image:r,title:n})=>{const i=K(),{onTileLinkClick:a}=J();return o.createElement(Q,{className:i.tileWrapper,testID:"themed-crossbenefit-modal-tile",link:t,onClick:a(e)},r&&o.createElement(p.w,{wrapperClassName:i.tileImageWrapper,src:r.url,alt:n,baseValue:2160,sizesOptions:{defaultSrcSize:360,srcSizes:f},srcSetWidths:v,shouldLazyLoad:!0}),o.createElement("span",{className:i.tileBodyWrapper},n&&o.createElement(B.Text,{className:i.tileText,text:n}),t&&o.createElement("span",{"data-testid":"themed-crossbenefit-modal-tile-arrow",className:i.tileArrow},o.createElement($(),null))))},Q=({link:e,testID:t,onClick:r,...n})=>e?o.createElement(m.Link,X({testID:t,href:e.url,onClick:r},n)):o.createElement("div",X({"data-testid":t},n));function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ee.apply(this,arguments)}const te=({subtitle:e,modalDiscoveryTiles:t})=>{const r=K();return!(0===t.length&&!e)?o.createElement("div",{"data-testid":"themed-crossbenefit-modal-body",className:r.bodyWrapper},e&&o.createElement(B.Text,{testID:"themed-crossbenefit-modal-body-subtitle",className:r.subtitle,text:e}),t.length>0&&o.createElement("div",{"data-testid":"themed-crossbenefit-modal-body-tiles",className:r.tilesContainer},t.map(((e,t)=>o.createElement(Y,ee({key:(0,h.EL)(),index:t},e)))))):null},re=({link:e,role:t})=>e&&t===M.PRIMARY?k.PrimaryLinkButton:e&&t===M.SECONDARY?k.SecondaryLinkButton:t===M.PRIMARY?k.PrimaryButton:k.SecondaryButton,ne=({index:e,buttonAction:t,link:r,role:n,text:i})=>{const a=(({onCloseButtonClick:e,onOptOutButtonClick:t,onCTAButtonClick:r},n)=>n===C.CLOSE?e:n===C.OPT_OUT?t:n===C.CALL_TO_ACTION?r:()=>{})(J(),t),s=re({link:r,role:n});return o.createElement(s,{id:`cross-benefit-modal-${t.toLowerCase()}-btn-${e}`,onClick:a,href:null==r?void 0:r.url},i)};function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oe.apply(this,arguments)}const ie=({modalButtonList:e})=>{const t=K();return e.length>0?o.createElement("div",{"data-testid":"themed-crossbenefit-modal-footer",className:t.footerWrapper},e.map(((e,t)=>o.createElement(ne,oe({key:(0,h.EL)(),index:t},e))))):null},ae=({homeRegion:e,widgetRefmarker:t,modalContent:{title:r,subtitle:n,modalDiscoveryTiles:i,modalButtonList:a,modalTheme:l}})=>{const{st:c,modalSize:d}=l===O.PRIME_ADDON?{modalSize:"s",st:H}:{st:U};const[u,g]=(0,o.useState)(!1),{subPageType:m}=(0,x.Mi)(),p=(0,W.U)({homeRegion:e}),h=(0,N.oB)({clickstreamClient:p,subPageType:m,widgetRefmarker:t,callback:()=>{g(!1),(0,N.LH)()}}),v=(0,o.useMemo)((()=>(0,N.Dy)(h)),[h]),{onModalRender:f,onModalDismount:E}=v;return(0,o.useEffect)((()=>{(0,N.qH)()&&!(0,N.hT)()&&!!r&&(!u&&f(),g(!0))}),[u]),o.createElement(Z,{value:v},o.createElement(q,{value:c},o.createElement(L.DvuiContainer,null,!!r&&o.createElement("div",{id:"crossbenefit-modal-suppression-key"}),o.createElement(s.u,{size:d,testID:"themed-crossbenefit-modal",className:c.modalWrapper,isVisible:u,header:o.createElement(B.Text,{testID:"themed-crossbenefit-modal-header-title",className:c.title,text:r}),body:o.createElement(te,{subtitle:n,modalDiscoveryTiles:i}),footer:o.createElement(ie,{modalButtonList:a}),onRequestClose:E,disableCloseButton:!0}))))},se={name:"crossbenefit-modal",getProps:undefined,Component:(0,i.s6)((e=>{const t=(0,N.bO)(e)?ae:j;return o.createElement(t,e)}))};(0,n.y)(se)},"./src/shared/CS/components/LazyImage/LazyImage.tsx":(e,t,r)=>{r.d(t,{w:()=>h});var n=r("./node_modules/react/index.js"),o=r("./node_modules/classnames/index.js"),i=r.n(o);const a="om7nme",s="KLNBWL",l="Ah1hNY";var c=r("./src/shared/imageUtils/imageUtils.ts"),d=r("./src/util/utils/sample.ts"),u=r("./src/util/utils/imageUtils/imageUtils.tsx"),g=r("./src/util/logger/kirup.ts");var m=r("./src/shared/Explore/containers/PageContainer/index.tsx");function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(this,arguments)}const h=n.memo((({src:e,baseValue:t,alt:r,aspectRatio:o,imageClassName:h,wrapperClassName:v,autoCrop:f,sizesOptions:E,srcSetWidths:w,parentListeners:b,shouldLazyLoad:y,debugID:T,responsiveScaleDimension:_=c.rB.WIDTH,elementTiming:A})=>{const D=(0,m.zm)(),{shouldDarkenImage:S}=D||{},[k,C]=n.useState(!1),M=n.useRef(null),O=new u.e(e).urlFileFormat,R="png"==O?"image/png":"image/jpeg",P="png"==O?c.GH.png:c.GH.jpg,L=e=>{var t;(C(!0),(0,d.d)(2,(()=>{g.c.count("DVWebClientImgLoadAttempt",0)})),e)&&(null==b||null===(t=b.onLoad)||void 0===t||t.call(b,e.currentTarget.currentSrc))};n.useEffect((()=>{var e;null!==(e=M.current)&&void 0!==e&&e.complete&&!k&&L()}),[]);const N=n.createElement("img",p({alt:null!=r?r:"",className:i()(h,{[l]:o,[s]:!o}),onLoad:L,onError:t=>{var r;null==b||null===(r=b.onError)||void 0===r||r.call(b),(0,d.d)(2,(()=>{g.c.count("DVWebClientImgLoadAttempt",1)})),g.c.count("DVWebClientImgLoadFailure"),g.c.warn(t,`[dvWebClientImgLoadFailure] LazyImage failed to load an image for ${T}. The image URL is: ${e}`)},style:o?{aspectRatio:o}:{},src:(0,c.e4)({src:e,value:t,baseType:_,skipStripTags:!0,supportTransparency:void 0,autoCrop:f,type:P,shouldDarkenImage:S}),"data-testid":"base-image",loading:y?"lazy":"eager"},A?{elementtiming:A}:{}));let W;return W=n.createElement("picture",null,n.createElement("source",{type:"image/webp",srcSet:w?(0,c.X8)(e,w,_,c.GH.webp,!0,f,S):(0,c.er)(e,t,_,c.GH.webp,!0,void 0,f,S),sizes:E&&(0,c.TQ)(E.defaultSrcSize,E.srcSizes)}),n.createElement("source",{type:R,srcSet:w?(0,c.X8)(e,w,_,P,!0,f,S):(0,c.er)(e,t,_,P,!0,void 0,f,S),sizes:E&&(0,c.TQ)(E.defaultSrcSize,E.srcSizes)}),N),n.createElement("div",{className:i()(a,v),style:o?{aspectRatio:o}:{}},W)}));h.displayName="LazyImage"},"./src/shared/CS/components/Modal/Modal.tsx":(e,t,r)=>{r.d(t,{u:()=>w});var n=r("./node_modules/react/index.js"),o=r("./node_modules/classnames/index.js"),i=r.n(o),a=r("./node_modules/@amzn/dvui/dist/Icons/Close.js"),s=r.n(a),l=r("./node_modules/@amzn/dvui/dist/Text.js"),c=r("./src/shared/CS/components/Text/Text.tsx"),d=r("./src/shared/CS/components/Modal/Modal.module.scss"),u=r("./node_modules/react-dom/index.js");const g=({children:e})=>{const t=n.useRef(null);n.useEffect((()=>(document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o))),[]);const r=[],o=e=>{var n;if("Tab"!==e.key)return;const o=e.shiftKey&&"Tab"===e.key,i=Array.from((null===(a=t.current)||void 0===a?void 0:a.querySelectorAll('a[href],textarea,input,button,label,[tabindex]:not([tabindex="-1"])'))||r);var a;const s=i.shift(),l=i.pop()||s,c=null===(n=t.current)||void 0===n?void 0:n.contains(document.activeElement),d=document.activeElement===(o?s:l)||null;c&&!d||((e,t)=>{t.preventDefault(),null==e||e.focus()})(o?l:s,e)};return n.createElement("div",{ref:t,"data-testid":"focus-trap"},e)};var m=r("./node_modules/@amzn/dvui/dist/Button.js"),p=r.n(m),h=r("./src/util/mShop.ts");function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(this,arguments)}const f="modal-no-scroll",E={xs:d.Z.xsModalSize,s:d.Z.sModalSize,m:d.Z.mModalSize,l:d.Z.lModalSize},w=({isVisible:e,className:t,size:r="m",testID:o,titleText:a,bodyText:w,primaryActionText:b,secondaryActionText:y,onRequestClose:T,onDismiss:_,primaryActionHref:A,onPrimaryAction:D,onSecondaryAction:S,header:k,disableHeader:C,disableCloseButton:M,body:O,disableBody:R,footer:P,disableFooter:L,rootElement:N})=>{var W;const x=n.useRef(null),{mShopBottomBarHeights:V}=(0,h.n)();n.useEffect((()=>{var t,r,n;e?(null===(t=document)||void 0===t||null===(t=t.documentElement)||void 0===t||t.classList.add(f),null==x||null===(r=x.current)||void 0===r||r.focus()):(null===(n=document)||void 0===n||null===(n=n.documentElement)||void 0===n||n.classList.remove(f),null==_||_());return()=>{var e;null===(e=document)||void 0===e||null===(e=e.documentElement)||void 0===e||e.classList.remove(f)}}),[e]);if(!e)return null;const I=n.createElement("button",{type:"button",onClick:T,className:d.Z.closeButton,"data-testid":"modal-close-button"},n.createElement(s(),null)),j=n.createElement(l.Text,{string:a||" ",tag:"span",testID:"menu-header"}),B=n.createElement("div",{role:"presentation",className:d.Z.modalContainer,onKeyDown:e=>{x.current&&"Escape"===e.key&&T()}},n.createElement("div",{role:"presentation",onClick:T,className:d.Z.background}),n.createElement("div",v({role:"dialog","aria-label":"Modal",ref:x,tabIndex:0,className:i()(d.Z.modalWrapper,E[r],t)},o&&{"data-automation-id":o,"data-testid":o},{style:{marginBottom:`${null!==(W=null==V?void 0:V.visibleHeight)&&void 0!==W?W:0}px`}}),n.createElement(g,null,n.createElement("div",{className:d.Z.modalContent},!C&&n.createElement(c.Z.Header,{className:i()(d.Z.headerWrapper,{[d.Z.emptyHeader]:!(k||a)})},null!=k?k:j,!M&&I),!R&&(null!=O?O:n.createElement(c.Z.Body,{className:d.Z.bodyWrapper},n.createElement(l.Text,{string:w,tag:"span"}))),!L&&(null!=P?P:n.createElement("div",{className:d.Z.footerWrapper},b&&n.createElement(m.PrimaryButton,{testID:"primary-action-button",className:i()(d.Z.actionButton,{[d.Z.alignedActionButton]:A}),onClick:D,href:A},b),y&&n.createElement(p(),{testID:"secondary-action-button",className:d.Z.actionButton,onClick:S},y)))))));return N?(0,u.createPortal)(B,N):B};w.displayName="Modal"},"./src/shared/CS/components/Text/Text.tsx":(e,t,r)=>{r.d(t,{Z:()=>v});var n=r("./node_modules/react/index.js"),o=r("./node_modules/classnames/index.js"),i=r.n(o);const a="d5QfMo",s="bhwVNI",l="ybdh+2",c="oCjIRU",d="lA7kc2",u="xn14PB",g="+eW92P",m="WqE8n+",p="ZFKxPY";function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(this,arguments)}const v={MetaDataBadge:({children:e,className:t,...r})=>n.createElement("span",h({className:i()(a,t)},r),e),MetaData:({children:e,className:t,...r})=>n.createElement("span",h({className:i()(s,t)},r),e),ActionButton:({children:e,className:t,...r})=>n.createElement("span",h({className:i()(l,t)},r),e),Marker:({children:e,className:t,...r})=>n.createElement("span",h({className:i()(c,t)},r),e),Body:({children:e,className:t,...r})=>n.createElement("p",h({className:i()(d,t)},r),e),SubHeader:({children:e,className:t,...r})=>n.createElement("h4",h({className:i()(u,t)},r),e),Header:({children:e,className:t,...r})=>n.createElement("h3",h({className:i()(g,t)},r),e),Super:({children:e,className:t,...r})=>n.createElement("h2",h({className:i()(m,t)},r),e),Mega:({children:e,className:t,...r})=>n.createElement("h2",h({className:i()(p,t)},r),e)}},"./src/shared/Explore/containers/PageContainer/VerticalPaginationController.tsx":(e,t,r)=>{r.d(t,{U:()=>o,a:()=>i});var n=r("./node_modules/react/index.js");const o=n.createContext({entityWithLock:{type:"PAGE"},hideBelowContainerIndex:void 0,actions:{lock:e=>{throw new Error("Cannot execute lock(). VerticalPaginationContext Provider not added.")},unlock:e=>{throw new Error("Cannot execute unlock(). VerticalPaginationContext Provider not added.")},hideBelow:e=>{throw new Error("Cannot execute hideBelow(). VerticalPaginationContext Provider not added.")},unhideBelow:e=>{throw new Error("Cannot execute unhideBelow(). VerticalPaginationContext Provider not added.")},resetAll:()=>{throw new Error("Cannot execute resetAll(). VerticalPaginationContext Provider not added.")}}});o.displayName="VerticalPaginationContext";const i=({children:e})=>{const[t,r]=n.useState(null),i=n.useRef([]);let a=n.useRef([]);const[s,l]=n.useState(void 0),c=n.useMemo((()=>{let e={type:"PAGE"};null!==t&&(e={type:"CONTAINER",containerIndex:t});return{entityWithLock:e,hideBelowContainerIndex:s,actions:{lock:e=>{var n;(i.current.includes(e)||i.current.push(e),null===t)&&r(null!==(n=i.current.shift())&&void 0!==n?n:null)},unlock:e=>{var n;t===e&&r(null!==(n=i.current.shift())&&void 0!==n?n:null)},hideBelow:e=>{void 0===s?l(e):a.current.includes(e)||a.current.push(e)},unhideBelow:e=>{s===e?l(a.current.shift()):a.current=a.current.filter((t=>t!==e))},resetAll:()=>{r(null),l(void 0),a.current=[]}}}}),[t,s]);return n.createElement(o.Provider,{value:c},e)}},"./src/shared/Explore/containers/PageContainer/index.tsx":(e,t,r)=>{r.d(t,{_z:()=>y,lO:()=>E,zm:()=>w});var n=r("./node_modules/react/index.js"),o=r("./src/shared/Explore/utils/cssUtils.ts"),i=r("./src/util/utils/swiftDevice.ts"),a=r("./src/util/wrappers/LoggersContext.tsx"),s=r("./src/util/utils/hooks/useHasMounted.ts"),l=r("./src/util/utils/array.ts"),c=r("./src/util/utils/debounce.ts"),d=r("./src/util/logger/kirup.ts"),u=r("./src/util/utils/sample.ts"),g=r("./src/shared/Explore/containers/PageContainer/VerticalPaginationController.tsx"),m=r("./node_modules/fast-deep-equal/index.js");const p=[i.fv.DesktopLinuxVariant,i.fv.DesktopWindowsVariant,i.fv.DesktopOSXVariant,i.fv.DesktopDefaultVariant,i.fv.DesktopBrowserVariant],h=i.fv.TabletDefaultVariant,v=[i.fv.MshopIOSVariant,i.fv.MshopAndroidVariant,i.fv.MshopDefaultVariant,i.fv.MobileAndroidVariant,i.fv.MobileDefaultVariant],f=n.createContext(void 0);f.displayName="PageContext";const E=()=>{const e=n.useContext(f);if(void 0===e)throw new Error("usePageContext must be used within a PageContext.Provider");return e},w=()=>n.useContext(f);(0,o.eE)();const b=e=>{const[t,r]=n.useState(0),[a,E]=n.useState(!0),[w,b]=n.useState(!0),[y,T]=n.useState(!1),[_,A]=n.useState(!1),[D,S]=n.useState(!1),[k,C]=n.useState({visible:new Map,min:null,max:null}),M=(0,s.f)();function O(){S(!0)}function R(){S(!1)}function P(){E("visible"===document.visibilityState)}n.useEffect((()=>{const t="undefined"!=typeof window&&"undefined"!=typeof navigator&&("ontouchstart"in window||navigator.maxTouchPoints>0||(null!==(n=navigator.msMaxTouchPoints)&&void 0!==n?n:0)>0);var n;const a=e.os===i.U5.Windows&&window.matchMedia("(any-pointer: coarse)").matches;T(t),b((e=>{var t;if("undefined"==typeof window)return!0;const r=null===(t=navigator.userAgent)||void 0===t?void 0:t.match("[a-z]{2}-[a-z]{3}-[a-z]{3}@[a-z]{6}.[a-z]{3}");return window.matchMedia("(hover: hover)").matches||e||!!r&&r.length>0})(a)),A(a);const s=(r,n)=>{if(n){const o=t?"TouchScreen":"NonTouchScreen";e.logger.count(`DVWeb::Storefront::${r}::${o}::${n}`,1,!1),(0,u.d)(10,(()=>{d.c.count("DVWebPageOrientation",{Page:r,InteractionType:o,Orientation:n})}))}},l=()=>"undefined"==typeof window?null:window.innerWidth<window.innerHeight?"Portrait":"Landscape";let g=l();s("OnLoad",g),(0,o.eE)();const m=(0,c.D)((()=>{const e=l();e!==g&&(g=e,s("OnResize",g)),(0,o.eE)(),r(window.innerWidth)}),300);return"undefined"!=typeof window&&(window.addEventListener("resize",m),r(window.innerWidth)),document.addEventListener("visibilitychange",P),document.addEventListener("PVVideoPlayerPlay",O),document.addEventListener("PVVideoPlayerClosed",R),()=>{"undefined"!=typeof window&&window.removeEventListener("resize",m),document.removeEventListener("visibilitychange",P),document.removeEventListener("PVVideoPlayerPlay",O),document.removeEventListener("PVVideoPlayerClosed",R)}}),[]);const L=n.useCallback(((e,t)=>{var r,n;const o=k.visible;o.set(e,t);const i=new Array;for(const[e,t]of o)t&&(0,l.y)(i,e);const a={visible:o,min:null!==(r=i[0])&&void 0!==r?r:null,max:null!==(n=i[i.length-1])&&void 0!==n?n:null};m(a,k)||C(a)}),[k]),N=p.indexOf(e.deviceVariant)>-1,W=e.deviceVariant===h,x=v.indexOf(e.deviceVariant)>-1,V=n.useCallback((t=>(e.strings||{})[t]||""),[e.strings]),I=e.swiftPageParameters&&"resiliencyHome"===e.swiftPageParameters.pageType||!1,j=n.useMemo((()=>{var r,n,o;return{pageWidth:t,isTouchDevice:y,isHoverEnabled:w,isDesktopDeviceVariant:N,isTabletDeviceVariant:W,isMobileDeviceVariant:x,isPageVisible:a,hasPageMounted:M,getString:V,theme:e.theme,isInResiliencyMode:I,clickstream:e.clickstream,clickstreamPageContext:e.clickstreamPageContext,onContainerVisibilityChange:L,containerVisibility:k,enableVerticalPerformantRender:null!==(r=e.enableVerticalPerformantRender)&&void 0!==r&&r,contingencies:e.contingencies,isPlayerVisible:D,isTouchEnabledWindowsDevice:_,shouldDarkenImage:null!==(n=e.shouldDarkenImage)&&void 0!==n&&n,shouldAlwaysShowMaturityRating:null!==(o=e.shouldAlwaysShowMaturityRating)&&void 0!==o&&o,testDebugFlags:e.testDebugFlags,pageType:e.pageType}}),[V,N,I,a,W,x,M,y,w,t,e.clickstream,e.clickstreamPageContext,e.theme,L,k,e.enableVerticalPerformantRender,e.contingencies,D,_,e.shouldDarkenImage,e.shouldAlwaysShowMaturityRating,e.testDebugFlags,e.pageType]);return n.createElement(f.Provider,{value:j},n.createElement(g.a,null,e.children))};b.displayName="PageContainer";const y=(0,a.ty)(b)},"./src/shared/Explore/utils/cssUtils.ts":(e,t,r)=>{r.d(t,{My:()=>a,eE:()=>s,pm:()=>i});const n=["--dv-carousel-column-margin","--dv-carousel-column-gap","--dv-current-target-screen","--side-panel-width"];let o=new Map;function i(e){var t;return null!==(t=o.get(e))&&void 0!==t?t:""}function a(e,t=0){const r=parseInt(i(e));return isNaN(r)?t:r}function s(){if("undefined"==typeof window)return;const e=new Map,t=window.getComputedStyle(document.documentElement);n.forEach((r=>{e.set(r,t.getPropertyValue(r))})),o=e}},"./src/shared/Stores/context.ts":(e,t,r)=>{r.r(t),r.d(t,{getRequestContext:()=>i,isInternal:()=>l,isRetail:()=>c,setRequestContext:()=>a,updateRequestContext:()=>s});var n=r("./src/shared/utils/setContextFromInlineScript.ts");const o=(0,r("./node_modules/zustand/esm/vanilla.mjs").M)((()=>({context:void 0}))),i=()=>{let e;var t;if(e=o.getState().context,void 0===e&&"undefined"!=typeof window&&window.DVWebNode&&(e=null===(t=window.DVWebNode.stores)||void 0===t?void 0:t.getState().context),void 0===e&&"undefined"!=typeof window&&(e=(0,n.j)()),void 0===e)throw new Error("Attempting to retrieve a RequestContext that is currently not set in the Zustand stores");return e},a=e=>{o.setState({context:e}),"undefined"!=typeof window&&window.DVWebNode&&void 0!==window.DVWebNode.stores&&window.DVWebNode.stores.setState({context:e})},s=e=>{const t=i();a({...t,...e})},l=()=>i().isInternal,c=()=>"Retail"===i().domain},"./src/shared/Stores/global.ts":(e,t,r)=>{r.d(t,{Lo:()=>g,T7:()=>u,_3:()=>c,e8:()=>a,zJ:()=>d,zW:()=>m});var n=r("./node_modules/zustand/esm/vanilla.mjs"),o=r("./src/util/utils/htmlEncode.ts");const i={requestContext:{},profile:{},featurePivots:{}},a=()=>(window.DVWebNode||(window.DVWebNode={perfMetrics:{}}),window.DVWebNode.storage||(window.DVWebNode.storage={}),window.DVWebNode.storage.global||(window.DVWebNode.storage.global=(0,n.M)((()=>(()=>{var e;let t;const r=null===(e=document.getElementById("dv-web-store-template"))||void 0===e?void 0:e.innerHTML;if(!r)return i;try{const e=JSON.parse((0,o.He)(r)),n=(0,o.Mt)(e);t=(0,o.ob)(n).global}catch(e){return i}return t||i})()))),window.DVWebNode.storage.global);let s;const l=()=>"undefined"!=typeof process&&null!=process.env.JEST_WORKER_ID?(s||(s=(0,n.M)((()=>({})))),s):a(),c=e=>l().setState(e),d=()=>l().getState(),u=()=>l().getState().profile,g=()=>l().getState().featurePivots,m=()=>l().getState().homeRegion},"./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts":(e,t,r)=>{r.d(t,{KU:()=>s,Nb:()=>a,P7:()=>p,W0:()=>c,c7:()=>n,cf:()=>i,mw:()=>h,qB:()=>d,sW:()=>l,wW:()=>o});let n=function(e){return e.ATVMyStuff="ATVMyStuff",e.ATVProfiles="ATVProfiles",e.ATVDetail="ATVDetail",e.ATVHome="ATVHome",e.ATVBrowse="ATVBrowse",e.ATVPerson="ATVPerson",e.ATVUnknown="ATVUnknown",e.ATVDownloads="ATVDownloads",e.ATVSubscription="ATVSubscription",e.ATVSearch="ATVSearch",e.ATVMerch="ATVMerch",e.ATVMoviesAnywhere="ATVMoviesAnywhere",e.ATVModal="ATVModal",e.ATVLive="ATVLive",e.ATVGenre="ATVGenre",e.ATVCategories="ATVCategories",e.ATVRoadblock="ATVRoadblock",e.ATVSplash="ATVSplash",e.ATVSettings="ATVSettings",e.ATVNav="ATVNav",e.ATVChannel="ATVChannel",e.Detail="Detail",e.DetailWebView="DetailWebView",e.DetailAW="DetailAW",e.PVPerson="PVPerson",e.DVWebAjaxAnalytics="DVWebAjaxAnalytics",e.DVSPA="DVSPA",e}({}),o=function(e){return e.MyStuff="MyStuff",e.Library="Library",e.Watchlist="Watchlist",e.Channels="Channels",e.Following="Following",e.Home="Home",e.Store="Store",e.FreeToMe="FreeToMe",e.TV="TV",e.Kids="Kids",e.RentBuy="RentBuy",e.Subscription="Subscription",e.JoinPrime="JoinPrime",e.LiveTv="LiveTv",e.Sports="Sports",e.Search="Search",e.SearchInput="SearchInput",e.Browse="Browse",e.Categories="Categories",e.WhosWatching="WhosWatching",e.Manage="Manage",e.Edit="Edit",e.Associate="Associate",e.Create="Create",e.PinAndLocks="PinAndLocks",e.Preferences="Preferences",e.Switch="Switch",e.Account="Account",e.Season="Season",e.Movie="Movie",e.Event="Event",e.InstantVideo="InstantVideo",e.TVSeason="TVSeason",e.SSM="SSM",e.Actor="Actor",e.Watch="Watch",e.Chat="Chat",e.PVWinApp="PVWinApp",e.Downloads="Downloads",e.GettingStarted="GettingStarted",e.IAS="IAS",e.Main="Main",e.Unknown="Unknown",e}({}),i=function(e){return e.Explore="pvwindowsapp-explore",e.DetailPage="pvwindowsapp-dp",e.Live="pvwindowsapp-live",e.AccList="pvwindowsapp-al",e.WindowsApp="pvwindowsapp-main",e.Unknown="pvwindowsapp-unknown",e}({}),a=function(e){return e.Explore="pvweb-explore",e.DetailPage="pvweb-dp",e.Live="pvweb-live",e.AccList="pvweb-al",e.WindowsApp="pvweb-winapp",e.Unknown="pvweb-unknown",e}({}),s=function(e){return e.Web="web",e.WinApp="winApp",e}({});const l={[n.ATVMyStuff]:{[s.WinApp]:i.AccList,[s.Web]:a.AccList},[n.ATVProfiles]:{[s.WinApp]:i.AccList,[s.Web]:a.AccList},[n.ATVDetail]:{[s.WinApp]:i.DetailPage,[s.Web]:a.DetailPage},[n.ATVPerson]:{[s.WinApp]:i.DetailPage,[s.Web]:a.DetailPage},[n.ATVMoviesAnywhere]:{[s.WinApp]:i.DetailPage,[s.Web]:a.DetailPage},[n.ATVHome]:{[s.WinApp]:i.Explore,[s.Web]:a.Explore},[n.ATVBrowse]:{[s.WinApp]:i.Explore,[s.Web]:a.Explore},[n.ATVSearch]:{[s.WinApp]:i.Explore,[s.Web]:a.Explore},[n.ATVMerch]:{[s.WinApp]:i.Explore,[s.Web]:a.Explore},[n.ATVSubscription]:{[s.WinApp]:i.Explore,[s.Web]:a.Explore},[n.ATVUnknown]:{[s.WinApp]:i.Unknown,[s.Web]:a.Unknown},[n.ATVDownloads]:{[s.WinApp]:i.WindowsApp,[s.Web]:a.WindowsApp},[n.DVSPA]:{[s.WinApp]:i.WindowsApp,[s.Web]:a.WindowsApp},[n.ATVModal]:{[s.WinApp]:i.Live,[s.Web]:a.Live},[n.ATVLive]:{[s.WinApp]:i.Explore,[s.Web]:a.Explore},[n.ATVGenre]:{[s.WinApp]:i.Explore,[s.Web]:a.Explore},[n.ATVCategories]:{[s.WinApp]:i.Explore,[s.Web]:a.Explore},[n.Detail]:{[s.WinApp]:i.DetailPage,[s.Web]:a.DetailPage},[n.DetailWebView]:{[s.WinApp]:i.DetailPage,[s.Web]:a.DetailPage},[n.DetailAW]:{[s.WinApp]:i.DetailPage,[s.Web]:a.DetailPage},[n.PVPerson]:{[s.WinApp]:i.DetailPage,[s.Web]:a.DetailPage},[n.DVWebAjaxAnalytics]:{[s.WinApp]:i.DetailPage,[s.Web]:a.DetailPage}};let c=function(e){return e.SignOut="SignOut",e.SignIn="SignIn",e.Share="Share",e.Search="Search",e.CarouselScroll="CarouselScroll",e.Purchase="Purchase",e.Rent="Rent",e.PlayTrailer="PlayTrailer",e.PlayStream="PlayStream",e.PlayDraper="PlayDraper",e.PlayDownload="PlayDownload",e.Download="Download",e.Click="Click",e.Back="Back",e.AddToWatchlist="AddToWatchlist",e.RemoveFromWatchlist="RemoveFromWatchlist",e.PageNavigate="PageNavigate",e.ModalRendered="ModalRendered",e.Landing="Landing",e.DefaultAction="Click",e}({}),d=function(e){return e.PageHit="pageHit",e.PageTouch="pageTouch",e.PopUp="popUp",e.actionOnly="actionOnly",e.refreshButton="refreshButton",e.BackForwardButton="bf=10",e}({});const u=/.*originals.*/,g=/.*prime.*/,m=/.*sports.*/,p=(e,t)=>{switch(e){case n.ATVHome:return"hm";case n.ATVMerch:return["Home","RentBuy","Channels"].includes(t)?"str":"FreeToMe"==t?"avod":"hm";case n.ATVMyStuff:return"mys";case n.ATVSearch:return"sr";case n.ATVBrowse:return"br";case n.ATVDetail:return"dp";case n.ATVPerson:return"pd";case n.ATVCategories:case n.ATVGenre:return"cat";case n.ATVLive:return"live";case n.ATVMoviesAnywhere:case n.ATVSplash:return"gst";case n.ATVSettings:return"set";case n.ATVDownloads:return"dnl";case n.ATVSubscription:return"subs";case n.ATVChannel:return"3p";case n.ATVUnknown:default:return"hm"}},h=(e,t)=>{switch(e){case o.Home:return"deals"==t?"deals":"hom";case o.FreeToMe:return"ftm";case o.Movie:return"mv";case o.Season:case o.TV:return"tv";case o.Kids:return"kid";case o.Store:return"str";case o.Watchlist:return"wl";case o.Library:return"yvl";case o.RentBuy:return"rnb";case o.Channels:return"chn";case o.Categories:return"cat";case o.Main:case o.Unknown:default:const r=e.toString().toLowerCase();return u.test(r)?"ori":g.test(r)?"pri":m.test(r)?"sports":"hom"}}},"./src/shared/deviceProxy/DeviceProxy.ts":(e,t,r)=>{r.d(t,{B$:()=>l,V4:()=>a,WA:()=>s});var n=r("./src/util/utils/device.ts"),o=r("./src/util/utils/marketplace.ts"),i=r("./src/shared/deviceProxy/marketplaceUtils.ts");const a={WEB:"AOAGZA014O5RE",WINDOWS:"A3OEMT9S4WNMK"},s=(e,t)=>`https://${(0,i.getDeviceProxyEndpoint)(e.marketplaceID,t)}`,l=e=>({deviceID:e.deviceID,deviceTypeID:(0,n.dz)().deviceTypeId,gascEnabled:(0,o.ST)()?"true":"false",marketplaceID:e.marketplaceID,uxLocale:e.locale})},"./src/shared/deviceProxy/PVClickstreamClient.ts":(e,t,r)=>{r.d(t,{U:()=>E});var n=r("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts"),o=r("./src/shared/deviceProxy/DeviceProxy.ts"),i=r("./src/util/utils/refMarker.ts"),a=r("./src/shared/deviceProxy/ServiceClientBase.ts"),s=r("./src/util/logger/logger.ts");function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c{constructor(){l(this,"store",new Map),l(this,"push",(e=>{const t=this.store.size+e.startTime;return this.store.set(t,e),t})),l(this,"delete",(e=>{this.store.delete(e)})),l(this,"values",(()=>Array.from(this.store.values()))),l(this,"clear",(()=>{this.store.clear()}))}}class d{constructor(e,t){l(this,"storage",void 0),l(this,"callback",void 0),l(this,"parameters",void 0),l(this,"interval",null),l(this,"timer",(()=>{this.interval=setInterval(this.execute,1e3*this.parameters.duration)})),l(this,"add",(e=>{const t=this.storage.push(e);return this.storage.store.size===this.parameters.size?this.execute():null===this.interval&&this.timer(),t})),l(this,"remove",(e=>{this.storage.delete(e)})),l(this,"execute",(()=>{this.callback(this.storage.values()),this.reset()})),l(this,"reset",(()=>{this.storage.clear(),null!==this.interval&&clearInterval(this.interval),this.interval=null})),this.storage=new c,this.callback=t,this.parameters=e}}var u=r("./src/shared/Stores/context.ts");function g(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class m{constructor({DTID:e,logger:t=new s.Oc("DVWebNode:ClickstreamClient"),batchParameters:r,homeRegion:i}){g(this,"DTID",void 0),g(this,"context",void 0),g(this,"serviceClient",void 0),g(this,"queue",void 0),g(this,"logger",void 0),g(this,"homeRegion",void 0),g(this,"buildURL",(()=>{const e=new URLSearchParams({...(0,o.B$)(this.context),deviceTypeID:this.DTID,firmware:"DVWebNode"});return`${(0,o.WA)(this.context,this.homeRegion)}/${m.CLICKSTREAM_URL}?${e.toString()}`})),g(this,"buildEntry",((e,t)=>Object.assign(t,{hitType:e,startTime:Date.now(),deviceTypeId:this.DTID}))),g(this,"getAdditionalParameters",(()=>({isStressTest:String(Boolean(this.context.isTest)),clientIp:this.context.customerIPAddress,currentClientTime:Date.now(),currentTerritory:this.context.currentTerritory,customerId:this.context.customerID,deviceId:this.context.deviceID,deviceTypeId:this.DTID,identityContext:this.context.identityContext,marketplaceId:this.context.marketplaceID,preferredLanguage:this.context.locale,sessionId:this.context.sessionID,videoCountryOfRecord:this.context.recordTerritory}))),g(this,"call",(async e=>{const t=JSON.stringify({EntryList:e,...this.getAdditionalParameters()});try{await this.serviceClient.post({operationName:a.n.Clickstream,uri:this.buildURL(),opts:{credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:t}},m.strategy)}catch(e){}})),g(this,"hit",(({pageType:e,subPageType:t,clientVariant:r,refMarker:o,pageTypeId:i,A9SearchFields:a,weblabs:s})=>{const l=this.buildEntry(n.qB.PageHit,{action:n.W0.Click,pageType:e,subPageType:t,clientVariant:r,...o&&{refMarker:o},...i&&{pageTypeId:i},...a&&{A9SearchFields:a},...s&&{Weblabs:s}});this.queue.add(l)})),g(this,"hva",(({pageType:e,subPageType:t,action:r,clientVariant:o,refMarker:i,pageTypeId:a,hitType:s,A9SearchFields:l,additionalData:c,weblabs:d})=>{const u=this.buildEntry(null!=s?s:n.qB.PageTouch,{action:r,pageType:e,subPageType:t,clientVariant:o,...i&&{refMarker:i},...a&&{pageTypeId:a},...l&&{A9SearchFields:l},...c&&{additionalData:c},...d&&{Weblabs:d}});this.queue.add(u)})),this.context=(0,u.getRequestContext)(),this.DTID=e,this.logger=t,this.serviceClient=new a.v({logger:t,logErrorAsWarning:!0}),this.queue=new d(r,this.call),this.homeRegion=i}}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}g(m,"CLICKSTREAM_URL","cdp/usage/Clickstream"),g(m,"strategy",{maxRetries:0,retryOnException:()=>!1});const h={size:1,duration:1};class v extends m{constructor({homeRegion:e,logger:t}){super({DTID:v.getDTID(),logger:t,homeRegion:e,batchParameters:v.getBatchParameters()}),p(this,"previousParameters",void 0),p(this,"onNavigation",void 0),p(this,"backButtonData",void 0),p(this,"getClientVariant",(e=>n.sW[e]?n.sW[e][n.KU.Web]:n.Nb.Unknown)),p(this,"getA9SearchFields",(()=>{var e;const t=new URLSearchParams(window.location.search),r=e=>{if(null===e)return null;const t=parseInt(e,10);return isNaN(t)?null:t},n=r(t.get("qid")),o=t.get("sr"),i=null===o?null:r(o.split("-")[1]);return null!==n&&null!==i&&i>0?{qid:n,searchPositionIndex:i,keyword:null!==(e=t.get("keywords"))&&void 0!==e?e:""}:void 0})),p(this,"getRefmarker",(()=>{const e=window.location.href.match(i.oA);return e&&e[1]||"atv_unknown"})),p(this,"getParameters",((e,t,r,n)=>({pageType:e,subPageType:t,refMarker:r||this.getRefmarker(),clientVariant:n||this.getClientVariant(e),A9SearchFields:this.getA9SearchFields()}))),p(this,"recordBackButton",(()=>{const e=this.getRefmarker();this.backButtonData={ref:e+"_back",hitType:n.qB.BackForwardButton}})),p(this,"clearBackButton",(()=>{this.backButtonData=void 0})),p(this,"navigation",(e=>{const{pType:t,sPageType:r,ref:o,pageTypeId:i,weblabs:a}=e;try{const{pageType:e,subPageType:s,refMarker:l,clientVariant:c,A9SearchFields:d}=this.getParameters(t,r,o);this.previousParameters={pageType:e,subPageType:s,refMarker:l,clientVariant:c,A9SearchFields:d},this.backButtonData&&(this.hva({pageType:e,subPageType:s,action:n.W0.Back,clientVariant:c,refMarker:this.backButtonData.ref,pageTypeId:i,hitType:this.backButtonData.hitType,A9SearchFields:d,weblabs:a}),this.clearBackButton()),this.hit({pageType:e,subPageType:s,clientVariant:c,refMarker:l,pageTypeId:i,A9SearchFields:d,weblabs:a}),this.onNavigation&&this.onNavigation({pageType:e,subPageType:s})}catch(e){this.logger.warn("PVClickstream navigation() error",e)}})),p(this,"action",(e=>{const{action:t,pType:r,sPageType:n,ref:o,pageTypeId:i,hitType:a,clientVariantOverride:s,additionalData:l}=e;try{const{pageType:e,subPageType:c,refMarker:d,clientVariant:u}=r&&n?this.getParameters(r,n,o,s):this.previousParameters;this.previousParameters={pageType:e,subPageType:c,refMarker:d,clientVariant:u},this.hva({pageType:e,subPageType:c,action:t,clientVariant:null!=s?s:u,hitType:a,refMarker:null!=o?o:d,pageTypeId:i,additionalData:l})}catch(e){this.logger.warn("PVClickstream action() error",e)}})),p(this,"setOnNavigation",(e=>this.onNavigation=e)),this.previousParameters={pageType:n.c7.ATVUnknown,subPageType:n.wW.Unknown,clientVariant:n.cf.Unknown,refMarker:"atv_unknown"}}}p(v,"getBatchParameters",(()=>h)),p(v,"getDTID",(()=>o.V4.WEB));let f=null;const E=e=>(null!=f&&void 0===e||(f=new v(e||{})),f)},"./src/shared/deviceProxy/ServiceClientBase.ts":(e,t,r)=>{r.d(t,{n:()=>c,v:()=>u});var n=r("./src/util/api/util.ts"),o=r("./src/shared/utils/metrics/metricTypes.ts"),i=r("./src/shared/Stores/context.ts"),a=r("./src/util/utils/network.ts");function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const l={credentials:"include",headers:{},body:void 0};let c=function(e){return e.Clickstream="Clickstream",e.ConsumeRental="ConsumeRental",e.Release="Release",e.Sync="Sync",e.UpdateStream="UpdateStream",e.RecordIASFeedback="RecordIASFeedback",e.ReportCustomerAction="ReportCustomerAction",e}({});const d={Clickstream:o.$E.CallClickStream,ConsumeRental:o.$E.CallConsumeRental,Release:o.$E.CallRelease,Sync:o.$E.CallSync,UpdateStream:o.$E.CallUpdateStream,RecordIASFeedback:o.$E.CallClickStream,ReportCustomerAction:o.$E.CallClickStream};class u{constructor({logger:e,retryLogic:t,logErrorAsWarning:r=!1}){s(this,"context",void 0),s(this,"logger",void 0),s(this,"retryLogic",void 0),s(this,"logErrorAsWarning",void 0),s(this,"defaultRetryCondition",(()=>!1)),s(this,"logError",((e,t,r)=>{this.logErrorAsWarning?this.logger.warn(t,{errorMessage:null==e?void 0:e.message,...r}):this.logger.error(t,{errorMessage:null==e?void 0:e.message,...r})})),this.context=(0,i.getRequestContext)(),this.logger=e;const n={maxRetries:0,retryOnStatusCode:this.defaultRetryCondition,retryOnException:this.defaultRetryCondition,retryOnDeserializationException:this.defaultRetryCondition};this.retryLogic={...n,...t},this.logErrorAsWarning=r}sleep(e){return new Promise((t=>setTimeout(t,e)))}async get(e,t){const r={...e.opts,method:"GET"};return this.call(null==e?void 0:e.operationName,this.buildURL(e.uri,e.query),r,t)}async post(e,t){const r={...e.opts,method:"POST"};return this.call(null==e?void 0:e.operationName,this.buildURL(e.uri,e.query),r,t)}buildURL(e,t={}){let r;try{r=new URL(e)}catch(t){r=new URL(e,window.location.origin)}for(const e in t)r.searchParams.set(e,`${t[e]}`);return r.toString().replace(/\/$/,"")}constructPostRequest({body:e,...t}){return{...l,...t,body:e?JSON.stringify(e):void 0}}async call(e,t,r,n){const i={...this.retryLogic,...n};let a=0;do{const n={};try{if(a>0&&i.backoffStrategy){const e=i.backoffStrategy(a);await this.sleep(e)}const o=await this.fetchResponse(e,t,r,n);let s=await this.parseResponse(e,o,n);return n.Success=1,s}catch(o){if(this.shouldRetry(o,t,r,e,n,i)&&a!=i.maxRetries)continue;throw n.Failure=1,o}finally{0!=a&&(n.Retry=1),void 0!==e?this.logger.count(d[e],n):this.logger.count(o.$E.CallUndefined,n),a++}}while(a<=((null==i?void 0:i.maxRetries)||0));return Promise.reject()}async parseResponse(e,t,r){let o;try{o=await t.json()}catch(t){const o=new n.xU(t.message);throw this.logError(o,"Could not parse response",{operationName:e}),r.DeserializationException=1,o}return o}async fetchResponse(e,t,r,i){const a=Date.now(),s=await fetch(t,r);if(i.Latency=Date.now()-a,i[`StatusCode_${s.status}`]=1,!s.ok){const r=await s.text(),a=new n.jZ(r,s.status);throw 400===s.status?this.logger.count(o.l4.FetchResponseCode400,i):403===s.status?this.logger.count(o.l4.FetchResponseCode403,i):this.logError(a,"Non 2xx status code received",{statusCode:s.status,operationName:e,url:t,marketplaceId:this.context.marketplaceID,currentTerritory:this.context.currentTerritory,recordTerritory:this.context.recordTerritory,geoToken:this.context.geoToken,location:window.location.href}),a}return s}shouldRetry(e,t,r,o,i,s){return e instanceof n.jZ&&s&&s.retryOnStatusCode?s.retryOnStatusCode(e,t,r):e instanceof n.xU&&s&&s.retryOnDeserializationException?s.retryOnDeserializationException(e,t,r):(a.Zc.isOnline(!0)?i.Exception=1:i.NetworkException=1,this.logError(e,`${r.method} request threw an exception`,{url:t,operationName:o}),!(!s||!s.retryOnException)&&s.retryOnException(e,t,r))}}},"./src/shared/deviceProxy/marketplaceUtils.ts":(e,t,r)=>{r.r(t),r.d(t,{getCompanyName:()=>s,getDeviceProxyEndpoint:()=>o,getRatingBadgeLocale:()=>l,getRegionFromMarketplaceId:()=>i,getStringFromMarketplaceId:()=>a});var n=r("./src/util/utils/marketplace.ts");const o=(e,t)=>{let r="";switch(r=(0,n.is)()===n.wQ.ROW&&t?t:i(e),r){case n.yp.EU:return`atv-ps-eu${(0,n.is)()}`;case n.yp.FE:return`atv-ps-fe${(0,n.is)()}`;case n.yp.NA:default:return`atv-ps${(0,n.is)()}`}},i=e=>{switch(e){case n.HZ.UK:case n.HZ.DE:case n.HZ.ROW_EU:case n.HZ.ROE_EU:return n.yp.EU;case n.HZ.JP:case n.HZ.ROW_FE:return n.yp.FE;case n.HZ.US:case n.HZ.ROW_NA:default:return n.yp.NA}},a=e=>{switch(e){case n.HZ.UK:return"UK";case n.HZ.DE:return"DE";case n.HZ.ROW_EU:return"ROWEU";case n.HZ.ROE_EU:return"ROEEU";case n.HZ.JP:return"JP";case n.HZ.ROW_FE:return"ROWFE";case n.HZ.US:return"US";case n.HZ.ROW_NA:return"ROWNA";default:return"UNKNOWN"}},s=e=>{switch(e){case n.HZ.UK:return"Amazon Digital UK Limited";case n.HZ.DE:return"Amazon.com Int'l Sales, Inc";case n.HZ.JP:return"Amazon.com Sales, Inc";case n.HZ.US:default:return"Amazon.com Services LLC"}},l=e=>{switch(e){case n.HZ.UK:return"uk";case n.HZ.DE:return"de";default:return}}},"./src/shared/imageUtils/imageUtils.ts":(e,t,r)=>{r.d(t,{GH:()=>a,L3:()=>c,Ro:()=>b,TQ:()=>w,X8:()=>E,e4:()=>f,er:()=>v,fn:()=>d,kM:()=>l,lN:()=>s,pz:()=>u,rB:()=>i});var n=r("./src/util/utils/imageUtils/imageUtils.tsx"),o=r("./src/shared/utils/utils.ts");let i=function(e){return e.WIDTH="WIDTH",e.HEIGHT="HEIGHT",e}({}),a=function(e){return e.gif="gif",e.jpg="jpg",e.pkmz="pkmz",e.png="png",e.webp="webp",e}({});const s="https://m.media-amazon.com/images/G/01/digital/video/web/Default_Background_Art_LTR.jpg",l="https://m.media-amazon.com/images/G/01/digital/video/web/Default_Background_Art_RTL.jpg",c="https://m.media-amazon.com/images/G/01/digital/video/web/Default_Background_Art_2x3.png",d="https://m.media-amazon.com/images/G/01/digital/video/web/Default_Background_Art_8x3_LTR.png",u="https://m.media-amazon.com/images/G/01/digital/video/web/Default_Background_Art_8x3_RTL.png",g=[1.5,2],m={phone:"20em",phablet:"28em","phone-landscape":"47em",tablet:"55em","tablet-landscape":"65em",desktop:"90em",largeScreen:"118em","tablet-lowest":"28em","laptop-lowest":"55em","desktop-lowest":"80em","desktop-hd-lowest":"100em","desktop-uhd-lowest":"150em"},p=RegExp(`(${Object.keys(m).join("|")})$`),h=e=>"string"==typeof e?e:`${e}px`,v=(e,t,r,n,o,i,a,s)=>{const l=g.map((l=>`${f({src:e,value:t*l,baseType:r,type:n,skipStripTags:o,supportTransparency:i,autoCrop:a,shouldDarkenImage:s})} ${l}x`));return l&&l.unshift(f({src:e,value:t,baseType:r,type:n,skipStripTags:o,supportTransparency:i,autoCrop:a,shouldDarkenImage:s})),l&&l.join(", ")},f=({src:e,value:t,baseType:r,type:o,skipStripTags:a,supportTransparency:s=!1,autoCrop:l,shouldDarkenImage:c})=>{if(!e)return"";const d=new n.e(e);return a||d.stripTags(),l&&c&&d.darken(),l&&d.autoCrop(),r===i.HEIGHT?d.scaleHeight(t):d.scaleWidth(t),o?d.forceFormat(o):s&&d.formatHasTransparencySupport&&d.forceFormat(d.urlFileFormat),d.getImageUrl()},E=(e,t,r,n,o,i,a)=>t.map((t=>`${f({src:e,value:t,baseType:r,type:n,skipStripTags:o,autoCrop:i,shouldDarkenImage:a})} ${t}w`)).join(", "),w=(e,t=[])=>{const r=t.reduce(((e,t)=>{const[r,n]=Object.entries(t)[0],o=(e=>e.replace(p,(e=>`width: ${m[e]}`)))(r);return o&&n&&e.push(`(${o}) ${h(n)}`),e}),[]);return r.push(h(e)),r.join(", ")},b=({src:e,baseValue:t,baseType:r=i.WIDTH,srcSizes:n,format:a,resolutions:s,skipStripTags:l,supportTransparency:c,autoCrop:d,elementTiming:u})=>{if(r===i.HEIGHT&&n)throw new Error("BaseType.HEIGHT can't be used with srcSizes. It is only compatible with format and resolutions.");if((0,o.xb)(n))return{src:f({src:e,value:t,baseType:r,type:a,skipStripTags:l,supportTransparency:c,autoCrop:d}),srcSet:v(e,t,r,a,l,c,d),...u?{elementtiming:u}:{}};const m=n.map((e=>Object.values(e)[0]));m.push(t);const p=((e,t=g)=>{const r=t.reduce(((t,r)=>[...t,...e.map((e=>Math.floor(e*r)))]),e);return Array.from(new Set(r)).sort(o.ws)})(m,s);return{src:f({src:e,value:t,baseType:r,type:a,skipStripTags:l,autoCrop:d}),srcSet:E(e,p,r,a,l,d),sizes:w(t,n),...u?{elementtiming:u}:{}}}},"./src/shared/utils/metrics/metricTypes.ts":(e,t,r)=>{r.d(t,{$E:()=>a,B:()=>n,l4:()=>i,p1:()=>o});let n=function(e){return e.DownloadActionCancelled="DownloadAction.Cancelled",e.DownloadActionDeleted="DownloadAction.Deleted",e.DownloadActionSeasonDownloadCancelled="DownloadAction.SeasonDownloadCancelled",e.DownloadActionDisable="DownloadAction:Disable",e.DownloadActionEnable="DownloadAction:Enable",e.DownloadActionResume="DownloadAction:Resume",e.DownloadActionHold="DownloadAction:Hold",e.DownloadActionPause="DownloadAction:Pause",e.DownloadActionRefresh="DownloadAction:Refresh",e.DownloadActionRemove="DownloadAction:Remove",e.DownloadActionRetry="DownloadAction:Retry",e.DownloadActionRelease="DownloadAction:Release",e.DownloadActionStarted="DownloadAction:Started",e.HeartbeatXPDownloads="DownloadActive:XP",e.DownloadEventCompleted="DownloadEvent.Completed",e.DownloadEventFailed="DownloadEvent.Failed",e.DownloadEventDownloadError="DownloadEvent:DownloadError",e.DownloadEventStatusChange="DownloadEvent:StatusChange",e.DownloadEventLocalContentError="DownloadEvent:LocalContentError",e.DownloadEventRefreshed="DownloadEvent:Refreshed",e.DownloadEventRefreshing="DownloadEvent:Refreshing",e.DownloadEventRefreshError="DownloadEvent:RefreshError",e.DownloadEventProgress="DownloadEvent:Progress",e.DownloadEventTriggered="DownloadEvent:Triggered",e.DownloadOfflineDataSavingError="offline-data-saving-error",e.DownloadReportNoDownloads="dl-no-downloads",e.DownloadReportNoDownloadsButMetadata="dl-no-downloads-but-metadata",e.DownloadReportNoMetadataButDownloads="dl-no-metadata-but-downloads",e.DownloadReportNoMetadata="dl-no-metadata",e.DownloadReportNoDownloadsNoMetadata="dl-nothing",e.DownloadAdditionalLanguageDefault="download-additional-language-default",e.DownloadQualityDefault="download-download-quality-default",e.DownloadQualityDownloadSettingsPage="download-quality:settings-page",e.DownloadQualityDownloadSettingsModal="download-quality:download-settings-modal",e.DownloadSettingsModalDownloadQualityTabOpened="download-settings-modal-download-quality-tab-opened",e.DownloadSettingsModalLanguageTabOpened="download-settings-modal-language-tab-opened",e.DownloadSettingsModalDownloadStart="download-settings-modal:download-start",e.DownloadSettingsModalOpen="download-settings-modal:open",e.DownloadMissingAudioTracks="missing-audio-tracks",e.DownloadMultiDeleteRequested="multi-delete-requested",e.DownloadMissingDownloadsMetadata="missing-downloads-metadata",e.RepopulateDownloadMetadata="DownloadReport.RepopulateDownloadMetadata",e.DownloadNoAction="download-no-action",e.GetAllDownloadOperations="GetAllDownloadOperations",e.XPDownloadTimingDownloadsMetadataReceived="xp-download-timing:downloads-metadata-received",e.XPDownloadTimingDownloadsPayloadConstructed="xp-download-timing:downloads-payload-constructed",e.XPDownloadTimingLCMLoaded="xp-download-timing:lcm-loaded",e.XPDownloadTimingOperationsDataReceived="xp-download-timing:operations-data-received",e.XPDownloadTimingSDKLoaded="xp-download-timing:sdk-loaded",e.EditDownloadsClicked="edit-clicked",e.DownloadFallBackStreaming="fallback-streaming",e}({}),o=function(e){return e.PlaybackOrigin="PlaybackOrigin",e.PlaybackOriginNativePlayback="PlaybackOrigin:NativePlayback",e.PlaybackOriginXpPlayback="PlaybackOrigin:XpPlayback",e.PlaybackTitleIdMismatch="playback-title-id-mismatch",e}({}),i=function(e){return e.SWClearCache="sw-clear-cache",e.AssetLoadingFailed="AssetLoadingFailed",e.CXBlockingErrorRecovered="CXBlockingErrorRecovered",e.CXBlockingErrorUnknown="CXBlockingErrorUnknown",e.ChunkFailedToLoad="ChunkFailedToLoad",e.FetchResponseCode400="HTTP:400",e.FetchResponseCode403="HTTP:403",e.LogoutActionTimeout="LogoutAction-Timeout",e.ProfileSwitch="ProfileSwitch",e.SPAInitialisation="SPAInitialisation",e.Deeplink="deeplink",e.DeeplinkAction="deeplinkAction",e.NavBarToggle="navigationBar:toggle",e.ProfilesModalOpen="profilesModal:open",e.SpaEPAReload="spa-epa-reload",e.UXLanguageChangeShowErrorBanner="uxLanguageChange-show-error-banner",e.WidgetMount="widget-mount",e.AppUpdateBannerAction="AppUpdateBannerAction",e.AppUpdateSunsetAction="AppUpdateSunsetAction",e}({}),a=function(e){return e.CallClickStream="Call:Clickstream",e.CallConsumeRental="Call:ConsumeRental",e.CallRelease="Call:Release",e.CallSync="Call:Sync",e.CallUpdateStream="Call:UpdateStream",e.CallUndefined="Call:Undefined",e.SyncDisable="Sync:Disable",e.SyncRefresh="Sync:Refresh",e.SyncDelete="Sync:Delete",e.SyncNoAction="Sync:NoAction",e.SyncUnknown="Sync:Unknown",e}({})},"./src/shared/utils/setContextFromInlineScript.ts":(e,t,r)=>{r.d(t,{j:()=>i});var n=r("./node_modules/zustand/esm/vanilla.mjs"),o=r("./src/util/utils/htmlEncode.ts");const i=()=>{var e;window.DVWebNode||(window.DVWebNode={perfMetrics:{}}),window.DVWebNode.stores||(window.DVWebNode.stores=(0,n.M)((()=>({context:void 0}))));const t=null===(e=document.getElementById("dvwebnode-context"))||void 0===e?void 0:e.innerHTML;if(t)try{const e=JSON.parse((0,o.He)(t)),r=(0,o.Mt)(e),n=(0,o.ob)(r);return window.DVWebNode.stores.setState({context:n}),n}catch(e){"undefined"!=typeof window&&window.ueLogError&&window.ueLogError(e,{logLevel:"ERROR",message:"Unable to parse RequestContext in inline-head-start-scripts"})}else"undefined"!=typeof window&&window.ueLogError&&window.ueLogError(new Error("Element with id=dvwebnode-context not found"),{logLevel:"ERROR",message:"Unable to parse RequestContext in inline-head-start-scripts"})}},"./src/shared/utils/utils.ts":(e,t,r)=>{r.d(t,{R4:()=>n,ws:()=>i,xb:()=>o});r("./node_modules/react/index.js");const n=(e,t)=>{const r=e||.7*window.innerWidth,n=t||.7*window.innerHeight;return`toolbar=0, status=0, width=${r}, height=${n}, top=${window.top?window.top.outerHeight/2+window.top.screenY-n/2:0}, left=${window.top?window.top.outerWidth/2+window.top.screenX-r/2:0}`},o=e=>!e||0===e.length,i=(e,t)=>e-t},"./src/widgets/DVWebNodeCrossBenefitModal/utils/utils.ts":(e,t,r)=>{r.d(t,{Dy:()=>E,Im:()=>c,LH:()=>h,M_:()=>p,bO:()=>f,hT:()=>l,oB:()=>v,qH:()=>m});var n=r("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts"),o=r("./src/util/utils/localStorage.ts");const i="pvCrossBenefitModalTimestamp",a=n.c7.ATVModal,s=["#sp-cc",".DVWebNode-cookie-banner-wrapper",".DVWebNode-critical-notification"],l=()=>s.some((e=>document.querySelector(e))),c=()=>!!document.getElementById("crossbenefit-modal-suppression-key");let d=function(e){return e.MODAL_RENDER="vw",e.OPT_OUT="opt",e.MODAL_DISMISS="ds",e.MODAL_TILE="cta",e.CTA_BUTTON="cta",e}({}),u=function(e){return e.BUTTON="btn",e.MODAL_TILE="itl",e.MODAL_RENDER="none",e.MODAL_DISMISS="os",e}({}),g=function(e){return e.BUTTON="none",e.CTA_BUTTON="0",e.MODAL_RENDER="all",e.MODAL_DISMISS="none",e}({});const m=()=>{const e=Number.parseInt((0,o.le)(i)||"")||0;return(new Date).getTime()-e>72e5},p=(e,t)=>!!e&&!!t&&t.length>0,h=()=>{(0,o.D$)(i,`${(new Date).getTime()}`)},v=({clickstreamClient:e,subPageType:t,widgetRefmarker:r,callback:o})=>({hitType:i,interactionType:s,interactionMethod:l,ordering:c,action:d=n.W0.Click,shouldExecuteCallBack:u=!0})=>{e&&e.action({hitType:i,action:d,pType:a,sPageType:t,clientVariantOverride:n.Nb.DetailPage,ref:`atv_${r}_xbd_${s}_${l}_${c}`}),u&&o()},f=({modalContent:{modalDiscoveryTiles:e,modalTheme:t}})=>!!t&&e.length>0,E=e=>({onModalRender:()=>e({hitType:n.qB.PopUp,interactionType:d.MODAL_RENDER,interactionMethod:u.MODAL_RENDER,ordering:`${g.MODAL_RENDER}`,action:n.W0.ModalRendered,shouldExecuteCallBack:!1}),onModalDismount:()=>e({hitType:n.qB.PageHit,interactionType:d.MODAL_DISMISS,interactionMethod:u.MODAL_DISMISS,ordering:`${g.MODAL_DISMISS}`}),onCloseButtonClick:()=>e({hitType:n.qB.PageHit,interactionType:d.MODAL_DISMISS,interactionMethod:u.BUTTON,ordering:`${g.MODAL_DISMISS}`}),onOptOutButtonClick:()=>e({hitType:n.qB.PageHit,interactionType:d.OPT_OUT,interactionMethod:u.BUTTON,ordering:`${g.BUTTON}`}),onCTAButtonClick:()=>e({hitType:n.qB.PageHit,interactionType:d.CTA_BUTTON,interactionMethod:u.BUTTON,ordering:`${g.CTA_BUTTON}`}),onTileLinkClick:t=>()=>e({hitType:n.qB.PageTouch,interactionType:d.MODAL_TILE,interactionMethod:u.MODAL_TILE,ordering:`${t}`})})},"./src/shared/CS/components/Modal/Modal.module.scss":(e,t,r)=>{r.d(t,{Z:()=>n});const n={modalContainer:"iKamlh",modalWrapper:"rvJd8n",fadeInFrames:"r9gEB4",background:"e8FL8q",modalContent:"t3E74H",emptyHeader:"zg6Cp5",xsModalSize:"fHwPje",sModalSize:"CGno9b",mModalSize:"tow9o1",lModalSize:"oAUzdo",headerWrapper:"_4CeEyk",closeButton:"q2lvVN",bodyWrapper:"UV6HKC",footerWrapper:"kZXeoZ",actionButton:"fuSZLL",alignedActionButton:"vhGVDS"}}},e=>{var t=t=>e(e.s=t);e.O(0,[1216],(()=>(t("./node_modules/wicg-inert/dist/inert.esm.js"),t("./src/entrypoints/hydration/crossbenefit-modal.tsx"))));e.O()}]);
//# sourceMappingURL=http://sourcemaps.aka.amazon.com/9a4e1f63bba10c985dedaad2af41ec2ca37bd15935c359f67a9aedc16f1b17fe201439c45bd39c830ed05ce89df1b94236318c4464ad7581379c7b042df3968560b8764be3e0214b3c793c16c32e91046fc8924f558ef27bf56ef14cf979bf272efa52b7e825499b2b1071760105a715f2dd1e715870ad3ef4efe062204cc892f254d82d2556700d4519a6ad9e4ac700b72daa38c4041d623b9050cd2972333dd78c936d9f94dfd860b45a86666c8616745f735bfa2a71d3218b05c3e2872311f6f300021c51e9d8bf291f1a03b3b3ca43667dc0f10a0b5d51bb8bf2620798a520c6a16f6dae5c93fa0156677c34d958ea47ed53a1bcd820621159a037511b07?np=1