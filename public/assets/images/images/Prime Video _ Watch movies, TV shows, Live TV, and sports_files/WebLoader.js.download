var WebPlayerLoader=function(){"use strict";var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var o=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,r){void 0===t&&(t=12e4),void 0===e&&(e=2),void 0===r&&(r=document);var n=this;this.scriptErrorCount=0,this.scriptLoaded=!1,this.onScriptError=function(t,e,r){t&&(t.onload=t.onerror=t.onreadystatechange=null),clearTimeout(n.scriptTimerId),n.objectExists(n.scriptInfo.name)||(++n.scriptErrorCount<n.maxAttempts?(n.onNonFatal(e),n.setScript(r)):n.onFatal(e))},this.scriptTimeoutMs=t,this.maxAttempts=e,this.documentInstance=r}return t.prototype.get=function(t,e,r,n,o){void 0===o&&(o=!1),this.scriptInfo=t,this.onLoad=e,this.onNonFatal=r,this.onFatal=n,this.scriptErrorCount=0,this.scriptLoaded=!1,this.bustCache=o,clearTimeout(this.scriptTimerId),this.setScript(this.scriptInfo.url)},t.prototype.setScript=function(e){var r=this,n=this.documentInstance.createElement("script");this.scriptTimerId=setTimeout(function(){r.onScriptError(n,new Error("Script load timed out. "+r.scriptInfo.name+" for "+e),e)},this.scriptTimeoutMs);var o=(new Date).getTime();n.setAttribute("crossorigin","anonymous"),n.onload=n.onreadystatechange=function(){if(!r.scriptLoaded&&(void 0===n.readyState||"loaded"===n.readyState||"complete"===n.readyState))if(r.objectExists(r.scriptInfo.name)){clearTimeout(r.scriptTimerId),r.scriptLoaded=!0;var t=(new Date).getTime()-o;n.onload=n.onerror=n.onreadystatechange=null,r.onLoad({cached:!1,downloadMs:t,totalMs:t})}else r.onScriptError(n,new Error("Script loaded but missing result object. Expected "+r.scriptInfo.name+" for "+e),e)},n.onerror=function(){r.onScriptError(n,new Error("Script onerror fired: "+r.scriptInfo.name+" for "+e),e)};var t=this.bustCache?"?t="+(new Date).getTime():"";n.src=e+t,this.documentInstance.getElementsByTagName("head")[0].appendChild(n)},t.prototype.objectExists=function(t){return void 0!==window[t]},t}();e.JavaScriptLoader=r});t(o);o.JavaScriptLoader;var n=e(function(l){!function(t){var r,s={};s.VERSION="1.4.1";var n={},e=function(t,e){return function(){return e.apply(t,arguments)}},o=function(){var t,e,r=arguments,n=r[0];for(e=1;e<r.length;e++)for(t in r[e])t in n||!r[e].hasOwnProperty(t)||(n[t]=r[e][t]);return n},i=function(t,e){return{value:t,name:e}};s.DEBUG=i(1,"DEBUG"),s.INFO=i(2,"INFO"),s.TIME=i(3,"TIME"),s.WARN=i(4,"WARN"),s.ERROR=i(8,"ERROR"),s.OFF=i(99,"OFF");var a=function(t){this.context=t,this.setLevel(t.filterLevel),this.log=this.info};a.prototype={setLevel:function(t){t&&"value"in t&&(this.context.filterLevel=t)},getLevel:function(){return this.context.filterLevel},enabledFor:function(t){var e=this.context.filterLevel;return t.value>=e.value},debug:function(){this.invoke(s.DEBUG,arguments)},info:function(){this.invoke(s.INFO,arguments)},warn:function(){this.invoke(s.WARN,arguments)},error:function(){this.invoke(s.ERROR,arguments)},time:function(t){"string"==typeof t&&0<t.length&&this.invoke(s.TIME,[t,"start"])},timeEnd:function(t){"string"==typeof t&&0<t.length&&this.invoke(s.TIME,[t,"end"])},invoke:function(t,e){r&&this.enabledFor(t)&&r(e,o({level:t},this.context))}};var c,p=new a({filterLevel:s.OFF});(c=s).enabledFor=e(p,p.enabledFor),c.debug=e(p,p.debug),c.time=e(p,p.time),c.timeEnd=e(p,p.timeEnd),c.info=e(p,p.info),c.warn=e(p,p.warn),c.error=e(p,p.error),c.log=c.info,s.setHandler=function(t){r=t},s.setLevel=function(t){for(var e in p.setLevel(t),n)n.hasOwnProperty(e)&&n[e].setLevel(t)},s.getLevel=function(){return p.getLevel()},s.get=function(t){return n[t]||(n[t]=new a(o({name:t},p.context)))},s.createDefaultHandler=function(o){(o=o||{}).formatter=o.formatter||function(t,e){e.name&&t.unshift("["+e.name+"]")};var i={},a=function(t,e){Function.prototype.apply.call(t,console,e)};return"undefined"==typeof console?function(){}:function(t,e){t=Array.prototype.slice.call(t);var r,n=console.log;e.level===s.TIME?(r=(e.name?"["+e.name+"] ":"")+t[0],"start"===t[1]?console.time?console.time(r):i[r]=(new Date).getTime():console.timeEnd?console.timeEnd(r):a(n,[r+": "+((new Date).getTime()-i[r])+"ms"])):(e.level===s.WARN&&console.warn?n=console.warn:e.level===s.ERROR&&console.error?n=console.error:e.level===s.INFO&&console.info?n=console.info:e.level===s.DEBUG&&console.debug&&(n=console.debug),o.formatter(t,e),a(n,t))}},s.useDefaults=function(t){s.setLevel(t&&t.defaultLevel||s.DEBUG),s.setHandler(s.createDefaultHandler(t))},l.exports?l.exports=s:(s._prevLogger=t.Logger,s.noConflict=function(){return t.Logger=s._prevLogger,s},t.Logger=s)}(i)}),r=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var a=n.get("IndexedDBStorage"),r=function(){function t(t,e){void 0===e&&(e=window);var n=this;this.VERSION=1,this.dbOpenRequest=null,this.pendingDbOperations=[],this.database=null,this.onGetCallbackMap={},this.tryInitialize=function(t){n.database||!n.isSupported()?t():(n.pendingDbOperations.push(t),null==n.dbOpenRequest&&n.initialize(function(){for(var t=0,e=n.pendingDbOperations;t<e.length;t++){(0,e[t])()}n.dbOpenRequest=null,n.pendingDbOperations=[]}))},this.initialize=function(e){try{var r=n.windowRef.indexedDB.open(n.dbName,n.VERSION);(n.dbOpenRequest=r).onsuccess=function(t){try{n.database=t.target.result,n.attachDatabaseErrorListener()}catch(t){}e()},r.onupgradeneeded=function(t){t.oldVersion<1&&(n.database=t.target.result,n.attachDatabaseErrorListener(),n.database.createObjectStore(n.dbName))},r.onerror=function(t){a.error("IndexedDB open request error.",r.error),t.stopPropagation(),t.preventDefault(),e()}}catch(t){e()}},this.dbName=t,this.windowRef=e}return t.prototype.get=function(o,r){var i=this;this.onGetCallbackMap[o]=r,this.tryInitialize(function(){try{if(!i.database)return void i.tryInvokeCallback(o);var n=(new Date).getTime(),t=i.database.transaction([i.dbName],"readonly");i.attachTransactionErrorListener(t,"IndexedDB 'get' transaction error.",o);var e=t.objectStore(i.dbName).get(o);e.onsuccess=function(t){try{var e=t.target.result,r=i.onGetCallbackMap[o];null!=r&&(r(e,(new Date).getTime()-n),delete i.onGetCallbackMap[o])}catch(t){i.tryInvokeCallback(o)}},e.onerror=function(t){a.error("IndexedDB 'get' request error.",e.error),t.preventDefault(),t.stopPropagation(),i.tryInvokeCallback(o)}}catch(t){r()}})},t.prototype.set=function(e,r){var n=this;this.tryInitialize(function(){try{if(n.database){var t=n.database.transaction([n.dbName],"readwrite");n.attachTransactionErrorListener(t,"IndexedDB 'set' transaction error."),t.objectStore(n.dbName).put(r,e)}}catch(t){}})},t.prototype.clear=function(){var e=this;this.tryInitialize(function(){try{if(null!=e.database){var t=e.database.transaction([e.dbName],"readwrite");e.attachTransactionErrorListener(t,"IndexedDB 'clear' transaction error."),t.objectStore(e.dbName).clear()}}catch(t){}})},t.prototype.attachDatabaseErrorListener=function(){var r=this;null!=this.database&&(this.database.onerror=function(t){var e=t.target;a.error("IndexedDB Database error.",e.error),t.preventDefault(),t.stopPropagation(),Object.keys(r.onGetCallbackMap).forEach(function(t){return r.tryInvokeCallback(t)})})},t.prototype.attachTransactionErrorListener=function(e,r,n){var o=this;e.onerror=function(t){a.error(r,e.error),t.preventDefault(),t.stopPropagation(),null!=n&&o.tryInvokeCallback(n)}},t.prototype.tryInvokeCallback=function(t){var e=this.onGetCallbackMap[t];null!=e&&(e(),delete this.onGetCallbackMap[t])},t.prototype.isSupported=function(){return null!=this.windowRef.indexedDB},t}();e.IndexedDBStorage=r});t(r);r.IndexedDBStorage;var a=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.IndexedDBStorage=r.IndexedDBStorage});t(a);a.IndexedDBStorage;var s=e(function(t,e){var r,n;Object.defineProperty(e,"__esModule",{value:!0}),(n=r||(r={}))[n.JavaScript=0]="JavaScript",n[n.JSON=1]="JSON",e.ScriptType=r});t(s);s.ScriptType;var c=e(function(t,e){var r;r=function(t){t.version="0.4.0";var a=function(){for(var t=0,e=new Array(256),r=0;256!=r;++r)t=1&(t=1&(t=1&(t=1&(t=1&(t=1&(t=1&(t=1&(t=r)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1,e[r]=t;return"undefined"!=typeof Int32Array?new Int32Array(e):e}(),o="undefined"!=typeof Buffer;function i(t){for(var e=-1,r=0,n=t.length-7;r<n;)e=(e=(e=(e=(e=(e=(e=(e=e>>>8^a[255&(e^t[r++])])>>>8^a[255&(e^t[r++])])>>>8^a[255&(e^t[r++])])>>>8^a[255&(e^t[r++])])>>>8^a[255&(e^t[r++])])>>>8^a[255&(e^t[r++])])>>>8^a[255&(e^t[r++])])>>>8^a[255&(e^t[r++])];for(;r<n+7;)e=e>>>8^a[255&(e^t[r++])];return-1^e}t.table=a,t.bstr=function(t){if(32768<t.length&&o)return i(new Buffer(t));for(var e=-1,r=t.length-1,n=0;n<r;)e=a[255&(e^t.charCodeAt(n++))]^e>>>8,e=a[255&(e^t.charCodeAt(n++))]^e>>>8;return n===r&&(e=e>>>8^a[255&(e^t.charCodeAt(n))]),-1^e},t.buf=function(t){if(1e4<t.length)return i(t);for(var e=-1,r=0,n=t.length-3;r<n;)e=(e=(e=(e=e>>>8^a[255&(e^t[r++])])>>>8^a[255&(e^t[r++])])>>>8^a[255&(e^t[r++])])>>>8^a[255&(e^t[r++])];for(;r<n+3;)e=e>>>8^a[255&(e^t[r++])];return-1^e},t.str=function(t){for(var e,r,n=-1,o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))<128?n=n>>>8^a[255&(n^e)]:e<2048?n=(n=n>>>8^a[255&(n^(192|e>>6&31))])>>>8^a[255&(n^(128|63&e))]:55296<=e&&e<57344?(e=64+(1023&e),r=1023&t.charCodeAt(o++),n=(n=(n=(n=n>>>8^a[255&(n^(240|e>>8&7))])>>>8^a[255&(n^(128|e>>2&63))])>>>8^a[255&(n^(128|r>>6&15|(3&e)<<4))])>>>8^a[255&(n^(128|63&r))]):n=(n=(n=n>>>8^a[255&(n^(224|e>>12&15))])>>>8^a[255&(n^(128|e>>6&63))])>>>8^a[255&(n^(128|63&e))];return-1^n}},"undefined"==typeof DO_NOT_EXPORT_CRC?r(e):r({})}),p=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var g="X-Server-IP",r=function(){function t(t,e){void 0===t&&(t=XMLHttpRequest),void 0===e&&(e=c.str);var y=this;this.makeXHRRequest=function(n,c,o,i,p,a,s,l,t){void 0===l&&(l=0);var u=new y.XHR;null!=t&&(u.responseType=t);var d="",f=function(t){t||(t={type:"unknown error"});var e=new Error("XHR "+t.type+" for "+n+". Status: "+u.status+", readyState: "+u.readyState),r={attempt:l,cloudfrontRequestID:u.getResponseHeader("x-amz-cf-id"),contentHash:t.contentHash,contentLength:t.contentLength,contentLengthHeader:-1!==d.indexOf("Content-Length")?u.getResponseHeader("Content-Length"):null,serverIP:-1!==d.indexOf(g)?u.getResponseHeader(g):null};0<i?(a(e,r),y.makeXHRRequest(n,c,o,--i,p,a,s,l+1)):s(e,r)},h=y.now(),v=h;u.addEventListener("readystatechange",function(){2===u.readyState&&(v=y.now())}),u.addEventListener("load",function(){if(d=u.getAllResponseHeaders(),200===u.status){var t=y.now();if("arraybuffer"===u.responseType)return void p(u.response,{cached:!1,latencyMs:v-h,downloadMs:t-v,verifyMs:null,serverIP:-1!==d.indexOf(g)?u.getResponseHeader(g):null});var e=u.responseText,r=!0,n=null,o="(not checked)";if(c){var i=y.now();r=(o=""+y.toCRC32(e))===c,n=y.now()-i}if(r)p(e,{cached:!1,latencyMs:v-h,downloadMs:t-v,verifyMs:n,serverIP:-1!==d.indexOf(g)?u.getResponseHeader(g):null});else{var a=e?e.length:0,s=0<a?"["+e.substr(0,15)+"]":"(empty)";f({type:"verify failed "+s,contentLength:a,contentHash:o})}}else f({type:"bad response"})}),u.addEventListener("error",f),u.addEventListener("timeout",f);var e=0===l?"":"?t="+y.now();u.open("GET",n+e),u.timeout=o,u.send()},this.XHR=t,this.toCRC32=e}return t.prototype.isSupported=function(){return"withCredentials"in new this.XHR},t.prototype.get=function(t,e,r,n,o,i,a,s){this.makeXHRRequest(t,a,e,r,n,o,i,0,s)},t.prototype.now=function(){return(new Date).getTime()},t}();e.SimpleURLAcquirer=r});t(p);p.SimpleURLAcquirer;var l=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,r,n){void 0===t&&(t=new o.JavaScriptLoader),void 0===e&&(e=new p.SimpleURLAcquirer),void 0===r&&(r=new a.IndexedDBStorage("ScriptStore"));var i=this;this.SCRIPT_TYPES_XHR_REQUIRED=[s.ScriptType.JSON],this.XHR_TIMEOUT_MS=12e4,this.XHR_RETRIES=2,this.loadJsonFromString=function(e,t,r){try{var n=(new Date).getTime();r.payload=JSON.parse(t),r.parseMs=(new Date).getTime()-n,r.totalMs=i.calculateTotalLoadMs(r),e.onLoad(r)}catch(t){i.onError(e,t)}},this.loadJavaScriptFromString=function(e,t,r){try{var n=new Blob([t],{type:"application/javascript"}),o={url:i.createObjectURL(n),name:e.scriptInfo.name,type:e.scriptInfo.type,version:e.scriptInfo.version};i.javaScriptLoader.get(o,function(t){r.parseMs=t.downloadMs,r.totalMs=i.calculateTotalLoadMs(r),e.onLoad(r)},e.onNonFatal,function(t){return i.onError(e,t)})}catch(t){i.onError(e,t)}},this.loadJavaScriptFromOrigin=function(t){i.javaScriptLoader.get(t.scriptInfo,t.onLoad,t.onNonFatal,t.onFatal,!0)},this.loadJsonFromOrigin=function(r){i.urlAcquirer.get(r.scriptInfo.url,i.XHR_TIMEOUT_MS,i.XHR_RETRIES,function(t,e){i.loadFromString(r,t,e)},function(t){r.onNonFatal(t)},function(t){r.onFatal(t)},r.scriptInfo.crc32)},this.javaScriptLoader=t,this.urlAcquirer=e,this.offlineStorage=r,this.loadFromStringFunctions={},this.loadFromStringFunctions[s.ScriptType.JavaScript]=this.loadJavaScriptFromString,this.loadFromStringFunctions[s.ScriptType.JSON]=this.loadJsonFromString,this.loadFromOriginFunctions={},this.loadFromOriginFunctions[s.ScriptType.JavaScript]=this.loadJavaScriptFromOrigin,this.loadFromOriginFunctions[s.ScriptType.JSON]=this.loadJsonFromOrigin,!this.isDefined(n)&&this.isDefined(window.URL)?this.createObjectURL=URL.createObjectURL:this.createObjectURL=n}return t.prototype.getContent=function(t,e){var r=this.requiresUrlAcquirer(t.scriptInfo.type);r&&!this.urlAcquirer.isSupported()?t.onFatal(new Error("URLAcquirer not supported but "+s.ScriptType[t.scriptInfo.type]+" requires it.")):!r&&this.onlySupportsOrigin()?this.loadFromOrigin(t):this.offlineStorage.get(t.scriptInfo.name,e)},t.prototype.loadFromString=function(t,e,r){var n=this.loadFromStringFunctions[t.scriptInfo.type];this.isDefined(n)?n(t,e,r):t.onFatal(new Error("No loadFromString function found for "+s.ScriptType[t.scriptInfo.type]))},t.prototype.loadFromOrigin=function(t){var e=this.loadFromOriginFunctions[t.scriptInfo.type];this.isDefined(e)?e(t):t.onFatal(new Error("No loadFromOrigin function found for "+s.ScriptType[t.scriptInfo.type]))},t.prototype.acquireNewAsset=function(r,n,o){var i=this;void 0===o&&(o=!0),this.urlAcquirer.get(r.scriptInfo.url,this.XHR_TIMEOUT_MS,this.XHR_RETRIES,function(t,e){o&&i.offlineStorage.set(r.scriptInfo.name,{version:r.scriptInfo.version,data:t}),n&&i.loadFromString(r,t,e)},function(t,e){r.onNonFatal(t,e)},function(t,e){n&&i.onError(r,t,e)},r.scriptInfo.crc32)},t.prototype.onError=function(t,e,r){t.onNonFatal(e,r),this.loadFromOrigin(t)},t.prototype.requiresUrlAcquirer=function(t){return-1!==this.SCRIPT_TYPES_XHR_REQUIRED.indexOf(t)},t.prototype.onlySupportsOrigin=function(){return!(this.isDefined(window.Blob)&&this.urlAcquirer.isSupported())},t.prototype.isDefined=function(t){return void 0!==t},t.prototype.nonNumberToZero=function(t){return"number"==typeof t?t:0},t.prototype.calculateTotalLoadMs=function(t){return this.nonNumberToZero(t.cacheLoadMs)+this.nonNumberToZero(t.latencyMs)+this.nonNumberToZero(t.downloadMs)+this.nonNumberToZero(t.verifyMs)+this.nonNumberToZero(t.parseMs)},t}();e.BaseCachingScriptLoader=r});t(l);l.BaseCachingScriptLoader;var u=e(function(t,e){var n,r=i&&i.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(o){function t(t,e,r,n){return o.call(this,t,e,r,n)||this}return r(t,o),t.prototype.get=function(r,t,e,n){var o=this,i={scriptInfo:r,onLoad:t,onNonFatal:e,onFatal:n};this.getContent(i,function(t,e){t?(o.loadFromString(i,t.data,{cached:!0,cacheLoadMs:e}),t.version!==r.version&&o.acquireNewAsset(i,!1)):o.acquireNewAsset(i,!0)})},t}(l.BaseCachingScriptLoader);e.LazyCachingScriptLoader=o});t(u);u.LazyCachingScriptLoader;var d=e(function(t,e){var n,r=i&&i.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(o){function t(t,e,r,n){return o.call(this,t,e,r,n)||this}return r(t,o),t.prototype.get=function(r,t,e,n,o){var i=this;void 0===o&&(o=!0);var a={scriptInfo:r,onLoad:t,onNonFatal:e,onFatal:n};o?this.getContent(a,function(t,e){t&&t.version===r.version?i.loadFromString(a,t.data,{cached:!0,cacheLoadMs:e}):i.acquireNewAsset(a,!0)}):this.onlySupportsOrigin()?this.loadFromOrigin(a):this.acquireNewAsset(a,!0,!1)},t}(l.BaseCachingScriptLoader);e.TransparentCachingScriptLoader=o});t(d);d.TransparentCachingScriptLoader;var f=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.JavaScriptLoader=o.JavaScriptLoader,e.LazyCachingScriptLoader=u.LazyCachingScriptLoader,e.ScriptType=s.ScriptType,e.SimpleURLAcquirer=p.SimpleURLAcquirer,e.TransparentCachingScriptLoader=d.TransparentCachingScriptLoader});t(f);var h,v;f.JavaScriptLoader,f.LazyCachingScriptLoader,f.ScriptType,f.SimpleURLAcquirer,f.TransparentCachingScriptLoader;(v=h||(h={}))[v.volume=0]="volume";var y=h,g=function(){function t(t){this.REGION_LIST=[{tld:"amazon.com",fls:"na",marketplace:"us",marketplaceId:"ATVPDKIKX0DER"},{tld:"amazon.de",fls:"eu",marketplace:"de",marketplaceId:"A1PA6795UKMFR9"},{tld:"amazon.co.uk",fls:"eu",marketplace:"uk",marketplaceId:"A1F83G8C2ARO7P"},{tld:"amazon.co.jp",fls:"fe",marketplace:"jp",marketplaceId:"A1VC38T7YXB528"}],this.region=this.REGION_LIST[0];for(var e=0,r=this.REGION_LIST;e<r.length;e++){var n=r[e];if(-1<(t||location.hostname).indexOf(n.tld)){this.region=n;break}}}return t.prototype.reportAppLoad=function(t){this.report("AppLoadTime",t+":u=ms")},t.prototype.reportAppLoadError=function(){this.report("AppLoadError","1")},t.prototype.reportAppLoadCacheHit=function(){this.report("AppLoadCacheHit","1")},t.prototype.reportAppLoadCacheMiss=function(){this.report("AppLoadCacheMiss","1")},t.prototype.report=function(t,e){(new Image).src="https://fls-"+this.region.fls+".amazon.com/1/action-impressions/1/OP/aiv-web-player/action/HTML5Player:."+t+"@v="+e+"?marketplace="+this.region.marketplace+"&marketplaceId="+this.region.marketplaceId+"&requestId=1&service=AIVWebPlayer&session="+(""+Math.random()).substr(2)},t}(),m={assetsRoot:"https://js-assets.aiv-cdn.net/playback/web_player",dependencies:{ATVWebPlayer:{name:"ATVWebPlayer",version:"1.0.201780.0",crc32:"-1004499109",forceUpdate:!1}}},b=f.JavaScriptLoader,L=f.ScriptType,S=function(){function t(e,t,r,n){void 0===e&&(e=m),void 0===t&&(t=new b),void 0===r&&(r=new g),void 0===n&&(n=location.search);var o=this;if(this.Features=y,this.onList=[],this.onceList=[],this.getFeatureList=[],n)for(var i=n.substr(1).split("&"),a=0;a<i.length;a++){var s=i[a].split("=");if(2===s.length){var c=s[0];if(e.dependencies[c]){var p=decodeURIComponent(s[1]).split(";");if(2!==p.length)throw new Error("crc-32 not supplied for "+c);e.dependencies[c].version=p[0],e.dependencies[c].crc32=p[1]}}}var l=e.dependencies.ATVWebPlayer,u={crc32:l.crc32,url:e.assetsRoot+"/"+l.name+"/"+l.version+"/js/"+l.name+".js",name:l.name,type:L.JavaScript,version:l.version};t.get(u,function(t){t.cached?r.reportAppLoadCacheHit():r.reportAppLoadCacheMiss(),o.webPlayer=new window.ATVWebPlayer(e),o.tryWebPlayer(),r.reportAppLoad(t.totalMs)},function(t){},function(t){if(window.ueLogError)try{window.ueLogError(t,{attribution:"web_player_loader"})}catch(t){}r.reportAppLoadError()})}return t.prototype.initialize=function(t){this.tryConfig(t)},t.prototype.prepare=function(t,e){this.tryConfig(t,e)},t.prototype.play=function(t,e,r){this.tryConfig(t,e,r)},t.prototype.on=function(t,e){this.webPlayer?this.webPlayer.on(t,e):this.appendListener(this.onList,t,e)},t.prototype.once=function(t,e){this.webPlayer?this.webPlayer.once(t,e):this.appendListener(this.onceList,t,e)},t.prototype.off=function(t,e){this.webPlayer?this.webPlayer.off(t,e):(this.removeListener(this.onList,t,e),this.removeListener(this.onceList,t,e))},t.prototype.getFeature=function(t,e,r){this.webPlayer?this.webPlayer.getFeature(t,e,r):this.getFeatureList.push({feature:t,onAvailable:e,onError:r})},t.prototype.appendListener=function(t,e,r){t.push({event:e,callback:r})},t.prototype.removeListener=function(t,e,r){for(var n=0;n<t.length;n++)t[n].event===e&&t[n].callback===r&&(t[n]=null)},t.prototype.tryConfig=function(t,e,r){void 0===t&&(t=null),void 0===e&&(e=null),void 0===r&&(r=null),this.playerConfig=t,this.contentConfig=e,this.playbackConfig=r,this.tryWebPlayer()},t.prototype.attachEvents=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];n&&e(n.event,n.callback)}},t.prototype.attachGetFeatures=function(){for(var t=0,e=this.getFeatureList;t<e.length;t++){var r=e[t];this.webPlayer.getFeature(r.feature,r.onAvailable,r.onError)}this.getFeatureList=[]},t.prototype.tryWebPlayer=function(){this.webPlayer&&(this.attachEvents(this.onList,this.webPlayer.on),this.attachEvents(this.onceList,this.webPlayer.once),this.attachGetFeatures(),this.onList=[],this.onceList=[],this.playbackConfig?this.webPlayer.play(this.playerConfig,this.contentConfig,this.playbackConfig):this.contentConfig?this.webPlayer.prepare(this.playerConfig,this.contentConfig):this.playerConfig&&this.webPlayer.initialize(this.playerConfig))},t}();return window.WebPlayer=S}();